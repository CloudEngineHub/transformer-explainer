import{s as je,G as _l,D as El,H as Il,I as ur,J as Un,M as xn,N as Wn,O as Xn,a4 as Ce,j as U,a5 as qe,a as P,d as $,k as x,p as g,i as W,n as Te,m as Ee,z as $t,C as el,A as tt,e as B,c as T,q as Be,w as vt,u as ie,f as k,ah as pe,t as me,o as Ie,b as ge,P as Gt,ai as Kn,v as ke,l as Pe,r as xe,ad as fl,E as ul,ab as Dl,aj as dr}from"../chunks/scheduler.DvgnvtHA.js";import{S as Ge,i as Re,c as le,a as ne,m as re,t as H,b as F,d as oe,g as Ve,e as Ae,h as Cl,j as hr,f as zt}from"../chunks/index.DUhmag0b.js";import{r as Dt,a as Ct,t as bt,m as Ft,u as $l,e as be,v as yt,b as he,g as We,w as Ut,x as al,y as Jt,z as Zn,p as tl,d as Rt,n as rl,A as pr,f as bl,Z as vr,i as ql,M as mr,B as Qn,P as gr,j as _r,k as $r,C as br,D as wr,E as kr}from"../chunks/index.DLu6PrMZ.js";import{b as dl,d as yr,c as Er}from"../chunks/transform.yYZBLT4W.js";import{s as ol,a as lt,M as Ht,K as qt,F as It,f as ut,Q as Ir}from"../chunks/QKVWeightPopover.0BQ8pJAi.js";import{g as Dr,a as Cr,t as qr,b as dt}from"../chunks/index.lruJjzEY.js";import{P as Sr,a as hl,H as Sl,A as Yn}from"../chunks/image.BtjWjWg8.js";import{a as Vr,i as Jn,b as Ar,c as Nr,l as wl}from"../chunks/linear.D3KXbiNi.js";import{b as Lr}from"../chunks/paths.Dvf2qK0V.js";function Mr(n){let e;const l=n[4].default,t=Un(l,n,n[6],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&64)&&xn(t,l,r,r[6],e?Xn(l,r[6],o,null):Wn(r[6]),null)},i(r){e||(H(t,r),e=!0)},o(r){F(t,r),e=!1},d(r){t&&t.d(r)}}}function Br(n){let e,l;const t=[{rounded:!0},{shadow:!0},n[1],{class:n[0]}];let r={$$slots:{default:[Mr]},$$scope:{ctx:n}};for(let o=0;o<t.length;o+=1)r=_l(r,t[o]);return e=new Sr({props:r}),e.$on("show",n[5]),{c(){le(e.$$.fragment)},l(o){ne(e.$$.fragment,o)},m(o,s){re(e,o,s),l=!0},p(o,[s]){const c=s&3?Dr(t,[t[0],t[1],s&2&&Cr(o[1]),s&1&&{class:o[0]}]):{};s&64&&(c.$$scope={dirty:s,ctx:o}),e.$set(c)},i(o){l||(H(e.$$.fragment,o),l=!0)},o(o){F(e.$$.fragment,o),l=!1},d(o){oe(e,o)}}}function Tr(n,e,l){const t=["type","defaultClass"];let r=El(e,t),{$$slots:o={},$$scope:s}=e,{type:c="dark"}=e,{defaultClass:a="py-2 px-3 text-sm font-medium"}=e;const f={dark:"bg-gray-900 text-white dark:bg-gray-700",light:"border-gray-200 bg-white text-gray-900",auto:" bg-white text-gray-900 dark:bg-gray-700 dark:text-white border-gray-200 dark:border-gray-700",custom:""};let p;function h(u){ur.call(this,n,u)}return n.$$set=u=>{l(8,e=_l(_l({},e),Il(u))),l(1,r=El(e,t)),"type"in u&&l(2,c=u.type),"defaultClass"in u&&l(3,a=u.defaultClass),"$$scope"in u&&l(6,s=u.$$scope)},n.$$.update=()=>{r.color?l(2,c="custom"):l(1,r.color="none",r),["light","auto"].includes(c)&&l(1,r.border=!0,r),l(0,p=qr("tooltip",a,f[c],e.class))},e=Il(e),[p,r,c,a,o,h,s]}class Oe extends Ge{constructor(e){super(),Re(this,e,Tr,Br,je,{type:2,defaultClass:3})}}function er(n=[],e){const l=n.map(s=>s.logit/e),t=l.map(s=>Math.exp(s)),r=t.reduce((s,c)=>s+c,0);return n.map((s,c)=>({...s,adjustedLogit:l[c],adjustedProbability:t[c]/r,adjustedExp:t[c]}))}function tr(n,e){const l=n.slice(0,e),t=[];let r=0;for(const s of l)r+=s.probability,t.push(r);const o=Math.random();for(let s=0;s<t.length;s++)if(o<t[s])return l[s];return l[0]}const Pr=!0,ci=Object.freeze(Object.defineProperty({__proto__:null,prerender:Pr},Symbol.toStringTag,{value:"Module"}));function zr(n,e){let l,t;for(const r of n)r!=null&&(l===void 0?r>=r&&(l=t=r):(l>r&&(l=r),t<r&&(t=r)));return[l,t]}function Hr(n,e){let l;if(e===void 0)for(const t of n)t!=null&&(l<t||l===void 0&&t>=t)&&(l=t);else{let t=-1;for(let r of n)(r=e(r,++t,n))!=null&&(l<r||l===void 0&&r>=r)&&(l=r)}return l}function Or(n,e){e===void 0&&(e=n,n=dl);for(var l=0,t=e.length-1,r=e[0],o=new Array(t<0?0:t);l<t;)o[l]=n(r,r=e[++l]);return function(s){var c=Math.max(0,Math.min(t-1,Math.floor(s*=t)));return o[c](s-c)}}function jr(n,e){return e.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function Gr(){var n=0,e=.5,l=1,t=1,r,o,s,c,a,f=Jn,p,h=!1,u;function _(z){return isNaN(z=+z)?u:(z=.5+((z=+p(z))-o)*(t*z<t*o?c:a),f(h?Math.max(0,Math.min(1,z)):z))}_.domain=function(z){return arguments.length?([n,e,l]=z,r=p(n=+n),o=p(e=+e),s=p(l=+l),c=r===o?0:.5/(o-r),a=o===s?0:.5/(s-o),t=o<r?-1:1,_):[n,e,l]},_.clamp=function(z){return arguments.length?(h=!!z,_):h},_.interpolator=function(z){return arguments.length?(f=z,_):f};function V(z){return function(O){var R,S,j;return arguments.length?([R,S,j]=O,f=Or(z,[R,S,j]),_):[f(0),f(.5),f(1)]}}return _.range=V(dl),_.rangeRound=V(Nr),_.unknown=function(z){return arguments.length?(u=z,_):u},function(z){return p=z,r=z(n),o=z(e),s=z(l),c=r===o?0:.5/(o-r),a=o===s?0:.5/(s-o),t=o<r?-1:1,_}}function lr(){var n=Vr(Gr()(Jn));return n.copy=function(){return jr(n,lr())},Ar.apply(n,arguments)}const{theme:ce}=Dt(Ct),_e=200,Vl={"gray-blue":{0:ce.colors.gray[_e],100:ce.colors.blue[_e]},"gray-blue-last":{0:ce.colors.gray[_e],100:ce.colors.blue[_e]},"purple-indigo":{0:ce.colors.purple[_e],100:ce.colors.indigo[_e]},"purple-indigo-last":{0:ce.colors.purple[_e],100:ce.colors.indigo[_e]},"indigo-blue":{0:ce.colors.indigo[_e],100:ce.colors.blue[_e]},"indigo-blue-last":{0:ce.colors.indigo[_e],100:ce.colors.blue[_e]},"blue-white":{0:ce.colors.blue[_e],100:ce.colors.white},"red-white":{0:ce.colors.red[_e],100:ce.colors.white},"green-white":{0:ce.colors.green[_e],100:ce.colors.white},"red-purple":{0:ce.colors.red[_e],100:ce.colors.purple[_e]},"blue-purple":{90:ce.colors.blue[_e],100:ce.colors.purple[_e]},"green-purple":{0:ce.colors.green[_e],100:ce.colors.purple[_e]},"blue-gray":{0:ce.colors.blue[_e],50:ce.colors.gray[_e]},"blue-white-blue":{0:ce.colors.blue[_e],40:ce.colors.white,60:ce.colors.white,100:ce.colors.blue[_e]},"blue-white-blue-last":{0:ce.colors.blue[_e],40:ce.colors.white,60:ce.colors.white,100:ce.colors.blue[_e]},"transparent-purple":{0:{color:ce.colors.purple[100],opacity:0},100:{color:ce.colors.purple[200],opacity:1}},"transparent-purple2":{0:{color:ce.colors.purple[400],opacity:0},100:{color:ce.colors.purple[200],opacity:1}},"transparent-purple-last":{0:{color:ce.colors.purple[100],opacity:0},100:{color:ce.colors.purple[200],opacity:1}},"transparent-purple2-last":{0:{color:ce.colors.purple[400],opacity:0},100:{color:ce.colors.purple[200],opacity:1}},"blue-blue":{0:ce.colors.blue[_e],100:ce.colors.blue[_e]},"red-red":{0:ce.colors.red[_e],100:ce.colors.red[_e]},"green-green":{0:ce.colors.green[_e],100:ce.colors.green[_e]},"blue-blue2":{0:ce.colors.blue[_e],100:ce.colors.blue[_e]},"red-red2":{0:ce.colors.red[_e],100:ce.colors.red[_e]},"green-green2":{0:ce.colors.green[_e],100:ce.colors.green[_e]},"blue-blue-last":{0:ce.colors.blue[_e],100:ce.colors.blue[_e]},"red-red-last":{0:ce.colors.red[_e],100:ce.colors.red[_e]},"green-green-last":{0:ce.colors.green[_e],100:ce.colors.green[_e]},"blue-blue2-last":{0:ce.colors.blue[_e],100:ce.colors.blue[_e]},"red-red2-last":{0:ce.colors.red[_e],100:ce.colors.red[_e]},"green-green2-last":{0:ce.colors.green[_e],100:ce.colors.green[_e]},"gray-gray":{0:ce.colors.gray[_e],100:ce.colors.gray[_e]},"purple-purple":{0:ce.colors.purple[_e],100:ce.colors.purple[_e]},"purple-purple-last":{0:ce.colors.purple[_e],100:ce.colors.purple[_e]}},jt=.5,nr=.8,Et=1,cl=.5,kl=.4,rr=.8,or=.5;function Rr(n){let e,l,t,r,o;return{c(){e=Ce("svg"),t=U(),r=Ce("svg"),this.h()},l(s){e=qe(s,"svg",{id:!0,class:!0,style:!0}),P(e).forEach($),t=x(s),r=qe(s,"svg",{class:!0,style:!0}),P(r).forEach($),this.h()},h(){g(e,"id","back"),g(e,"class","sankey-back absolute left-0 top-0 h-full w-full"),g(e,"style",l=`z-index:${n[2].attention_head_num-1};`),g(r,"class","sankey-top absolute left-0 top-0 h-full w-full"),g(r,"style",o=`z-index:${n[2].attention_head_num};`)},m(s,c){W(s,e,c),n[4](e),W(s,t,c),W(s,r,c),n[5](r)},p(s,[c]){c&4&&l!==(l=`z-index:${s[2].attention_head_num-1};`)&&g(e,"style",l),c&4&&o!==(o=`z-index:${s[2].attention_head_num};`)&&g(r,"style",o)},i:Te,o:Te,d(s){s&&($(e),$(t),$(r)),n[4](null),n[5](null)}}}const Fr=80;function Ur(n,e,l){let t,r,o;Ee(n,bt,q=>l(3,r=q)),Ee(n,Ft,q=>l(2,o=q));const{theme:s}=Dt(Ct);let c,a,f;const p={attention:[{from:".attention .query .head-rest",to:".head-block .query .vector",gradientId:"blue-blue2",opacity:jt},{from:".attention .key .head-rest",to:".head-block .key .vector",gradientId:"red-red2",opacity:jt},{from:".attention .value .head-rest",to:".head-block .value .vector",gradientId:"green-green2",opacity:jt},{from:".attention .head-out .vector",to:".mlp .initial .vector .head-rest",gradientId:"transparent-purple",opacity:jt}]},h=()=>{const C=lt(a).append("defs");Object.keys(Vl).forEach(N=>{const i=Vl[N],d=C.append("linearGradient").attr("id",N).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%");Object.keys(i).forEach(m=>{let w,y;typeof i[m]!="string"?(w=i[m].color,y=i[m].opacity):(w=i[m],y=1),d.append("stop").attr("offset",`${m}%`).attr("stop-color",w).attr("stop-opacity",y)})})};let u=1,_;const V=(q,C)=>{var N,i;if(clearTimeout(_),$l.set(C),(i=(N=t[C])==null?void 0:N[0])!=null&&i.hoverable){const d=lt(`g.${C}`).selectAll("path");u=d.nodes()[0].getAttribute("opacity"),d.transition().duration(200).style("opacity",Number(u)+.3)}},z=(q,C)=>{var N,i;_=setTimeout(()=>{$l.set(null)},300),(i=(N=t[C])==null?void 0:N[0])!=null&&i.hoverable&&lt(`g.${C}`).selectAll("path").transition().duration(200).style("opacity",u)},O=async()=>{await el();const q=lt(a),C=lt(c);[{dataMap:t,svg:q},{dataMap:p,svg:C}].forEach(({dataMap:N,svg:i})=>{i.selectAll("g.path-group").data(Object.keys(N)).join("g").attr("class",m=>`path-group ${m}`).on("mouseenter",V).on("mouseleave",z).selectAll("path.sankey-path").data(m=>N[m].map(y=>{const E=ol(y.from).nodes(),A=ol(y.to).nodes();return E.map((v,I)=>{const b=v.getBoundingClientRect(),D=A[I].getBoundingClientRect(),M=y.curve||Fr,G=(y.pathGenerator||R)(b,D,M),K=A.length>1&&I===E.length-1;let de=y.gradientId;return K&&!y.unique&&document.getElementById(y.gradientId+"-last")&&(de=y.gradientId+"-last"),{id:y.id,isLast:I===E.length-1,path:G,fill:y.type==="stroke"?"none":y.gradientId?`url(#${de})`:y.fill,opacity:y.opacity,stroke:y.type==="stroke"?y.gradientId?`url(#${y.gradientId})`:y.fill:"none"}})}).flat()).join("path").attr("class",m=>`sankey-path ${m.id||""} ${m.isLast?"last":""}`).attr("fill",m=>m.fill).attr("stroke",m=>m.stroke).attr("stroke-width",2).attr("opacity",m=>m.opacity).attr("d",m=>m.path)})},R=(q,C,N)=>{const i=window.scrollY,d=window.scrollX;return`
        M ${q.right+d},${q.top+i}
        C ${q.right+d+N},${q.top+i} ${C.left+d-N},${C.top+i} ${C.left+d},${C.top+i}
        L ${C.left+d},${C.bottom+i}
        C ${C.left+d-N},${C.bottom+i} ${q.right+d+N},${q.bottom+i} ${q.right+d},${q.bottom+i}
        Z
    `};$t(()=>(h(),f=new ResizeObserver(C=>{O(),S()}),(document==null?void 0:document.querySelectorAll(".resize-watch")).forEach(C=>f.observe(C)),()=>{f.disconnect()}));const S=()=>{const q=lt(a),C=ol(".residual-start path.head").nodes(),N=ol(".residual-end path.head").nodes(),i=C.map((d,m)=>{const w=d.getBoundingClientRect(),y=N[m].getBoundingClientRect(),E=w.right,A=w.top,v=y.left,I=y.top;return{x1:E,y1:A,x2:v,y2:I,id:d.id}});q.selectAll("line.residual-connector").data(i).join("line").attr("class",d=>`residual-connector ${d.id}`).attr("x1",d=>d.x1).attr("y1",d=>d.y1).attr("x2",d=>d.x2).attr("y2",d=>d.y2).attr("stroke",s.colors.gray[400]).attr("stroke-width",1).attr("stroke-dasharray","8,4").style("opacity",0)};function j(q){tt[q?"unshift":"push"](()=>{c=q,l(0,c)})}function J(q){tt[q?"unshift":"push"](()=>{a=q,l(1,a)})}return n.$$.update=()=>{n.$$.dirty&8&&(t={embedding:[{hoverable:!0,from:".embedding .vector-column .column.vectors .vector",to:".attention .vector",gradientId:"gray-blue",opacity:nr,pathGenerator:(q,C,N)=>{const i=window.scrollY,d=window.scrollX,m=30;return`
					M ${q.right+d},${q.top+i}
					L ${q.right+m+d},${q.top+i}
					C ${q.right+m+d+N},${q.top+i} ${C.left+d-N},${C.top+i} ${C.left+d},${C.top+i}
					L ${C.left+d},${C.bottom+i}
					C ${C.left+d-N},${C.bottom+i} ${q.right+m+d+N},${q.bottom+i} ${q.right+m+d},${q.bottom+i}
					L ${q.right+d},${q.bottom+i}
					Z
				`}}],attention:[{from:".attention .query .sub-vector.head1",to:".head-block .query .vector",gradientId:"blue-blue",opacity:Et},{from:".attention .key .sub-vector.head1",to:".head-block .key .vector",gradientId:"red-red",opacity:Et},{from:".attention .value .sub-vector.head1",to:".head-block .value .vector",gradientId:"green-green",opacity:Et},{from:".attention .head-out .vector",to:".mlp .initial .head1",gradientId:"purple-purple",opacity:Et},{from:".head-block .key .vector",to:".attention-initial .main g.g-row",id:"key-to-attention",type:"stroke",gradientId:"red-purple",opacity:Et,unique:!0,curve:30,pathGenerator:(q,C,N)=>{const i=window.scrollY,d=window.scrollX,m=q.top+i+q.height/2,w=C.top+i+C.height/2,y=q.right+d+N,E=C.left+d-N;return`
			    M ${q.right+d},${m}
			    C ${y},${m} ${E},${w} ${C.left+d},${w}
					L ${C.right+d},${w}
			`}},{from:".head-block .query .vector",to:`.attention-matrix.attention-initial .main g.g-row-${r.length-1} circle`,gradientId:"blue-purple",id:"query-to-attention",unique:!0,type:"stroke",opacity:Et,curve:20,pathGenerator:(q,C,N)=>{const i=window.scrollY,d=window.scrollX,m=q.top+i+q.height/2,w=C.left+d+C.width/2;return`
			    M ${q.right+d},${m}
			    L ${w-N},${m}
			    A ${N},${N} 0 0 1 ${w},${m+N}
			    L ${w},${C.bottom+i}
			`}},{from:".attention-matrix.attention-out .main svg",to:".attention .head-out",gradientId:"transparent-purple2",id:"to-attention-out",unique:!0,opacity:cl,curve:20,pathGenerator:(q,C,N)=>{const i=window.scrollY,d=window.scrollX;return`
			    M ${q.right+d},${q.top+i}
			    C ${q.right+d+N},${q.top+i} ${C.left+d-N},${C.top+i} ${C.left+d},${C.top+i}
			    L ${C.left+d},${C.bottom+i}
			    C ${C.left+d-N},${C.bottom+i} ${q.right+d+N},${q.bottom+i} ${q.right+d},${q.bottom+i}
			    Z
			`}},{from:".head-block .value",to:".attention .head-out",gradientId:"green-purple",id:"to-attention-out",unique:!0,opacity:cl,curve:60,pathGenerator:(q,C,N)=>{const i=window.scrollY,d=window.scrollX;return`
        M ${q.right+d},${q.top+i} 
        C ${C.left-N},${q.top+i} ${C.left+d-N},${q.top+i} ${C.left+d},${C.top+i}
        L ${C.left+d},${C.bottom+i}
        C ${C.left+d-N},${q.bottom+i} ${C.left-N},${q.bottom+i} ${q.right+d},${q.bottom+i}
        Z
    `}}],mlp:[{from:".mlp .column.initial .vector",to:".mlp .projections .vector",gradientId:"purple-indigo",curve:50,opacity:kl,pathGenerator:(q,C,N)=>{const i=window.scrollY,d=window.scrollX,m=49;return`
					M ${q.right+d},${q.top+i}
					L ${q.right+m+d},${q.top+i}
					C ${q.right+m+d+N},${q.top+i} ${C.left+d-N},${C.top+i} ${C.left+d},${C.top+i}
					L ${C.left+d},${C.bottom+i}
					C ${C.left+d-N},${C.bottom+i} ${q.right+m+d+N},${q.bottom+i} ${q.right+m+d},${q.bottom+i}
					L ${q.right+d},${q.bottom+i}
					Z
				`}},{from:".mlp .projections .vector",to:".mlp .column.out .vector",gradientId:"indigo-blue",curve:50,opacity:kl,pathGenerator:(q,C,N)=>{const i=window.scrollY,d=window.scrollX,m=20;return`
					M ${q.right+d},${q.top+i}
					C ${q.right+d+N},${q.top+i} ${C.left-m+d-N},${C.top+i} ${C.left-m+d},${C.top+i}
					L ${C.left+d},${C.top+i}
					L ${C.left+d},${C.bottom+i}
					L ${C.left-m+d},${C.bottom+i}
					C ${C.left-m+d-N},${C.bottom+i} ${q.right+d+N},${q.bottom+i} ${q.right+d},${q.bottom+i}
					L ${q.right+d},${q.bottom+i}
					Z
				`}}],"transformer-blocks":[{from:".mlp .out .vector",to:".transformer-blocks .column.final .vector",gradientId:"blue-white-blue",opacity:rr,pathGenerator:(q,C,N)=>{const i=window.scrollY,d=window.scrollX;return`
        M ${q.right+d},${q.top+i}
        C ${q.right+d+N},${q.top+i} ${C.left+d-N},${C.top+i} ${C.left+d},${C.top+i}
        L ${C.left+d},${C.bottom+i}
        C ${C.left+d-N},${C.bottom+i} ${q.right+d+N},${q.bottom+i} ${q.right+d},${q.bottom+i}
        Z
    `}}],"linear-softmax":[{from:".transformer-blocks .final .vector.last-token ",to:".softmax .content .vector",gradientId:"blue-gray",opacity:or,unique:!0}]}),n.$$.dirty&8&&typeof window<"u"&&r&&(O(),S())},[c,a,o,r,j,J]}class xr extends Ge{constructor(e){super(),Re(this,e,Ur,Rr,je,{})}}function Al(n,e,l){const t=n.slice();return t[6]=e[l],t[8]=l,t}function Wr(n){let e,l,t,r,o;return{c(){e=B("div"),l=B("div"),r=U(),this.h()},l(s){e=T(s,"DIV",{class:!0,style:!0});var c=P(e);l=T(c,"DIV",{class:!0,style:!0}),P(l).forEach($),r=x(c),c.forEach($),this.h()},h(){g(l,"class","card svelte-1k8s99h"),g(l,"style",t=`width: ${n[1].width}px; height: ${n[1].height}px;`),g(e,"class","rest absolute"),g(e,"style",o=`transform:translate(${n[8]*yt.x}px,${n[8]*yt.y}px) scale(${1-yt.scale*n[8]}); 
      z-index: ${n[2].attention_head_num-n[8]};opacity:${Math.max(.1,1-n[8]*Ll)};`),ie(e,"first",n[8]===1)},m(s,c){W(s,e,c),k(e,l),k(e,r)},p(s,c){c&2&&t!==(t=`width: ${s[1].width}px; height: ${s[1].height}px;`)&&g(l,"style",t),c&4&&o!==(o=`transform:translate(${s[8]*yt.x}px,${s[8]*yt.y}px) scale(${1-yt.scale*s[8]}); 
      z-index: ${s[2].attention_head_num-s[8]};opacity:${Math.max(.1,1-s[8]*Ll)};`)&&g(e,"style",o)},i:Te,o:Te,d(s){s&&$(e)}}}function Xr(n){let e,l,t;const r=n[4].default,o=Un(r,n,n[3],null);return{c(){e=B("div"),o&&o.c(),l=U(),this.h()},l(s){e=T(s,"DIV",{class:!0});var c=P(e);o&&o.l(c),l=x(c),c.forEach($),this.h()},h(){g(e,"class",pe("first-head-content")+" svelte-1k8s99h")},m(s,c){W(s,e,c),o&&o.m(e,null),k(e,l),n[5](e),t=!0},p(s,c){o&&o.p&&(!t||c&8)&&xn(o,r,s,s[3],t?Xn(r,s[3],c,null):Wn(s[3]),null)},i(s){t||(H(o,s),t=!0)},o(s){F(o,s),t=!1},d(s){s&&$(e),o&&o.d(s),n[5](null)}}}function Nl(n){let e,l,t,r;const o=[Xr,Wr],s=[];function c(a,f){return a[8]===0?0:1}return e=c(n),l=s[e]=o[e](n),{c(){l.c(),t=vt()},l(a){l.l(a),t=vt()},m(a,f){s[e].m(a,f),W(a,t,f),r=!0},p(a,f){l.p(a,f)},i(a){r||(H(l),r=!0)},o(a){F(l),r=!1},d(a){a&&$(t),s[e].d(a)}}}function Kr(n){let e,l,t=be(Array(n[2].attention_head_num+1).fill(0)),r=[];for(let s=0;s<t.length;s+=1)r[s]=Nl(Al(n,t,s));const o=s=>F(r[s],1,1,()=>{r[s]=null});return{c(){e=B("div");for(let s=0;s<r.length;s+=1)r[s].c();this.h()},l(s){e=T(s,"DIV",{class:!0});var c=P(e);for(let a=0;a<r.length;a+=1)r[a].l(c);c.forEach($),this.h()},h(){g(e,"class","multi-head flex w-full svelte-1k8s99h")},m(s,c){W(s,e,c);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(e,null);l=!0},p(s,[c]){if(c&15){t=be(Array(s[2].attention_head_num+1).fill(0));let a;for(a=0;a<t.length;a+=1){const f=Al(s,t,a);r[a]?(r[a].p(f,c),H(r[a],1)):(r[a]=Nl(f),r[a].c(),H(r[a],1),r[a].m(e,null))}for(Ve(),a=t.length;a<r.length;a+=1)o(a);Ae()}},i(s){if(!l){for(let c=0;c<t.length;c+=1)H(r[c]);l=!0}},o(s){r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)F(r[c]);l=!1},d(s){s&&$(e),Be(r,s)}}}let Ll=.1;function Zr(n,e,l){let t;Ee(n,Ft,f=>l(2,t=f));let{$$slots:r={},$$scope:o}=e,s,c={width:0,height:0};$t(()=>{const f=new ResizeObserver(p=>{for(let h of p){const{width:u,height:_}=h.contentRect;l(1,c={width:u,height:_})}});return f.observe(s),()=>{f.unobserve(s)}});function a(f){tt[f?"unshift":"push"](()=>{s=f,l(0,s)})}return n.$$set=f=>{"$$scope"in f&&l(3,o=f.$$scope)},[s,c,t,o,r,a]}class Qr extends Ge{constructor(e){super(),Re(this,e,Zr,Kr,je,{})}}const Yr=(n,e)=>{const l=e.filter(r=>r!==1),t=(r,o)=>{if(o.length===1)return r.splice(0,o[0]);const s=o[0],c=o.slice(1);return Array.from({length:s},()=>t(r,c))};return t(n,l)},wt=n=>n.map((e,l)=>{let t=new Array(e.length).fill(-1/0);for(let r=0;r<=l&&r<e.length;r++)t[r]=e[r];return t});function Jr(n){let e,l;return e=new qt({props:{math:"Q \\cdot K^T"}}),{c(){le(e.$$.fragment)},l(t){ne(e.$$.fragment,t)},m(t,r){re(e,t,r),l=!0},p:Te,i(t){l||(H(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){oe(e,t)}}}function eo(n){let e,l;return e=new qt({props:{math:"\\frac{QK^T}{\\sqrt{d_k}} + M"}}),{c(){le(e.$$.fragment)},l(t){ne(e.$$.fragment,t)},m(t,r){re(e,t,r),l=!0},p:Te,i(t){l||(H(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){oe(e,t)}}}function to(n){let e,l;return e=new qt({props:{math:"\\text{Dropout}(\\text{softmax}(\\frac{QK^T}{\\sqrt{d_k}} + M))"}}),{c(){le(e.$$.fragment)},l(t){ne(e.$$.fragment,t)},m(t,r){re(e,t,r),l=!0},p:Te,i(t){l||(H(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){oe(e,t)}}}function lo(n){var Kt,at;let e,l,t,r,o,s,c="Dot product",a,f,p,h,u,_=((Kt=n[1][0])==null?void 0:Kt.toFixed(1))+"",V,z,O,R,S,j=((at=n[1][1])==null?void 0:at.toFixed(1))+"",J,q,C,N,i,d,m,w,y,E,A,v,I,b="Scaling · Mask",D,M,L,G,K='<span class="val svelte-1v8zpbw">-3.0</span> <div class="bar svelte-1v8zpbw"></div> <span class="val svelte-1v8zpbw">3.0</span>',de,Q,fe,ve,ae,He,ee,te,X,$e,Se,Z="Softmax · Dropout",se,Y,De,Ue,Ne='<span class="val svelte-1v8zpbw">-1.0</span> <div class="bar svelte-1v8zpbw"></div> <span class="val svelte-1v8zpbw">1.0</span>',nt,mt,Me,Ze,gt,Le,xt="Attention",St,Wt,Vt,At,Qe,Pt,Xt;return r=new Ht({props:{className:"main",data:n[2],showSize:!1,cellHeight:n[10],cellWidth:n[10],rowGap:3,colGap:3,shape:"circle",colorScale:n[9]}}),f=new Oe({props:{class:"popover tooltip",$$slots:{default:[Jr]},$$scope:{ctx:n}}}),y=new Ht({props:{className:"prev absolute top-0 left-0 pointer-events-none",data:n[2],showSize:!1,cellHeight:n[10],cellWidth:n[10],rowGap:3,colGap:3,shape:"circle",colorScale:n[9]}}),A=new Ht({props:{className:"main opacity-0",data:wt(n[12]),showSize:!1,cellHeight:n[10],cellWidth:n[10],rowGap:3,colGap:3,shape:"circle",colorScale:n[14]}}),M=new Oe({props:{class:"popover tooltip",$$slots:{default:[eo]},$$scope:{ctx:n}}}),ee=new Ht({props:{className:"prev absolute top-0 left-0  pointer-events-none",data:wt(n[12]),showSize:!1,cellHeight:n[10],cellWidth:n[10],rowGap:3,colGap:3,shape:"circle",colorScale:n[14]}}),X=new Ht({props:{className:"main opacity-0",data:wt(n[11]),showSize:!1,cellHeight:n[10],cellWidth:n[10],rowGap:3,colGap:3,shape:"circle",colorScale:n[15]}}),Y=new Oe({props:{class:"popover tooltip",$$slots:{default:[to]},$$scope:{ctx:n}}}),Ze=new Ht({props:{className:"main",data:wt(n[11]),showSize:!1,cellHeight:n[10],cellWidth:n[10],rowGap:3,colGap:3,shape:"circle",colorScale:n[15]}}),{c(){e=B("div"),l=B("div"),t=B("div"),le(r.$$.fragment),o=U(),s=B("div"),s.textContent=c,a=U(),le(f.$$.fragment),p=U(),h=B("div"),u=B("span"),V=me(_),z=U(),O=B("div"),R=U(),S=B("span"),J=me(j),C=U(),N=B("div"),i=Ce("svg"),d=Ce("path"),m=U(),w=B("div"),le(y.$$.fragment),E=U(),le(A.$$.fragment),v=U(),I=B("div"),I.textContent=b,D=U(),le(M.$$.fragment),L=U(),G=B("div"),G.innerHTML=K,de=U(),Q=B("div"),fe=Ce("svg"),ve=Ce("path"),ae=U(),He=B("div"),le(ee.$$.fragment),te=U(),le(X.$$.fragment),$e=U(),Se=B("div"),Se.textContent=Z,se=U(),le(Y.$$.fragment),De=U(),Ue=B("div"),Ue.innerHTML=Ne,mt=U(),Me=B("div"),le(Ze.$$.fragment),gt=U(),Le=B("div"),Le.textContent=xt,this.h()},l(ue){e=T(ue,"DIV",{class:!0,style:!0});var ye=P(e);l=T(ye,"DIV",{role:!0,class:!0});var Ye=P(l);t=T(Ye,"DIV",{class:!0});var ct=P(t);ne(r.$$.fragment,ct),o=x(ct),s=T(ct,"DIV",{class:!0,"data-svelte-h":!0}),Ie(s)!=="svelte-8hsrtb"&&(s.textContent=c),a=x(ct),ne(f.$$.fragment,ct),p=x(ct),h=T(ct,"DIV",{class:!0});var rt=P(h);u=T(rt,"SPAN",{class:!0});var Nt=P(u);V=ge(Nt,_),Nt.forEach($),z=x(rt),O=T(rt,"DIV",{class:!0}),P(O).forEach($),R=x(rt),S=T(rt,"SPAN",{class:!0});var Zt=P(S);J=ge(Zt,j),Zt.forEach($),rt.forEach($),ct.forEach($),C=x(Ye),N=T(Ye,"DIV",{class:!0});var Xe=P(N);i=qe(Xe,"svg",{class:!0,"aria-hidden":!0,xmlns:!0,width:!0,height:!0,fill:!0,viewBox:!0});var Lt=P(i);d=qe(Lt,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),P(d).forEach($),Lt.forEach($),m=x(Xe),w=T(Xe,"DIV",{});var Mt=P(w);ne(y.$$.fragment,Mt),E=x(Mt),ne(A.$$.fragment,Mt),Mt.forEach($),v=x(Xe),I=T(Xe,"DIV",{class:!0,"data-svelte-h":!0}),Ie(I)!=="svelte-15vmxu9"&&(I.textContent=b),D=x(Xe),ne(M.$$.fragment,Xe),L=x(Xe),G=T(Xe,"DIV",{class:!0,"data-svelte-h":!0}),Ie(G)!=="svelte-bz6asq"&&(G.innerHTML=K),Xe.forEach($),de=x(Ye),Q=T(Ye,"DIV",{class:!0});var Ke=P(Q);fe=qe(Ke,"svg",{class:!0,"aria-hidden":!0,xmlns:!0,width:!0,height:!0,fill:!0,viewBox:!0});var Qt=P(fe);ve=qe(Qt,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),P(ve).forEach($),Qt.forEach($),ae=x(Ke),He=T(Ke,"DIV",{});var Bt=P(He);ne(ee.$$.fragment,Bt),te=x(Bt),ne(X.$$.fragment,Bt),Bt.forEach($),$e=x(Ke),Se=T(Ke,"DIV",{class:!0,"data-svelte-h":!0}),Ie(Se)!=="svelte-1fyrzav"&&(Se.textContent=Z),se=x(Ke),ne(Y.$$.fragment,Ke),De=x(Ke),Ue=T(Ke,"DIV",{class:!0,"data-svelte-h":!0}),Ie(Ue)!=="svelte-1lh8vbm"&&(Ue.innerHTML=Ne),Ke.forEach($),mt=x(Ye),Me=T(Ye,"DIV",{class:!0});var nl=P(Me);ne(Ze.$$.fragment,nl),gt=x(nl),Le=T(nl,"DIV",{class:!0,"data-svelte-h":!0}),Ie(Le)!=="svelte-10aghm9"&&(Le.textContent=xt),nl.forEach($),Ye.forEach($),ye.forEach($),this.h()},h(){g(s,"class","matrix-label svelte-1v8zpbw"),g(u,"class","val svelte-1v8zpbw"),g(O,"class","bar svelte-1v8zpbw"),g(S,"class","val svelte-1v8zpbw"),g(h,"class","color-scale svelte-1v8zpbw"),g(t,"class",q=pe(he("attention-matrix attention-qk flex flex-col items-center",{"attention-initial":n[0]}))+" svelte-1v8zpbw"),g(d,"stroke","currentColor"),g(d,"stroke-linecap","round"),g(d,"stroke-linejoin","round"),g(d,"stroke-width","2"),g(d,"d","M19 12H5m14 0-4 4m4-4-4-4"),g(i,"class","arrow svelte-1v8zpbw"),g(i,"aria-hidden","true"),g(i,"xmlns","http://www.w3.org/2000/svg"),g(i,"width","24"),g(i,"height","24"),g(i,"fill","none"),g(i,"viewBox","0 0 24 24"),g(I,"class","matrix-label svelte-1v8zpbw"),g(G,"class","color-scale svelte-1v8zpbw"),g(N,"class","attention-matrix attention-mask flex flex-col items-center svelte-1v8zpbw"),g(ve,"stroke","currentColor"),g(ve,"stroke-linecap","round"),g(ve,"stroke-linejoin","round"),g(ve,"stroke-width","2"),g(ve,"d","M19 12H5m14 0-4 4m4-4-4-4"),g(fe,"class","arrow svelte-1v8zpbw"),g(fe,"aria-hidden","true"),g(fe,"xmlns","http://www.w3.org/2000/svg"),g(fe,"width","24"),g(fe,"height","24"),g(fe,"fill","none"),g(fe,"viewBox","0 0 24 24"),g(Se,"class","matrix-label svelte-1v8zpbw"),g(Ue,"class","color-scale svelte-1v8zpbw"),g(Q,"class",nt=pe(he("attention-matrix attention-softmax flex flex-col items-center",{"attention-out":n[0]}))+" svelte-1v8zpbw"),g(Le,"class","matrix-label svelte-1v8zpbw"),g(Me,"class",St=pe(he("attention-matrix attention-result flex flex-col items-center",{"attention-initial":!n[0],"attention-out":!n[0]}))+" svelte-1v8zpbw"),Gt(()=>n[24].call(Me)),g(l,"role","none"),g(l,"class",Vt=pe(he("attention-matrix-container relative flex",{active:n[0]}))+" svelte-1v8zpbw"),g(e,"class","flex items-center gap-8 px-5"),g(e,"style",At=`--attention-matrix-width: ${n[7]}px;`)},m(ue,ye){W(ue,e,ye),k(e,l),k(l,t),re(r,t,null),k(t,o),k(t,s),k(t,a),re(f,t,null),k(t,p),k(t,h),k(h,u),k(u,V),k(h,z),k(h,O),k(h,R),k(h,S),k(S,J),n[20](t),k(l,C),k(l,N),k(N,i),k(i,d),k(N,m),k(N,w),re(y,w,null),k(w,E),re(A,w,null),k(N,v),k(N,I),k(N,D),re(M,N,null),k(N,L),k(N,G),n[21](N),k(l,de),k(l,Q),k(Q,fe),k(fe,ve),k(Q,ae),k(Q,He),re(ee,He,null),k(He,te),re(X,He,null),k(Q,$e),k(Q,Se),k(Q,se),re(Y,Q,null),k(Q,De),k(Q,Ue),n[22](Q),k(l,mt),k(l,Me),re(Ze,Me,null),k(Me,gt),k(Me,Le),n[23](Me),Wt=Kn(Me,n[24].bind(Me)),n[25](l),Qe=!0,Pt||(Xt=[ke(l,"click",n[13]),ke(l,"keydown",n[13])],Pt=!0)},p(ue,ye){var Qt,Bt;const Ye={};ye[0]&4&&(Ye.data=ue[2]),ye[0]&1024&&(Ye.cellHeight=ue[10]),ye[0]&1024&&(Ye.cellWidth=ue[10]),ye[0]&512&&(Ye.colorScale=ue[9]),r.$set(Ye);const ct={};ye[1]&4&&(ct.$$scope={dirty:ye,ctx:ue}),f.$set(ct),(!Qe||ye[0]&2)&&_!==(_=((Qt=ue[1][0])==null?void 0:Qt.toFixed(1))+"")&&Pe(V,_),(!Qe||ye[0]&2)&&j!==(j=((Bt=ue[1][1])==null?void 0:Bt.toFixed(1))+"")&&Pe(J,j),(!Qe||ye[0]&1&&q!==(q=pe(he("attention-matrix attention-qk flex flex-col items-center",{"attention-initial":ue[0]}))+" svelte-1v8zpbw"))&&g(t,"class",q);const rt={};ye[0]&4&&(rt.data=ue[2]),ye[0]&1024&&(rt.cellHeight=ue[10]),ye[0]&1024&&(rt.cellWidth=ue[10]),ye[0]&512&&(rt.colorScale=ue[9]),y.$set(rt);const Nt={};ye[0]&4096&&(Nt.data=wt(ue[12])),ye[0]&1024&&(Nt.cellHeight=ue[10]),ye[0]&1024&&(Nt.cellWidth=ue[10]),A.$set(Nt);const Zt={};ye[1]&4&&(Zt.$$scope={dirty:ye,ctx:ue}),M.$set(Zt);const Xe={};ye[0]&4096&&(Xe.data=wt(ue[12])),ye[0]&1024&&(Xe.cellHeight=ue[10]),ye[0]&1024&&(Xe.cellWidth=ue[10]),ee.$set(Xe);const Lt={};ye[0]&2048&&(Lt.data=wt(ue[11])),ye[0]&1024&&(Lt.cellHeight=ue[10]),ye[0]&1024&&(Lt.cellWidth=ue[10]),X.$set(Lt);const Mt={};ye[1]&4&&(Mt.$$scope={dirty:ye,ctx:ue}),Y.$set(Mt),(!Qe||ye[0]&1&&nt!==(nt=pe(he("attention-matrix attention-softmax flex flex-col items-center",{"attention-out":ue[0]}))+" svelte-1v8zpbw"))&&g(Q,"class",nt);const Ke={};ye[0]&2048&&(Ke.data=wt(ue[11])),ye[0]&1024&&(Ke.cellHeight=ue[10]),ye[0]&1024&&(Ke.cellWidth=ue[10]),Ze.$set(Ke),(!Qe||ye[0]&1&&St!==(St=pe(he("attention-matrix attention-result flex flex-col items-center",{"attention-initial":!ue[0],"attention-out":!ue[0]}))+" svelte-1v8zpbw"))&&g(Me,"class",St),(!Qe||ye[0]&1&&Vt!==(Vt=pe(he("attention-matrix-container relative flex",{active:ue[0]}))+" svelte-1v8zpbw"))&&g(l,"class",Vt),(!Qe||ye[0]&128&&At!==(At=`--attention-matrix-width: ${ue[7]}px;`))&&g(e,"style",At)},i(ue){Qe||(H(r.$$.fragment,ue),H(f.$$.fragment,ue),H(y.$$.fragment,ue),H(A.$$.fragment,ue),H(M.$$.fragment,ue),H(ee.$$.fragment,ue),H(X.$$.fragment,ue),H(Y.$$.fragment,ue),H(Ze.$$.fragment,ue),Qe=!0)},o(ue){F(r.$$.fragment,ue),F(f.$$.fragment,ue),F(y.$$.fragment,ue),F(A.$$.fragment,ue),F(M.$$.fragment,ue),F(ee.$$.fragment,ue),F(X.$$.fragment,ue),F(Y.$$.fragment,ue),F(Ze.$$.fragment,ue),Qe=!1},d(ue){ue&&$(e),oe(r),oe(f),n[20](null),oe(y),oe(A),oe(M),n[21](null),oe(ee),oe(X),oe(Y),n[22](null),oe(Ze),n[23](null),Wt(),n[25](null),Pt=!1,xe(Xt)}}}let no=16,ro=20,oo=10;function so(n,e,l){let t,r,o,s,c,a,f,p,h,u;Ee(n,bt,L=>l(17,p=L)),Ee(n,We,L=>l(18,h=L)),Ee(n,Ut,L=>l(19,u=L));const{theme:_}=Dt(Ct);let V,z,O,R,S=0,j=!1;const J=fl("block-id"),q=()=>{j||(We.set({id:J}),m())};let C;function N(L){j&&!C.contains(L.target)&&We.set({id:null})}$t(()=>(document.body.addEventListener("click",N),()=>{document.body.removeEventListener("click",N)}));let i=dt.timeline(),d=dt.timeline();const m=()=>{l(0,j=!0),d.progress(1);const L=document.querySelectorAll("div.sankey g.attention path.key-to-attention"),G=document.querySelectorAll("div.sankey g.attention path.query-to-attention"),K=document.querySelectorAll("div.sankey g.attention path.to-attention-out");[...L,...G].forEach(fe=>{const ve=fe.getTotalLength();fe.style.strokeDasharray=ve,fe.style.strokeDashoffset=ve});const de=1.2,Q=Number((de/p.length).toFixed(2));i.set([z.querySelector(".prev"),O.querySelector(".prev")],{opacity:1}).set([z.querySelector(".main"),O.querySelector(".main")],{opacity:0}),i.set(K,{opacity:0}),i.to(R,{opacity:0,display:"none",duration:.2}),i.set(V,{width:"auto",display:"flex",opacity:0}).to(V,{opacity:1,duration:.5}).to(L,{strokeDashoffset:0,stagger:Q,duration:de,ease:"power2.out"}).to(G,{strokeDashoffset:0,stagger:Q,duration:de,ease:"power2.out"},"<").from(V.querySelectorAll("svg circle"),{scale:0,transformOrigin:"50% 50%",opacity:0,delay:de/p.length,stagger:Number((de/Math.pow(p.length,2)).toFixed(2)),ease:"power2.out",duration:de},"<"),i.set(z,{width:0,x:S*-1,opacity:0}).to(z,{opacity:1,display:"flex",width:S,x:0,duration:.5}).to(z.querySelector(".prev"),{opacity:0,duration:1}).to(z.querySelector(".main"),{opacity:1,duration:1},"<"),i.set(O,{width:0,x:S*-1,opacity:0}).to(O,{opacity:1,display:"flex",width:S,x:0,duration:.4}).to(O.querySelector(".prev"),{opacity:0,duration:1}).to(O.querySelector(".main"),{opacity:1,duration:1},"<"),i.to(K,{opacity:cl})},w=()=>{l(0,j=!1),i.progress(1),d.to([V,z,O],{opacity:0,display:"none",width:0,duration:.5}),d.to(R,{opacity:1,display:"flex",duration:.5},0)},y=(L,G)=>wl().domain([-3,3]).range(["white",_.colors.purple[700]])(L),E=(L,G)=>dl("white",_.colors.purple[700])(L);function A(L){tt[L?"unshift":"push"](()=>{V=L,l(3,V)})}function v(L){tt[L?"unshift":"push"](()=>{z=L,l(4,z)})}function I(L){tt[L?"unshift":"push"](()=>{O=L,l(5,O)})}function b(L){tt[L?"unshift":"push"](()=>{R=L,l(6,R)})}function D(){S=this.offsetWidth,l(7,S)}function M(L){tt[L?"unshift":"push"](()=>{C=L,l(8,C)})}return n.$$.update=()=>{var L,G,K,de,Q,fe;n.$$.dirty[0]&131072&&l(16,t=Array(p.length).fill(0).map(ve=>Array(p.length).fill(-1/0))),n.$$.dirty[0]&589824&&l(2,r=((G=(L=u==null?void 0:u.outputs)==null?void 0:L.block_0_attn_head_0_attn)==null?void 0:G.data)||t),n.$$.dirty[0]&589824&&l(12,o=((de=(K=u==null?void 0:u.outputs)==null?void 0:K.block_0_attn_head_0_attn_masked)==null?void 0:de.data)||t),n.$$.dirty[0]&589824&&l(11,s=((fe=(Q=u==null?void 0:u.outputs)==null?void 0:Q.block_0_attn_head_0_attn_dropout)==null?void 0:fe.data)||t),n.$$.dirty[0]&131072&&l(10,c=Math.min(ro,Math.max(1/p.length*no*6,oo))),n.$$.dirty[0]&262145&&h.id!==J&&j&&(l(0,j=!1),w()),n.$$.dirty[0]&4&&l(1,a=zr(r.flat())),n.$$.dirty[0]&2&&l(9,f=(ve,ae)=>wl().domain(a).range(["white",_.colors.purple[700]])(ve))},[j,a,r,V,z,O,R,S,C,f,c,s,o,q,y,E,t,p,h,u,A,v,I,b,D,M]}class io extends Ge{constructor(e){super(),Re(this,e,so,lo,je,{},null,[-1,-1])}}function ao(n){let e;return{c(){e=B("canvas"),this.h()},l(l){e=T(l,"CANVAS",{class:!0}),P(e).forEach($),this.h()},h(){g(e,"class","svelte-ex5m8"),ie(e,"active",n[0])},m(l,t){W(l,e,t),n[4](e)},p(l,[t]){t&1&&ie(e,"active",l[0])},i:Te,o:Te,d(l){l&&$(e),n[4](null)}}}let co=100;const pl=1;function fo(n,e,l){const{theme:t}=Dt(Ct);let{active:r=!1}=e,{data:o=new Array(co).fill(0).map(u=>Math.random())}=e,{colorScale:s=void 0}=e,c;const a=typeof s=="string"?s:"gray",f=typeof s=="function"?s:dl(t.colors[a][100],t.colors[a][400]);function p(){const u=c.getContext("2d");if(!u)return;const _=c.parentElement.clientWidth,V=c.parentElement.clientHeight;u.clearRect(0,0,_,V);let z=4;l(1,c.width=_*z,c),l(1,c.height=V*z,c),l(1,c.style.width=`${_}px`,c),l(1,c.style.height=`${V}px`,c);for(let O=0;O<V/pl;O++){const R=o[O];u.fillStyle=f(R),u.fillRect(0,O*pl*z,_*z,pl*z)}}$t(()=>{const u=al.subscribe(p);return()=>{u()}});function h(u){tt[u?"unshift":"push"](()=>{c=u,l(1,c)})}return n.$$set=u=>{"active"in u&&l(0,r=u.active),"data"in u&&l(2,o=u.data),"colorScale"in u&&l(3,s=u.colorScale)},n.$$.update=()=>{n.$$.dirty&6&&o&&c&&p()},[r,c,o,s,h]}class pt extends Ge{constructor(e){super(),Re(this,e,fo,ao,je,{active:0,data:2,colorScale:3})}}function Ml(n,e,l){const t=n.slice();return t[14]=e[l],t[16]=l,t}function Bl(n,e,l){const t=n.slice();return t[14]=e[l],t[16]=l,t}function Tl(n,e,l){const t=n.slice();return t[14]=e[l],t[16]=l,t}function Pl(n,e,l){const t=n.slice();return t[14]=e[l],t[16]=l,t}function zl(n,e,l){const t=n.slice();return t[14]=e[l],t[16]=l,t}function Hl(n){let e,l="Q";return{c(){e=B("span"),e.textContent=l},l(t){e=T(t,"SPAN",{"data-svelte-h":!0}),Ie(e)!=="svelte-10ub4hf"&&(e.textContent=l)},m(t,r){W(t,e,r)},d(t){t&&$(e)}}}function Ol(n){let e,l="K";return{c(){e=B("span"),e.textContent=l},l(t){e=T(t,"SPAN",{"data-svelte-h":!0}),Ie(e)!=="svelte-1c09r6x"&&(e.textContent=l)},m(t,r){W(t,e,r)},d(t){t&&$(e)}}}function jl(n){let e,l="V";return{c(){e=B("span"),e.textContent=l},l(t){e=T(t,"SPAN",{"data-svelte-h":!0}),Ie(e)!=="svelte-j40kxg"&&(e.textContent=l)},m(t,r){W(t,e,r)},d(t){t&&$(e)}}}function uo(n){let e,l=n[5].dimension*3+"",t,r;return{c(){e=me("vector("),t=me(l),r=me(")")},l(o){e=ge(o,"vector("),t=ge(o,l),r=ge(o,")")},m(o,s){W(o,e,s),W(o,t,s),W(o,r,s)},p(o,s){s&32&&l!==(l=o[5].dimension*3+"")&&Pe(t,l)},d(o){o&&($(e),$(t),$(r))}}}function Gl(n){let e,l,t,r,o,s,c,a,f,p,h,u,_,V,z,O,R,S,j,J,q,C,N,i,d,m;t=new pt({props:{colorScale:"blue",active:n[2]===n[16]}});let w=n[2]!==n[16]&&Hl();p=new pt({props:{colorScale:"red",active:n[2]===n[16]}});let y=n[2]!==n[16]&&Ol();R=new pt({props:{colorScale:"green",active:n[2]===n[16]}});let E=n[2]!==n[16]&&jl();function A(){return n[11](n[16])}return N=new Oe({props:{placement:"right",class:"popover",$$slots:{default:[uo]},$$scope:{ctx:n}}}),{c(){e=B("div"),l=B("div"),le(t.$$.fragment),r=U(),o=B("div"),s=U(),c=B("div"),w&&w.c(),a=U(),f=B("div"),le(p.$$.fragment),h=U(),u=B("div"),_=U(),V=B("div"),y&&y.c(),z=U(),O=B("div"),le(R.$$.fragment),S=U(),j=B("div"),J=U(),q=B("div"),E&&E.c(),C=U(),le(N.$$.fragment),this.h()},l(v){e=T(v,"DIV",{class:!0,role:!0});var I=P(e);l=T(I,"DIV",{class:!0});var b=P(l);ne(t.$$.fragment,b),r=x(b),o=T(b,"DIV",{class:!0}),P(o).forEach($),s=x(b),c=T(b,"DIV",{class:!0});var D=P(c);w&&w.l(D),D.forEach($),b.forEach($),a=x(I),f=T(I,"DIV",{class:!0});var M=P(f);ne(p.$$.fragment,M),h=x(M),u=T(M,"DIV",{class:!0}),P(u).forEach($),_=x(M),V=T(M,"DIV",{class:!0});var L=P(V);y&&y.l(L),L.forEach($),M.forEach($),z=x(I),O=T(I,"DIV",{class:!0});var G=P(O);ne(R.$$.fragment,G),S=x(G),j=T(G,"DIV",{class:!0}),P(j).forEach($),J=x(G),q=T(G,"DIV",{class:!0});var K=P(q);E&&E.l(K),K.forEach($),G.forEach($),I.forEach($),C=x(v),ne(N.$$.fragment,v),this.h()},h(){g(o,"class",pe(`sub-vector x1-12 head1 ${sr}`)+" svelte-1hsibq9"),g(c,"class","sub-vector head-rest grow svelte-1hsibq9"),g(l,"class",pe(`sub-vector query relative flex grow flex-col ${$o}`)+" svelte-1hsibq9"),g(u,"class",pe(`sub-vector x1-12 head1 ${ir}`)+" svelte-1hsibq9"),g(V,"class","sub-vector head-rest grow svelte-1hsibq9"),g(f,"class",pe(`sub-vector key relative flex grow flex-col ${bo}`)+" svelte-1hsibq9"),g(j,"class",pe(`sub-vector x1-12 head1 ${ar}`)+" svelte-1hsibq9"),g(q,"class","sub-vector head-rest grow svelte-1hsibq9"),g(O,"class",pe(`sub-vector value relative flex grow flex-col ${wo}`)+" svelte-1hsibq9"),g(e,"class","qkv-weighted vector x3 flex flex-col"),g(e,"role","group"),ie(e,"last",n[16]===n[6].length-1)},m(v,I){W(v,e,I),k(e,l),re(t,l,null),k(l,r),k(l,o),k(l,s),k(l,c),w&&w.m(c,null),k(e,a),k(e,f),re(p,f,null),k(f,h),k(f,u),k(f,_),k(f,V),y&&y.m(V,null),k(e,z),k(e,O),re(R,O,null),k(O,S),k(O,j),k(O,J),k(O,q),E&&E.m(q,null),W(v,C,I),re(N,v,I),i=!0,d||(m=[ke(e,"mouseenter",A),ke(e,"mouseleave",n[12])],d=!0)},p(v,I){n=v;const b={};I&4&&(b.active=n[2]===n[16]),t.$set(b),n[2]!==n[16]?w||(w=Hl(),w.c(),w.m(c,null)):w&&(w.d(1),w=null);const D={};I&4&&(D.active=n[2]===n[16]),p.$set(D),n[2]!==n[16]?y||(y=Ol(),y.c(),y.m(V,null)):y&&(y.d(1),y=null);const M={};I&4&&(M.active=n[2]===n[16]),R.$set(M),n[2]!==n[16]?E||(E=jl(),E.c(),E.m(q,null)):E&&(E.d(1),E=null),(!i||I&64)&&ie(e,"last",n[16]===n[6].length-1);const L={};I&2097184&&(L.$$scope={dirty:I,ctx:n}),N.$set(L)},i(v){i||(H(t.$$.fragment,v),H(p.$$.fragment,v),H(R.$$.fragment,v),H(N.$$.fragment,v),i=!0)},o(v){F(t.$$.fragment,v),F(p.$$.fragment,v),F(R.$$.fragment,v),F(N.$$.fragment,v),i=!1},d(v){v&&($(e),$(C)),oe(t),w&&w.d(),oe(p),y&&y.d(),oe(R),E&&E.d(),oe(N,v),d=!1,xe(m)}}}function ho(n){let e,l=n[5].dimension/n[5].attention_head_num+"",t,r;return{c(){e=me("Query, Head 1, vector("),t=me(l),r=me(")")},l(o){e=ge(o,"Query, Head 1, vector("),t=ge(o,l),r=ge(o,")")},m(o,s){W(o,e,s),W(o,t,s),W(o,r,s)},p(o,s){s&32&&l!==(l=o[5].dimension/o[5].attention_head_num+"")&&Pe(t,l)},d(o){o&&($(e),$(t),$(r))}}}function Rl(n){let e,l,t=n[14]+"",r,o,s,c,a,f;return a=new Oe({props:{placement:"right",class:"popover",$$slots:{default:[ho]},$$scope:{ctx:n}}}),{c(){e=B("div"),l=B("span"),r=me(t),o=U(),s=B("div"),c=U(),le(a.$$.fragment),this.h()},l(p){e=T(p,"DIV",{class:!0});var h=P(e);l=T(h,"SPAN",{class:!0});var u=P(l);r=ge(u,t),u.forEach($),o=x(h),s=T(h,"DIV",{class:!0}),P(s).forEach($),h.forEach($),c=x(p),ne(a.$$.fragment,p),this.h()},h(){g(l,"class","label float svelte-1hsibq9"),g(s,"class",pe(`vector x1-12  ${sr}`)+" svelte-1hsibq9"),g(e,"class","head1 cell x1-12 text-xs"),ie(e,"last",n[16]===n[6].length-1)},m(p,h){W(p,e,h),k(e,l),k(l,r),k(e,o),k(e,s),W(p,c,h),re(a,p,h),f=!0},p(p,h){(!f||h&64)&&t!==(t=p[14]+"")&&Pe(r,t),(!f||h&64)&&ie(e,"last",p[16]===p[6].length-1);const u={};h&2097184&&(u.$$scope={dirty:h,ctx:p}),a.$set(u)},i(p){f||(H(a.$$.fragment,p),f=!0)},o(p){F(a.$$.fragment,p),f=!1},d(p){p&&($(e),$(c)),oe(a,p)}}}function po(n){let e,l=n[5].dimension/n[5].attention_head_num+"",t,r;return{c(){e=me("Key, Head 1, vector("),t=me(l),r=me(")")},l(o){e=ge(o,"Key, Head 1, vector("),t=ge(o,l),r=ge(o,")")},m(o,s){W(o,e,s),W(o,t,s),W(o,r,s)},p(o,s){s&32&&l!==(l=o[5].dimension/o[5].attention_head_num+"")&&Pe(t,l)},d(o){o&&($(e),$(t),$(r))}}}function Fl(n){let e,l,t=n[14]+"",r,o,s,c,a,f,p;return f=new Oe({props:{placement:"right",class:"popover",$$slots:{default:[po]},$$scope:{ctx:n}}}),{c(){e=B("div"),l=B("span"),r=me(t),o=U(),s=B("div"),a=U(),le(f.$$.fragment),this.h()},l(h){e=T(h,"DIV",{class:!0});var u=P(e);l=T(u,"SPAN",{class:!0});var _=P(l);r=ge(_,t),_.forEach($),o=x(u),s=T(u,"DIV",{class:!0}),P(s).forEach($),u.forEach($),a=x(h),ne(f.$$.fragment,h),this.h()},h(){g(l,"class","label float svelte-1hsibq9"),g(s,"class",pe(`vector x1-12 ${ir}`)+" svelte-1hsibq9"),g(e,"class",c="head1 cell x1-12 text-xs class:last="+(n[16]===n[6].length-1)+" svelte-1hsibq9")},m(h,u){W(h,e,u),k(e,l),k(l,r),k(e,o),k(e,s),W(h,a,u),re(f,h,u),p=!0},p(h,u){(!p||u&64)&&t!==(t=h[14]+"")&&Pe(r,t),(!p||u&64&&c!==(c="head1 cell x1-12 text-xs class:last="+(h[16]===h[6].length-1)+" svelte-1hsibq9"))&&g(e,"class",c);const _={};u&2097184&&(_.$$scope={dirty:u,ctx:h}),f.$set(_)},i(h){p||(H(f.$$.fragment,h),p=!0)},o(h){F(f.$$.fragment,h),p=!1},d(h){h&&($(e),$(a)),oe(f,h)}}}function vo(n){let e,l=n[5].dimension/n[5].attention_head_num+"",t,r;return{c(){e=me("Value, Head 1, vector("),t=me(l),r=me(")")},l(o){e=ge(o,"Value, Head 1, vector("),t=ge(o,l),r=ge(o,")")},m(o,s){W(o,e,s),W(o,t,s),W(o,r,s)},p(o,s){s&32&&l!==(l=o[5].dimension/o[5].attention_head_num+"")&&Pe(t,l)},d(o){o&&($(e),$(t),$(r))}}}function Ul(n){let e,l,t=n[14]+"",r,o,s,c,a,f;return a=new Oe({props:{placement:"right",class:"popover",$$slots:{default:[vo]},$$scope:{ctx:n}}}),{c(){e=B("div"),l=B("span"),r=me(t),o=U(),s=B("div"),c=U(),le(a.$$.fragment),this.h()},l(p){e=T(p,"DIV",{class:!0});var h=P(e);l=T(h,"SPAN",{class:!0});var u=P(l);r=ge(u,t),u.forEach($),o=x(h),s=T(h,"DIV",{class:!0}),P(s).forEach($),h.forEach($),c=x(p),ne(a.$$.fragment,p),this.h()},h(){g(l,"class","label float svelte-1hsibq9"),g(s,"class",pe(`vector x1-12 ${ar}`)+" svelte-1hsibq9"),g(e,"class","head1 cell x1-12 text-xs"),ie(e,"last",n[16]===n[6].length-1)},m(p,h){W(p,e,h),k(e,l),k(l,r),k(e,o),k(e,s),W(p,c,h),re(a,p,h),f=!0},p(p,h){(!f||h&64)&&t!==(t=p[14]+"")&&Pe(r,t),(!f||h&64)&&ie(e,"last",p[16]===p[6].length-1);const u={};h&2097184&&(u.$$scope={dirty:h,ctx:p}),a.$set(u)},i(p){f||(H(a.$$.fragment,p),f=!0)},o(p){F(a.$$.fragment,p),f=!1},d(p){p&&($(e),$(c)),oe(a,p)}}}function mo(n){let e,l=n[5].dimension/n[5].attention_head_num+"",t,r;return{c(){e=me("Attention Out, Head 1, vector("),t=me(l),r=me(")")},l(o){e=ge(o,"Attention Out, Head 1, vector("),t=ge(o,l),r=ge(o,")")},m(o,s){W(o,e,s),W(o,t,s),W(o,r,s)},p(o,s){s&32&&l!==(l=o[5].dimension/o[5].attention_head_num+"")&&Pe(t,l)},d(o){o&&($(e),$(t),$(r))}}}function xl(n){let e,l,t,r,o;return r=new Oe({props:{placement:"right",class:"popover",$$slots:{default:[mo]},$$scope:{ctx:n}}}),{c(){e=B("div"),l=B("div"),t=U(),le(r.$$.fragment),this.h()},l(s){e=T(s,"DIV",{class:!0});var c=P(e);l=T(c,"DIV",{class:!0}),P(l).forEach($),c.forEach($),t=x(s),ne(r.$$.fragment,s),this.h()},h(){g(l,"class",pe(`vector x1-12 ${ko}`)+" svelte-1hsibq9"),g(e,"class","head1 cell x1-12"),ie(e,"last",n[16]===n[6].length-1)},m(s,c){W(s,e,c),k(e,l),W(s,t,c),re(r,s,c),o=!0},p(s,c){(!o||c&64)&&ie(e,"last",s[16]===s[6].length-1);const a={};c&2097184&&(a.$$scope={dirty:c,ctx:s}),r.$set(a)},i(s){o||(H(r.$$.fragment,s),o=!0)},o(s){F(r.$$.fragment,s),o=!1},d(s){s&&($(e),$(t)),oe(r,s)}}}function go(n){let e,l,t,r,o="Query",s,c,a,f,p="Key",h,u,_,V,z="Value",O,R,S,j,J,q,C,N,i="Out",d,m,w,y,E=n[5].attention_head_num+"",A,v,I,b=be(n[6]),D=[];for(let ee=0;ee<b.length;ee+=1)D[ee]=Rl(Pl(n,b,ee));const M=ee=>F(D[ee],1,1,()=>{D[ee]=null});let L=be(n[6]),G=[];for(let ee=0;ee<L.length;ee+=1)G[ee]=Fl(Tl(n,L,ee));const K=ee=>F(G[ee],1,1,()=>{G[ee]=null});let de=be(n[6]),Q=[];for(let ee=0;ee<de.length;ee+=1)Q[ee]=Ul(Bl(n,de,ee));const fe=ee=>F(Q[ee],1,1,()=>{Q[ee]=null});j=new io({});let ve=be(n[6]),ae=[];for(let ee=0;ee<ve.length;ee+=1)ae[ee]=xl(Ml(n,ve,ee));const He=ee=>F(ae[ee],1,1,()=>{ae[ee]=null});return{c(){e=B("div"),l=B("div"),t=B("div"),r=B("div"),r.textContent=o,s=U();for(let ee=0;ee<D.length;ee+=1)D[ee].c();c=U(),a=B("div"),f=B("div"),f.textContent=p,h=U();for(let ee=0;ee<G.length;ee+=1)G[ee].c();u=U(),_=B("div"),V=B("div"),V.textContent=z,O=U();for(let ee=0;ee<Q.length;ee+=1)Q[ee].c();R=U(),S=B("div"),le(j.$$.fragment),J=U(),q=B("div"),C=B("div"),N=B("div"),N.textContent=i,d=U();for(let ee=0;ee<ae.length;ee+=1)ae[ee].c();m=U(),w=B("div"),y=me("Head 1 of "),A=me(E),this.h()},l(ee){e=T(ee,"DIV",{class:!0,style:!0});var te=P(e);l=T(te,"DIV",{class:!0});var X=P(l);t=T(X,"DIV",{class:!0});var $e=P(t);r=T($e,"DIV",{class:!0,"data-svelte-h":!0}),Ie(r)!=="svelte-1a2739d"&&(r.textContent=o),s=x($e);for(let Ne=0;Ne<D.length;Ne+=1)D[Ne].l($e);$e.forEach($),c=x(X),a=T(X,"DIV",{class:!0});var Se=P(a);f=T(Se,"DIV",{class:!0,"data-svelte-h":!0}),Ie(f)!=="svelte-bmmhtu"&&(f.textContent=p),h=x(Se);for(let Ne=0;Ne<G.length;Ne+=1)G[Ne].l(Se);Se.forEach($),u=x(X),_=T(X,"DIV",{class:!0});var Z=P(_);V=T(Z,"DIV",{class:!0,"data-svelte-h":!0}),Ie(V)!=="svelte-17pe084"&&(V.textContent=z),O=x(Z);for(let Ne=0;Ne<Q.length;Ne+=1)Q[Ne].l(Z);Z.forEach($),X.forEach($),R=x(te),S=T(te,"DIV",{class:!0});var se=P(S);ne(j.$$.fragment,se),se.forEach($),J=x(te),q=T(te,"DIV",{class:!0});var Y=P(q);C=T(Y,"DIV",{class:!0});var De=P(C);N=T(De,"DIV",{class:!0,"data-svelte-h":!0}),Ie(N)!=="svelte-68unf9"&&(N.textContent=i),d=x(De);for(let Ne=0;Ne<ae.length;Ne+=1)ae[Ne].l(De);De.forEach($),Y.forEach($),m=x(te),w=T(te,"DIV",{class:!0});var Ue=P(w);y=ge(Ue,"Head 1 of "),A=ge(Ue,E),Ue.forEach($),te.forEach($),this.h()},h(){g(r,"class","title svelte-1hsibq9"),g(t,"class","column query"),g(f,"class","title svelte-1hsibq9"),g(a,"class","column key"),g(V,"class","title svelte-1hsibq9"),g(_,"class","column value"),g(l,"class","qkv flex h-full flex-col justify-center gap-[5rem] pl-[6rem]"),g(S,"class","resize-watch attention-matrix flex"),g(N,"class","title svelte-1hsibq9"),g(C,"class","column out"),g(q,"class","head-out mx-[2rem]"),g(w,"class","head-title absolute bottom-2 right-3 text-right text-gray-400"),g(e,"class","head-block flex w-full items-center justify-between px-2"),g(e,"style",v=`height:${n[7]}px;`)},m(ee,te){W(ee,e,te),k(e,l),k(l,t),k(t,r),k(t,s);for(let X=0;X<D.length;X+=1)D[X]&&D[X].m(t,null);k(l,c),k(l,a),k(a,f),k(a,h);for(let X=0;X<G.length;X+=1)G[X]&&G[X].m(a,null);k(l,u),k(l,_),k(_,V),k(_,O);for(let X=0;X<Q.length;X+=1)Q[X]&&Q[X].m(_,null);k(e,R),k(e,S),re(j,S,null),k(e,J),k(e,q),k(q,C),k(C,N),k(C,d);for(let X=0;X<ae.length;X+=1)ae[X]&&ae[X].m(C,null);k(e,m),k(e,w),k(w,y),k(w,A),I=!0},p(ee,te){if(te&96){b=be(ee[6]);let X;for(X=0;X<b.length;X+=1){const $e=Pl(ee,b,X);D[X]?(D[X].p($e,te),H(D[X],1)):(D[X]=Rl($e),D[X].c(),H(D[X],1),D[X].m(t,null))}for(Ve(),X=b.length;X<D.length;X+=1)M(X);Ae()}if(te&96){L=be(ee[6]);let X;for(X=0;X<L.length;X+=1){const $e=Tl(ee,L,X);G[X]?(G[X].p($e,te),H(G[X],1)):(G[X]=Fl($e),G[X].c(),H(G[X],1),G[X].m(a,null))}for(Ve(),X=L.length;X<G.length;X+=1)K(X);Ae()}if(te&96){de=be(ee[6]);let X;for(X=0;X<de.length;X+=1){const $e=Bl(ee,de,X);Q[X]?(Q[X].p($e,te),H(Q[X],1)):(Q[X]=Ul($e),Q[X].c(),H(Q[X],1),Q[X].m(_,null))}for(Ve(),X=de.length;X<Q.length;X+=1)fe(X);Ae()}if(te&96){ve=be(ee[6]);let X;for(X=0;X<ve.length;X+=1){const $e=Ml(ee,ve,X);ae[X]?(ae[X].p($e,te),H(ae[X],1)):(ae[X]=xl($e),ae[X].c(),H(ae[X],1),ae[X].m(C,null))}for(Ve(),X=ve.length;X<ae.length;X+=1)He(X);Ae()}(!I||te&32)&&E!==(E=ee[5].attention_head_num+"")&&Pe(A,E),(!I||te&128&&v!==(v=`height:${ee[7]}px;`))&&g(e,"style",v)},i(ee){if(!I){for(let te=0;te<b.length;te+=1)H(D[te]);for(let te=0;te<L.length;te+=1)H(G[te]);for(let te=0;te<de.length;te+=1)H(Q[te]);H(j.$$.fragment,ee);for(let te=0;te<ve.length;te+=1)H(ae[te]);I=!0}},o(ee){D=D.filter(Boolean);for(let te=0;te<D.length;te+=1)F(D[te]);G=G.filter(Boolean);for(let te=0;te<G.length;te+=1)F(G[te]);Q=Q.filter(Boolean);for(let te=0;te<Q.length;te+=1)F(Q[te]);F(j.$$.fragment,ee),ae=ae.filter(Boolean);for(let te=0;te<ae.length;te+=1)F(ae[te]);I=!1},d(ee){ee&&$(e),Be(D,ee),Be(G,ee),Be(Q,ee),oe(j),Be(ae,ee)}}}function _o(n){let e,l,t="<div>Multi-head Self Attention</div>",r,o,s,c='<div class="bounding-title svelte-1hsibq9">Transformer Block 1</div>',a,f,p,h,u,_,V,z,O,R,S,j,J=be(n[6]),q=[];for(let N=0;N<J.length;N+=1)q[N]=Gl(zl(n,J,N));const C=N=>F(q[N],1,1,()=>{q[N]=null});return z=new Qr({props:{$$slots:{default:[go]},$$scope:{ctx:n}}}),{c(){e=B("div"),l=B("div"),l.innerHTML=t,r=U(),o=B("div"),s=B("div"),s.innerHTML=c,a=U(),f=B("div"),h=U(),u=B("div");for(let N=0;N<q.length;N+=1)q[N].c();_=U(),V=B("div"),le(z.$$.fragment),this.h()},l(N){e=T(N,"DIV",{class:!0});var i=P(e);l=T(i,"DIV",{class:!0,role:!0,"data-svelte-h":!0}),Ie(l)!=="svelte-n6swon"&&(l.innerHTML=t),r=x(i),o=T(i,"DIV",{class:!0});var d=P(o);s=T(d,"DIV",{class:!0,"data-svelte-h":!0}),Ie(s)!=="svelte-vte4ua"&&(s.innerHTML=c),a=x(d),f=T(d,"DIV",{class:!0,style:!0}),P(f).forEach($),h=x(d),u=T(d,"DIV",{class:!0});var m=P(u);for(let y=0;y<q.length;y+=1)q[y].l(m);m.forEach($),_=x(d),V=T(d,"DIV",{class:!0});var w=P(V);ne(z.$$.fragment,w),w.forEach($),d.forEach($),i.forEach($),this.h()},h(){g(l,"class","title svelte-1hsibq9"),g(l,"role","group"),g(s,"class","bounding transformer-bounding svelte-1hsibq9"),ie(s,"active",n[4]),g(f,"class","bounding attention-bounding svelte-1hsibq9"),g(f,"style",p=`padding-bottom:${n[5].attention_head_num*yt.y}px`),ie(f,"active",n[1]&&!n[3]),g(u,"class","column"),g(V,"class","heads svelte-1hsibq9"),g(o,"class","content relative svelte-1hsibq9"),g(e,"class",O=pe(he("attention",n[0],{expanded:n[3]}))+" svelte-1hsibq9")},m(N,i){W(N,e,i),k(e,l),k(e,r),k(e,o),k(o,s),k(o,a),k(o,f),k(o,h),k(o,u);for(let d=0;d<q.length;d+=1)q[d]&&q[d].m(u,null);k(o,_),k(o,V),re(z,V,null),R=!0,S||(j=[ke(l,"mouseenter",n[8]),ke(l,"mouseleave",n[9])],S=!0)},p(N,[i]){if((!R||i&16)&&ie(s,"active",N[4]),(!R||i&32&&p!==(p=`padding-bottom:${N[5].attention_head_num*yt.y}px`))&&g(f,"style",p),(!R||i&10)&&ie(f,"active",N[1]&&!N[3]),i&100){J=be(N[6]);let m;for(m=0;m<J.length;m+=1){const w=zl(N,J,m);q[m]?(q[m].p(w,i),H(q[m],1)):(q[m]=Gl(w),q[m].c(),H(q[m],1),q[m].m(u,null))}for(Ve(),m=J.length;m<q.length;m+=1)C(m);Ae()}const d={};i&2097376&&(d.$$scope={dirty:i,ctx:N}),z.$set(d),(!R||i&9&&O!==(O=pe(he("attention",N[0],{expanded:N[3]}))+" svelte-1hsibq9"))&&g(e,"class",O)},i(N){if(!R){for(let i=0;i<J.length;i+=1)H(q[i]);H(z.$$.fragment,N),R=!0}},o(N){q=q.filter(Boolean);for(let i=0;i<q.length;i+=1)F(q[i]);F(z.$$.fragment,N),R=!1},d(N){N&&$(e),Be(q,N),oe(z),S=!1,xe(j)}}}const $o="bg-blue-200",bo="bg-red-200",wo="bg-green-200",sr="bg-blue-300",ir="bg-red-300",ar="bg-green-300",ko="bg-purple-300";function yo(n,e,l){let t,r,o,s,c,a;Ee(n,We,R=>l(10,r=R)),Ee(n,Jt,R=>l(4,o=R)),Ee(n,Ft,R=>l(5,s=R)),Ee(n,bt,R=>l(6,c=R)),Ee(n,Zn,R=>l(7,a=R));let{className:f=void 0}=e;ul("block-id","attention");const p=fl("block-id");let h=!1;function u(){l(1,h=!0)}function _(){l(1,h=!1)}let V=null;const z=R=>{l(2,V=R)},O=()=>{l(2,V=null)};return n.$$set=R=>{"className"in R&&l(0,f=R.className)},n.$$.update=()=>{n.$$.dirty&1024&&l(3,t=r.id===p)},[f,h,V,t,o,s,c,a,u,_,r,z,O]}class Eo extends Ge{constructor(e){super(),Re(this,e,yo,_o,je,{className:0})}}function Io(n){let e,l,t,r,o,s,c,a=n[3]&&Wl(n);return{c(){e=B("div"),l=B("div"),t=U(),r=Ce("svg"),a&&a.c(),o=Ce("path"),this.h()},l(f){e=T(f,"DIV",{class:!0});var p=P(e);l=T(p,"DIV",{class:!0}),P(l).forEach($),t=x(p),r=qe(p,"svg",{class:!0});var h=P(r);a&&a.l(h),o=qe(h,"path",{d:!0,class:!0}),P(o).forEach($),h.forEach($),p.forEach($),this.h()},h(){g(l,"class","cursor svelte-1jqlo12"),g(o,"d",s=`M0,0 L0,${n[6]}`),g(o,"class","svelte-1jqlo12"),g(r,"class","main svelte-1jqlo12"),g(e,"class",c=pe(he("residual residual-end cell",n[1]))+" svelte-1jqlo12"),ie(e,"active",n[5])},m(f,p){W(f,e,p),k(e,l),k(e,t),k(e,r),a&&a.m(r,null),k(r,o)},p(f,p){f[3]?a?a.p(f,p):(a=Wl(f),a.c(),a.m(r,o)):a&&(a.d(1),a=null),p&64&&s!==(s=`M0,0 L0,${f[6]}`)&&g(o,"d",s),p&2&&c!==(c=pe(he("residual residual-end cell",f[1]))+" svelte-1jqlo12")&&g(e,"class",c),p&34&&ie(e,"active",f[5])},d(f){f&&$(e),a&&a.d()}}}function Do(n){let e,l,t,r,o,s,c,a=n[3]&&Xl(n);return{c(){e=B("div"),l=B("div"),t=U(),r=Ce("svg"),a&&a.c(),o=Ce("path"),this.h()},l(f){e=T(f,"DIV",{class:!0});var p=P(e);l=T(p,"DIV",{class:!0}),P(l).forEach($),t=x(p),r=qe(p,"svg",{class:!0});var h=P(r);a&&a.l(h),o=qe(h,"path",{d:!0,class:!0}),P(o).forEach($),h.forEach($),p.forEach($),this.h()},h(){g(l,"class","cursor svelte-1jqlo12"),g(o,"d",s=`M0,0 L0,${n[6]}`),g(o,"class","svelte-1jqlo12"),g(r,"class","main svelte-1jqlo12"),g(e,"class",c=pe(he("residual residual-start cell",n[1]))+" svelte-1jqlo12"),ie(e,"active",n[5])},m(f,p){W(f,e,p),k(e,l),k(e,t),k(e,r),a&&a.m(r,null),k(r,o)},p(f,p){f[3]?a?a.p(f,p):(a=Xl(f),a.c(),a.m(r,o)):a&&(a.d(1),a=null),p&64&&s!==(s=`M0,0 L0,${f[6]}`)&&g(o,"d",s),p&2&&c!==(c=pe(he("residual residual-start cell",f[1]))+" svelte-1jqlo12")&&g(e,"class",c),p&34&&ie(e,"active",f[5])},d(f){f&&$(e),a&&a.d()}}}function Co(n){let e,l,t,r,o,s,c,a,f,p=n[4]&&Kl();return{c(){e=B("div"),l=B("div"),t=U(),r=Ce("svg"),o=Ce("circle"),s=Ce("path"),a=U(),p&&p.c(),this.h()},l(h){e=T(h,"DIV",{class:!0});var u=P(e);l=T(u,"DIV",{class:!0}),P(l).forEach($),t=x(u),r=qe(u,"svg",{class:!0});var _=P(r);o=qe(_,"circle",{class:!0,cx:!0,cy:!0,r:!0}),P(o).forEach($),s=qe(_,"path",{class:!0,d:!0}),P(s).forEach($),_.forEach($),a=x(u),p&&p.l(u),u.forEach($),this.h()},h(){g(l,"class","cursor svelte-1jqlo12"),g(o,"class","icon svelte-1jqlo12"),g(o,"cx","50%"),g(o,"cy","50%"),g(o,"r","3"),g(s,"class","line svelte-1jqlo12"),g(s,"d",c=`
     M 0 0
    C 0 ${n[6]*.25}, ${n[6]*.2} ${n[6]*.25}, ${n[6]*.2} ${n[6]*.5}
    C ${n[6]*.2} ${n[6]*.75}, 0 ${n[6]*.75}, 0 ${n[6]}
  `),g(r,"class","main svelte-1jqlo12"),g(e,"class",f=pe(he("cell ln",n[1]))+" svelte-1jqlo12"),ie(e,"active",n[5])},m(h,u){W(h,e,u),k(e,l),k(e,t),k(e,r),k(r,o),k(r,s),k(e,a),p&&p.m(e,null)},p(h,u){u&64&&c!==(c=`
     M 0 0
    C 0 ${h[6]*.25}, ${h[6]*.2} ${h[6]*.25}, ${h[6]*.2} ${h[6]*.5}
    C ${h[6]*.2} ${h[6]*.75}, 0 ${h[6]*.75}, 0 ${h[6]}
  `)&&g(s,"d",c),h[4]?p||(p=Kl(),p.c(),p.m(e,null)):p&&(p.d(1),p=null),u&2&&f!==(f=pe(he("cell ln",h[1]))+" svelte-1jqlo12")&&g(e,"class",f),u&34&&ie(e,"active",h[5])},d(h){h&&$(e),p&&p.d()}}}function qo(n){let e,l,t,r,o,s,c,a,f,p=n[4]&&Zl();return{c(){e=B("div"),l=B("div"),t=U(),r=Ce("svg"),o=Ce("path"),c=Ce("circle"),a=U(),p&&p.c(),this.h()},l(h){e=T(h,"DIV",{class:!0});var u=P(e);l=T(u,"DIV",{class:!0}),P(l).forEach($),t=x(u),r=qe(u,"svg",{class:!0});var _=P(r);o=qe(_,"path",{class:!0,d:!0}),P(o).forEach($),c=qe(_,"circle",{class:!0,cx:!0,cy:!0,r:!0}),P(c).forEach($),_.forEach($),a=x(u),p&&p.l(u),u.forEach($),this.h()},h(){g(l,"class","cursor svelte-1jqlo12"),g(o,"class","line svelte-1jqlo12"),g(o,"d",s=`M0,0 L0,${n[6]}`),g(c,"class","icon svelte-1jqlo12"),g(c,"cx","50%"),g(c,"cy","50%"),g(c,"r","3"),g(r,"class","main svelte-1jqlo12"),g(e,"class",f=pe(he("cell dropout",n[1]))+" svelte-1jqlo12"),ie(e,"active",n[5])},m(h,u){W(h,e,u),k(e,l),k(e,t),k(e,r),k(r,o),k(r,c),k(e,a),p&&p.m(e,null)},p(h,u){u&64&&s!==(s=`M0,0 L0,${h[6]}`)&&g(o,"d",s),h[4]?p||(p=Zl(),p.c(),p.m(e,null)):p&&(p.d(1),p=null),u&2&&f!==(f=pe(he("cell dropout",h[1]))+" svelte-1jqlo12")&&g(e,"class",f),u&34&&ie(e,"active",h[5])},d(h){h&&$(e),p&&p.d()}}}function So(n){let e,l,t,r,o,s,c;return{c(){e=B("div"),l=B("div"),t=U(),r=Ce("svg"),o=Ce("path"),s=Ce("circle"),this.h()},l(a){e=T(a,"DIV",{class:!0});var f=P(e);l=T(f,"DIV",{class:!0}),P(l).forEach($),t=x(f),r=qe(f,"svg",{class:!0});var p=P(r);o=qe(p,"path",{class:!0,d:!0}),P(o).forEach($),s=qe(p,"circle",{class:!0,cx:!0,cy:!0,r:!0}),P(s).forEach($),p.forEach($),f.forEach($),this.h()},h(){g(l,"class","cursor svelte-1jqlo12"),g(o,"class","line line1 svelte-1jqlo12"),g(o,"d","M0,0 L0,90%"),g(s,"class","icon svelte-1jqlo12"),g(s,"cx","50%"),g(s,"cy","50%"),g(s,"r","3"),g(r,"class","main svelte-1jqlo12"),g(e,"class",c=pe(he("cell activation",n[1]))+" svelte-1jqlo12"),ie(e,"active",n[5])},m(a,f){W(a,e,f),k(e,l),k(e,t),k(e,r),k(r,o),k(r,s)},p(a,f){f&2&&c!==(c=pe(he("cell activation",a[1]))+" svelte-1jqlo12")&&g(e,"class",c),f&34&&ie(e,"active",a[5])},d(a){a&&$(e)}}}function Wl(n){let e;return{c(){e=Ce("path"),this.h()},l(l){e=qe(l,"path",{id:!0,class:!0,d:!0}),P(e).forEach($),this.h()},h(){g(e,"id",n[0]),g(e,"class","head svelte-1jqlo12"),g(e,"d","M0,0 Q0,-16 -30,-16")},m(l,t){W(l,e,t)},p(l,t){t&1&&g(e,"id",l[0])},d(l){l&&$(e)}}}function Xl(n){let e,l,t;return{c(){e=Ce("path"),l=Ce("text"),t=me("Residual"),this.h()},l(r){e=qe(r,"path",{id:!0,class:!0,d:!0}),P(e).forEach($),l=qe(r,"text",{x:!0,y:!0,dy:!0,dx:!0,class:!0});var o=P(l);t=ge(o,"Residual"),o.forEach($),this.h()},h(){g(e,"id",n[0]),g(e,"class","head svelte-1jqlo12"),g(e,"d","M0,0 Q0,-16 30,-16"),g(l,"x","30"),g(l,"y","-26"),g(l,"dy","4"),g(l,"dx","4"),g(l,"class","svelte-1jqlo12")},m(r,o){W(r,e,o),W(r,l,o),k(l,t)},p(r,o){o&1&&g(e,"id",r[0])},d(r){r&&($(e),$(l))}}}function Kl(n){let e,l,t,r;return{c(){e=Ce("svg"),l=Ce("path"),t=Ce("text"),r=me("Layer Normalization"),this.h()},l(o){e=qe(o,"svg",{class:!0,width:!0});var s=P(e);l=qe(s,"path",{d:!0,class:!0}),P(l).forEach($),t=qe(s,"text",{x:!0,y:!0,"text-anchor":!0,class:!0});var c=P(t);r=ge(c,"Layer Normalization"),c.forEach($),s.forEach($),this.h()},h(){g(l,"d","M27.3536 4.35355C27.5488 4.15829 27.5488 3.84171 27.3536 3.64645L24.1716 0.46447C23.9763 0.269208 23.6597 0.269208 23.4645 0.464471C23.2692 0.659733 23.2692 0.976316 23.4645 1.17158L26.2929 4L23.4645 6.82843C23.2692 7.02369 23.2692 7.34028 23.4645 7.53554C23.6597 7.7308 23.9763 7.7308 24.1716 7.53554L27.3536 4.35355ZM27 3.5C20.3125 3.50001 15.2969 6.63952 11.5638 11.7944C7.84616 16.9278 5.39057 24.0677 3.75991 32.1346C0.498061 48.2711 0.5 68.3247 0.5 84H1.5C1.5 68.2984 1.50194 48.352 4.74009 32.3328C6.35943 24.3218 8.77884 17.3448 12.3737 12.3809C15.9531 7.4384 20.6875 4.50001 27 4.5V3.5Z"),g(l,"class","svelte-1jqlo12"),g(t,"x","4"),g(t,"y","95"),g(t,"text-anchor","middle"),g(t,"class","svelte-1jqlo12"),g(e,"class","guide svelte-1jqlo12"),g(e,"width","27px"),ie(e,"active",!1)},m(o,s){W(o,e,s),k(e,l),k(e,t),k(t,r)},d(o){o&&$(e)}}}function Zl(n){let e,l,t,r;return{c(){e=Ce("svg"),l=Ce("path"),t=Ce("text"),r=me("Dropout"),this.h()},l(o){e=qe(o,"svg",{class:!0,width:!0});var s=P(e);l=qe(s,"path",{d:!0,class:!0}),P(l).forEach($),t=qe(s,"text",{x:!0,y:!0,"text-anchor":!0,class:!0});var c=P(t);r=ge(c,"Dropout"),c.forEach($),s.forEach($),this.h()},h(){g(l,"d","M44.3186 4.46399C44.5314 4.28801 44.5613 3.97284 44.3853 3.76004L41.5175 0.292199C41.3416 0.0793953 41.0264 0.0495441 40.8136 0.225525C40.6008 0.401505 40.5709 0.716677 40.7469 0.929481L43.296 4.012L40.2135 6.56113C40.0007 6.73711 39.9709 7.05228 40.1468 7.26509C40.3228 7.47789 40.638 7.50774 40.8508 7.33176L44.3186 4.46399ZM44.0471 3.58091C38.7621 3.08034 27.8926 4.80481 18.3357 11.5838C8.74613 18.386 0.5 30.2626 0.5 50H1.5C1.5 30.5889 9.58721 19.0154 18.9143 12.3994C28.2741 5.76023 38.9045 4.0983 43.9529 4.57645L44.0471 3.58091Z"),g(l,"class","svelte-1jqlo12"),g(t,"x","4"),g(t,"y","60"),g(t,"text-anchor","middle"),g(t,"class","svelte-1jqlo12"),g(e,"class","guide svelte-1jqlo12"),g(e,"width","44px"),ie(e,"active",!1)},m(o,s){W(o,e,s),k(e,l),k(e,t),k(t,r)},d(o){o&&$(e)}}}function Vo(n){let e;function l(o,s){if(o[2]==="activation")return So;if(o[2]==="dropout")return qo;if(o[2]==="ln")return Co;if(o[2]==="residual-start")return Do;if(o[2]==="residual-end")return Io}let t=l(n),r=t&&t(n);return{c(){r&&r.c(),e=vt()},l(o){r&&r.l(o),e=vt()},m(o,s){r&&r.m(o,s),W(o,e,s)},p(o,[s]){t===(t=l(o))&&r?r.p(o,s):(r&&r.d(1),r=t&&t(o),r&&(r.c(),r.m(e.parentNode,e)))},i:Te,o:Te,d(o){o&&$(e),r&&r.d(o)}}}function Ao(n,e,l){let t;Ee(n,al,p=>l(6,t=p));let{id:r=void 0}=e,{className:o=void 0}=e,{type:s=void 0}=e,{head:c=!1}=e,{tail:a=!1}=e,{active:f=!1}=e;return n.$$set=p=>{"id"in p&&l(0,r=p.id),"className"in p&&l(1,o=p.className),"type"in p&&l(2,s=p.type),"head"in p&&l(3,c=p.head),"tail"in p&&l(4,a=p.tail),"active"in p&&l(5,f=p.active)},[r,o,s,c,a,f,t]}class ll extends Ge{constructor(e){super(),Re(this,e,Ao,Vo,je,{id:0,className:1,type:2,head:3,tail:4,active:5})}}function Ql(n,e,l){const t=n.slice();return t[7]=e[l],t[9]=l,t}function No(n){let e,l=n[3].dimension+"",t,r;return{c(){e=me("vector("),t=me(l),r=me(")")},l(o){e=ge(o,"vector("),t=ge(o,l),r=ge(o,")")},m(o,s){W(o,e,s),W(o,t,s),W(o,r,s)},p(o,s){s&8&&l!==(l=o[3].dimension+"")&&Pe(t,l)},d(o){o&&($(e),$(t),$(r))}}}function Yl(n){let e,l,t,r,o,s,c,a;return t=new pt({props:{colorScale:"blue"}}),s=new Oe({props:{placement:"right",class:"popover",$$slots:{default:[No]},$$scope:{ctx:n}}}),{c(){e=B("div"),l=B("div"),le(t.$$.fragment),o=U(),le(s.$$.fragment),c=U(),this.h()},l(f){e=T(f,"DIV",{class:!0});var p=P(e);l=T(p,"DIV",{class:!0});var h=P(l);ne(t.$$.fragment,h),h.forEach($),o=x(p),ne(s.$$.fragment,p),c=x(p),p.forEach($),this.h()},h(){g(l,"class",r=pe(he("vector shrink-0 bg-blue-200",{"last-token":n[9]===n[4].length-1}))+" svelte-1jtwro5"),g(e,"class","cell svelte-1jtwro5"),ie(e,"last",n[9]===n[4].length-1)},m(f,p){W(f,e,p),k(e,l),re(t,l,null),k(e,o),re(s,e,null),k(e,c),a=!0},p(f,p){(!a||p&16&&r!==(r=pe(he("vector shrink-0 bg-blue-200",{"last-token":f[9]===f[4].length-1}))+" svelte-1jtwro5"))&&g(l,"class",r);const h={};p&1032&&(h.$$scope={dirty:p,ctx:f}),s.$set(h),(!a||p&16)&&ie(e,"last",f[9]===f[4].length-1)},i(f){a||(H(t.$$.fragment,f),H(s.$$.fragment,f),a=!0)},o(f){F(t.$$.fragment,f),F(s.$$.fragment,f),a=!1},d(f){f&&$(e),oe(t),oe(s)}}}function Lo(n){let e,l,t,r,o,s,c,a=n[3].layer_num-1+"",f,p,h,u,_="Transformer<br/>Blocks",V,z,O,R,S,j,J,q,C,N,i,d,m=be(n[4]),w=[];for(let E=0;E<m.length;E+=1)w[E]=Yl(Ql(n,m,E));const y=E=>F(w[E],1,1,()=>{w[E]=null});return{c(){e=B("div"),l=B("div"),t=U(),r=B("div"),o=B("div"),s=B("div"),c=B("div"),f=me(a),p=me(" more identical"),h=B("br"),u=B("span"),u.innerHTML=_,V=me("."),z=U(),O=Ce("svg"),R=Ce("path"),S=U();for(let E=0;E<w.length;E+=1)w[E].c();j=U(),J=B("div"),q=B("div"),this.h()},l(E){e=T(E,"DIV",{class:!0,role:!0});var A=P(e);l=T(A,"DIV",{class:!0}),P(l).forEach($),t=x(A),r=T(A,"DIV",{class:!0});var v=P(r);o=T(v,"DIV",{class:!0});var I=P(o);s=T(I,"DIV",{class:!0});var b=P(s);c=T(b,"DIV",{class:!0});var D=P(c);f=ge(D,a),p=ge(D," more identical"),h=T(D,"BR",{}),u=T(D,"SPAN",{class:!0,"data-svelte-h":!0}),Ie(u)!=="svelte-m89yhc"&&(u.innerHTML=_),V=ge(D,"."),D.forEach($),z=x(b),O=qe(b,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var M=P(O);R=qe(M,"path",{d:!0,fill:!0}),P(R).forEach($),M.forEach($),b.forEach($),S=x(I);for(let G=0;G<w.length;G+=1)w[G].l(I);I.forEach($),j=x(v),J=T(v,"DIV",{class:!0});var L=P(J);q=T(L,"DIV",{class:!0}),P(q).forEach($),L.forEach($),v.forEach($),A.forEach($),this.h()},h(){g(l,"class","title"),g(u,"class","highlight svelte-1jtwro5"),g(c,"class","text svelte-1jtwro5"),ie(c,"active",n[2]),g(R,"d","M1.18221 4.58047C1.23103 4.62928 1.31017 4.62928 1.35899 4.58047L2.15448 3.78497C2.2033 3.73616 2.2033 3.65701 2.15448 3.6082C2.10567 3.55938 2.02652 3.55938 1.97771 3.6082L1.2706 4.3153L0.563493 3.6082C0.514677 3.55938 0.435531 3.55938 0.386716 3.6082C0.3379 3.65701 0.3379 3.73616 0.386716 3.78497L1.18221 4.58047ZM1.1456 0.285461V4.49208H1.3956V0.285461H1.1456Z"),g(R,"fill","currentColor"),g(O,"xmlns","http://www.w3.org/2000/svg"),g(O,"class","h-6 w-6 text-gray-300"),g(O,"viewBox","0 0 3 5"),g(O,"fill","none"),g(s,"class","guide flex flex-col items-start gap-1 svelte-1jtwro5"),g(o,"class","column final relative svelte-1jtwro5"),g(q,"class","prob-dim svelte-1jtwro5"),ie(q,"expanded",n[1].id==="softmax"),g(J,"class","second-column svelte-1jtwro5"),g(r,"class","content svelte-1jtwro5"),g(e,"class",C=pe(he("transformer-blocks",n[0],{expanded:n[1].id!==null}))+" svelte-1jtwro5"),g(e,"role","group")},m(E,A){W(E,e,A),k(e,l),k(e,t),k(e,r),k(r,o),k(o,s),k(s,c),k(c,f),k(c,p),k(c,h),k(c,u),k(c,V),k(s,z),k(s,O),k(O,R),k(o,S);for(let v=0;v<w.length;v+=1)w[v]&&w[v].m(o,null);k(r,j),k(r,J),k(J,q),N=!0,i||(d=[ke(e,"mouseenter",n[5]),ke(e,"mouseleave",n[6])],i=!0)},p(E,[A]){if((!N||A&8)&&a!==(a=E[3].layer_num-1+"")&&Pe(f,a),(!N||A&4)&&ie(c,"active",E[2]),A&24){m=be(E[4]);let v;for(v=0;v<m.length;v+=1){const I=Ql(E,m,v);w[v]?(w[v].p(I,A),H(w[v],1)):(w[v]=Yl(I),w[v].c(),H(w[v],1),w[v].m(o,null))}for(Ve(),v=m.length;v<w.length;v+=1)y(v);Ae()}(!N||A&2)&&ie(q,"expanded",E[1].id==="softmax"),(!N||A&3&&C!==(C=pe(he("transformer-blocks",E[0],{expanded:E[1].id!==null}))+" svelte-1jtwro5"))&&g(e,"class",C)},i(E){if(!N){for(let A=0;A<m.length;A+=1)H(w[A]);N=!0}},o(E){w=w.filter(Boolean);for(let A=0;A<w.length;A+=1)F(w[A]);N=!1},d(E){E&&$(e),Be(w,E),i=!1,xe(d)}}}function Mo(n,e,l){let t,r,o,s;Ee(n,We,p=>l(1,t=p)),Ee(n,Jt,p=>l(2,r=p)),Ee(n,Ft,p=>l(3,o=p)),Ee(n,bt,p=>l(4,s=p));let{className:c=void 0}=e;const a=()=>{Jt.set(!0)},f=()=>{Jt.set(!1)};return n.$$set=p=>{"className"in p&&l(0,c=p.className)},[c,t,r,o,s,a,f]}class Bo extends Ge{constructor(e){super(),Re(this,e,Mo,Lo,je,{className:0})}}function To(n){let e,l,t,r;return{c(){e=B("div"),l=Ce("svg"),t=Ce("g"),r=Ce("g"),this.h()},l(o){e=T(o,"DIV",{class:!0});var s=P(e);l=qe(s,"svg",{class:!0});var c=P(l);t=qe(c,"g",{class:!0}),P(t).forEach($),r=qe(c,"g",{class:!0}),P(r).forEach($),c.forEach($),s.forEach($),this.h()},h(){g(t,"class","bars"),g(r,"class","bar-labels"),g(l,"class","h-full w-full"),g(e,"class","content-box probability grow svelte-8s3yoj")},m(o,s){W(o,e,s),k(e,l),k(l,t),k(l,r),n[7](l)},p:Te,i:Te,o:Te,d(o){o&&$(e),n[7](null)}}}const Jl=4;let Po=1;function zo(n,e,l){let t,r;Ee(n,tl,z=>l(5,t=z)),Ee(n,Ut,z=>l(6,r=z));const{theme:o}=Dt(Ct);let{rowHeight:s}=e,{rowGap:c}=e,{hoveredIndex:a=null}=e,f,p=o.colors.gray[300],h=o.colors.purple[400],{drawBars:u=()=>{const z=r==null?void 0:r.prediction,O=lt(f);let R=wl().domain([0,Hr(z,S=>S.adjustedProbability)]).range([0,(f==null?void 0:f.clientWidth)-Rt*3]);O.select("g.bars").selectAll("rect").data(z).join("rect").attr("x",0).attr("y",(S,j)=>j*s+j*c+s/2-Jl/2).attr("height",Jl).attr("width",S=>R(S.adjustedProbability)).attr("rx",1).attr("ry",1).attr("fill",(S,j)=>j===a?h:(t==null?void 0:t.rank)===j?rl:p).on("mouseenter",function(S,j){l(1,a=j.rank),lt(this).style("cursor","pointer")}).on("mouseleave",()=>l(1,a=null)).transition().ease(yr).duration(500).attr("width",S=>R(S.adjustedProbability)),O.select("g.bar-labels").selectAll("text").data(z).join("text").attr("class","bar-label").attr("fill",(S,j)=>j===a?h:(t==null?void 0:t.rank)===j?rl:p).on("mouseenter",function(S,j){l(1,a=j.rank),lt(this).style("cursor","pointer")}).on("mouseleave",()=>{l(1,a=null)}).attr("x",S=>.4*Rt+R(S.adjustedProbability)).attr("y",(S,j)=>j*s+j*c).attr("dy",s/2+3).attr("text-anchor","start").style("font-size","0.8rem").transition().duration(500).tween("text",function(S){const j=lt(this),J=Er(j.text().replace("%",""),S.adjustedProbability*100);return function(q){j.text(J(q).toFixed(Po)+"%")}})}}=e;$t(()=>{u()});const _=()=>{if(!f)return;const z=lt(f);z.selectAll("g.bars rect").attr("fill",(O,R)=>R===a?h:(t==null?void 0:t.rank)===R?rl:p),z.selectAll("g.bar-labels text").attr("fill",(O,R)=>R===a?h:(t==null?void 0:t.rank)===R?rl:p)};function V(z){tt[z?"unshift":"push"](()=>{f=z,l(0,f)})}return n.$$set=z=>{"rowHeight"in z&&l(2,s=z.rowHeight),"rowGap"in z&&l(3,c=z.rowGap),"hoveredIndex"in z&&l(1,a=z.hoveredIndex),"drawBars"in z&&l(4,u=z.drawBars)},n.$$.update=()=>{n.$$.dirty&81&&r&&f&&u(),n.$$.dirty&2&&a!==void 0&&_(),n.$$.dirty&32&&t&&_()},[f,a,s,c,u,t,r,V]}class Ho extends Ge{constructor(e){super(),Re(this,e,zo,To,je,{rowHeight:2,rowGap:3,hoveredIndex:1,drawBars:4})}}function en(n,e,l){const t=n.slice();return t[36]=e[l],t[38]=l,t}function tn(n,e,l){const t=n.slice();return t[39]=e[l],t[38]=l,t}function ln(n,e,l){const t=n.slice();return t[41]=e[l],t[38]=l,t}function Oo(n){let e,l,t=n[9][n[38]]+"",r;return{c(){e=me("Token ID: "),l=B("span"),r=me(t),this.h()},l(o){e=ge(o,"Token ID: "),l=T(o,"SPAN",{class:!0});var s=P(l);r=ge(s,t),s.forEach($),this.h()},h(){g(l,"class","number svelte-1dtizln")},m(o,s){W(o,e,s),W(o,l,s),k(l,r)},p(o,s){s[0]&512&&t!==(t=o[9][o[38]]+"")&&Pe(r,t)},d(o){o&&($(e),$(l))}}}function nn(n){let e,l,t=(n[41].token.trim()===""?" ":n[41].token)+"",r,o,s,c,a,f,p;s=new Oe({props:{class:"popover",placement:"left",type:"light",$$slots:{default:[Oo]},$$scope:{ctx:n}}});function h(){return n[21](n[38])}return{c(){e=B("div"),l=B("span"),r=me(t),o=U(),le(s.$$.fragment),c=U(),this.h()},l(u){e=T(u,"DIV",{role:!0,class:!0});var _=P(e);l=T(_,"SPAN",{});var V=P(l);r=ge(V,t),V.forEach($),o=x(_),ne(s.$$.fragment,_),c=x(_),_.forEach($),this.h()},h(){var u;g(e,"role","group"),g(e,"class","text-box svelte-1dtizln"),ie(e,"highlight",n[38]===n[5]),ie(e,"sample_highlight",n[10]===n[38]),ie(e,"final_token_highlight",((u=n[11])==null?void 0:u.rank)===n[38])},m(u,_){W(u,e,_),k(e,l),k(l,r),k(e,o),re(s,e,null),k(e,c),a=!0,f||(p=[ke(e,"mouseenter",h),ke(e,"mouseleave",n[22])],f=!0)},p(u,_){var z;n=u,(!a||_[0]&4)&&t!==(t=(n[41].token.trim()===""?" ":n[41].token)+"")&&Pe(r,t);const V={};_[0]&512|_[1]&4096&&(V.$$scope={dirty:_,ctx:n}),s.$set(V),(!a||_[0]&32)&&ie(e,"highlight",n[38]===n[5]),(!a||_[0]&1024)&&ie(e,"sample_highlight",n[10]===n[38]),(!a||_[0]&2048)&&ie(e,"final_token_highlight",((z=n[11])==null?void 0:z.rank)===n[38])},i(u){a||(H(s.$$.fragment,u),a=!0)},o(u){F(s.$$.fragment,u),a=!1},d(u){u&&$(e),oe(s),f=!1,xe(p)}}}function rn(n){let e,l,t='<div class="title-text svelte-1dtizln">Tokens</div>',r,o,s,c="Logits",a,f,p,h,u,_="Exponents",V,z,O,R,S,j="Softmax",J,q,C;return f=new Oe({props:{class:"popover tooltip",$$slots:{default:[jo]},$$scope:{ctx:n}}}),z=new Oe({props:{class:"popover tooltip",$$slots:{default:[Go]},$$scope:{ctx:n}}}),q=new Oe({props:{class:"popover tooltip",$$slots:{default:[Ro]},$$scope:{ctx:n}}}),{c(){e=B("div"),l=B("div"),l.innerHTML=t,r=U(),o=B("div"),s=B("div"),s.textContent=c,a=U(),le(f.$$.fragment),p=U(),h=B("div"),u=B("div"),u.textContent=_,V=U(),le(z.$$.fragment),O=U(),R=B("div"),S=B("div"),S.textContent=j,J=U(),le(q.$$.fragment),this.h()},l(N){e=T(N,"DIV",{class:!0});var i=P(e);l=T(i,"DIV",{class:!0,"data-svelte-h":!0}),Ie(l)!=="svelte-g6ze80"&&(l.innerHTML=t),r=x(i),o=T(i,"DIV",{class:!0});var d=P(o);s=T(d,"DIV",{class:!0,"data-svelte-h":!0}),Ie(s)!=="svelte-1dhde15"&&(s.textContent=c),a=x(d),ne(f.$$.fragment,d),d.forEach($),p=x(i),h=T(i,"DIV",{class:!0});var m=P(h);u=T(m,"DIV",{class:!0,"data-svelte-h":!0}),Ie(u)!=="svelte-v04dzj"&&(u.textContent=_),V=x(m),ne(z.$$.fragment,m),m.forEach($),O=x(i),R=T(i,"DIV",{class:!0});var w=P(R);S=T(w,"DIV",{class:!0,"data-svelte-h":!0}),Ie(S)!=="svelte-jbrx8p"&&(S.textContent=j),J=x(w),ne(q.$$.fragment,w),w.forEach($),i.forEach($),this.h()},h(){g(l,"class","title-box token-string !justify-end svelte-1dtizln"),g(s,"class","title-text svelte-1dtizln"),g(o,"class","title-box logits svelte-1dtizln"),g(u,"class","title-text svelte-1dtizln"),g(h,"class","title-box exponents svelte-1dtizln"),g(S,"class","title-text svelte-1dtizln"),g(R,"class","title-box probability svelte-1dtizln"),g(e,"class","softmax-subtitle softmax-detail flex text-center text-xs opacity-0 svelte-1dtizln")},m(N,i){W(N,e,i),k(e,l),k(e,r),k(e,o),k(o,s),k(o,a),re(f,o,null),k(e,p),k(e,h),k(h,u),k(h,V),re(z,h,null),k(e,O),k(e,R),k(R,S),k(R,J),re(q,R,null),C=!0},i(N){C||(H(f.$$.fragment,N),H(z.$$.fragment,N),H(q.$$.fragment,N),C=!0)},o(N){F(f.$$.fragment,N),F(z.$$.fragment,N),F(q.$$.fragment,N),C=!1},d(N){N&&$(e),oe(f),oe(z),oe(q)}}}function jo(n){let e,l;return e=new qt({props:{math:"\\text{logits} = \\text{hidden state} \\times \\text{LM Head Weights}"}}),{c(){le(e.$$.fragment)},l(t){ne(e.$$.fragment,t)},m(t,r){re(e,t,r),l=!0},p:Te,i(t){l||(H(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){oe(e,t)}}}function Go(n){let e,l;return e=new qt({props:{math:"e^{logit_i / temperature}"}}),{c(){le(e.$$.fragment)},l(t){ne(e.$$.fragment,t)},m(t,r){re(e,t,r),l=!0},p:Te,i(t){l||(H(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){oe(e,t)}}}function Ro(n){let e,l;return e=new qt({props:{math:"\\frac{e^{\\text{logit}_i / T}}{\\sum_{j} e^{\\text{logit}_j / T}}"}}),{c(){le(e.$$.fragment)},l(t){ne(e.$$.fragment,t)},m(t,r){re(e,t,r),l=!0},p:Te,i(t){l||(H(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){oe(e,t)}}}function on(n){let e,l,t,r,o=be(n[8]),s=[];for(let h=0;h<o.length;h+=1)s[h]=an(tn(n,o,h));const c=h=>F(s[h],1,1,()=>{s[h]=null});let a=be(n[7]),f=[];for(let h=0;h<a.length;h+=1)f[h]=cn(en(n,a,h));const p=h=>F(f[h],1,1,()=>{f[h]=null});return{c(){e=B("div");for(let h=0;h<s.length;h+=1)s[h].c();l=U(),t=B("div");for(let h=0;h<f.length;h+=1)f[h].c();this.h()},l(h){e=T(h,"DIV",{class:!0});var u=P(e);for(let V=0;V<s.length;V+=1)s[V].l(u);u.forEach($),l=x(h),t=T(h,"DIV",{class:!0});var _=P(t);for(let V=0;V<f.length;V+=1)f[V].l(_);_.forEach($),this.h()},h(){g(e,"class","content-box vector-box logits ml-2 svelte-1dtizln"),g(t,"class","content-box vector-box exponents svelte-1dtizln")},m(h,u){W(h,e,u);for(let _=0;_<s.length;_+=1)s[_]&&s[_].m(e,null);W(h,l,u),W(h,t,u);for(let _=0;_<f.length;_+=1)f[_]&&f[_].m(t,null);r=!0},p(h,u){if(u[0]&3872){o=be(h[8]);let _;for(_=0;_<o.length;_+=1){const V=tn(h,o,_);s[_]?(s[_].p(V,u),H(s[_],1)):(s[_]=an(V),s[_].c(),H(s[_],1),s[_].m(e,null))}for(Ve(),_=o.length;_<s.length;_+=1)c(_);Ae()}if(u[0]&7584){a=be(h[7]);let _;for(_=0;_<a.length;_+=1){const V=en(h,a,_);f[_]?(f[_].p(V,u),H(f[_],1)):(f[_]=cn(V),f[_].c(),H(f[_],1),f[_].m(t,null))}for(Ve(),_=a.length;_<f.length;_+=1)p(_);Ae()}},i(h){if(!r){for(let u=0;u<o.length;u+=1)H(s[u]);for(let u=0;u<a.length;u+=1)H(f[u]);r=!0}},o(h){s=s.filter(Boolean);for(let u=0;u<s.length;u+=1)F(s[u]);f=f.filter(Boolean);for(let u=0;u<f.length;u+=1)F(f[u]);r=!1},d(h){h&&($(e),$(l),$(t)),Be(s,h),Be(f,h)}}}function sn(n){let e,l,t=n[39].toFixed(2)+"",r,o,s,c,a,f;function p(){return n[23](n[38])}return s=new Oe({props:{class:"popover",placement:"left",type:"light",$$slots:{default:[Fo]},$$scope:{ctx:n}}}),{c(){e=B("div"),l=B("span"),r=me(t),o=U(),le(s.$$.fragment),this.h()},l(h){e=T(h,"DIV",{role:!0,class:!0});var u=P(e);l=T(u,"SPAN",{class:!0});var _=P(l);r=ge(_,t),_.forEach($),u.forEach($),o=x(h),ne(s.$$.fragment,h),this.h()},h(){var h;g(l,"class","number svelte-1dtizln"),g(e,"role","group"),g(e,"class","text-box text-center svelte-1dtizln"),ie(e,"highlight",n[38]===n[5]),ie(e,"sample_highlight",n[10]===n[38]),ie(e,"final_token_highlight",((h=n[11])==null?void 0:h.rank)===n[38])},m(h,u){W(h,e,u),k(e,l),k(l,r),W(h,o,u),re(s,h,u),c=!0,a||(f=[ke(e,"mouseenter",p),ke(e,"mouseleave",n[24])],a=!0)},p(h,u){var V;n=h,(!c||u[0]&256)&&t!==(t=n[39].toFixed(2)+"")&&Pe(r,t),(!c||u[0]&32)&&ie(e,"highlight",n[38]===n[5]),(!c||u[0]&1024)&&ie(e,"sample_highlight",n[10]===n[38]),(!c||u[0]&2048)&&ie(e,"final_token_highlight",((V=n[11])==null?void 0:V.rank)===n[38]);const _={};u[0]&512|u[1]&4096&&(_.$$scope={dirty:u,ctx:n}),s.$set(_)},i(h){c||(H(s.$$.fragment,h),c=!0)},o(h){F(s.$$.fragment,h),c=!1},d(h){h&&($(e),$(o)),oe(s,h),a=!1,xe(f)}}}function Fo(n){let e,l,t;return e=new qt({props:{math:`\\text{logit}_{${n[9][n[38]]}}`}}),{c(){le(e.$$.fragment),l=U()},l(r){ne(e.$$.fragment,r),l=x(r)},m(r,o){re(e,r,o),W(r,l,o),t=!0},p(r,o){const s={};o[0]&512&&(s.math=`\\text{logit}_{${r[9][r[38]]}}`),e.$set(s)},i(r){t||(H(e.$$.fragment,r),t=!0)},o(r){F(e.$$.fragment,r),t=!1},d(r){r&&$(l),oe(e,r)}}}function an(n){let e,l,t=n[39]!==void 0&&sn(n);return{c(){t&&t.c(),e=vt()},l(r){t&&t.l(r),e=vt()},m(r,o){t&&t.m(r,o),W(r,e,o),l=!0},p(r,o){r[39]!==void 0?t?(t.p(r,o),o[0]&256&&H(t,1)):(t=sn(r),t.c(),H(t,1),t.m(e.parentNode,e)):t&&(Ve(),F(t,1,1,()=>{t=null}),Ae())},i(r){l||(H(t),l=!0)},o(r){F(t),l=!1},d(r){r&&$(e),t&&t.d(r)}}}function Uo(n){var r;let e,l,t;return e=new qt({props:{math:`e^{${(r=n[8][n[38]])==null?void 0:r.toFixed(2)} / ${n[12]}}`}}),{c(){le(e.$$.fragment),l=U()},l(o){ne(e.$$.fragment,o),l=x(o)},m(o,s){re(e,o,s),W(o,l,s),t=!0},p(o,s){var a;const c={};s[0]&4352&&(c.math=`e^{${(a=o[8][o[38]])==null?void 0:a.toFixed(2)} / ${o[12]}}`),e.$set(c)},i(o){t||(H(e.$$.fragment,o),t=!0)},o(o){F(e.$$.fragment,o),t=!1},d(o){o&&$(l),oe(e,o)}}}function cn(n){let e,l,t=n[36].toExponential(2)+"",r,o,s,c,a,f;function p(){return n[25](n[38])}return s=new Oe({props:{class:"popover",placement:"left",type:"light",$$slots:{default:[Uo]},$$scope:{ctx:n}}}),{c(){e=B("div"),l=B("span"),r=me(t),o=U(),le(s.$$.fragment),this.h()},l(h){e=T(h,"DIV",{role:!0,class:!0});var u=P(e);l=T(u,"SPAN",{class:!0});var _=P(l);r=ge(_,t),_.forEach($),u.forEach($),o=x(h),ne(s.$$.fragment,h),this.h()},h(){var h;g(l,"class","number svelte-1dtizln"),g(e,"role","group"),g(e,"class","text-box text-center svelte-1dtizln"),ie(e,"highlight",n[38]===n[5]),ie(e,"sample_highlight",n[10]===n[38]),ie(e,"final_token_highlight",((h=n[11])==null?void 0:h.rank)===n[38])},m(h,u){W(h,e,u),k(e,l),k(l,r),W(h,o,u),re(s,h,u),c=!0,a||(f=[ke(e,"mouseenter",p),ke(e,"mouseleave",n[26])],a=!0)},p(h,u){var V;n=h,(!c||u[0]&128)&&t!==(t=n[36].toExponential(2)+"")&&Pe(r,t),(!c||u[0]&32)&&ie(e,"highlight",n[38]===n[5]),(!c||u[0]&1024)&&ie(e,"sample_highlight",n[10]===n[38]),(!c||u[0]&2048)&&ie(e,"final_token_highlight",((V=n[11])==null?void 0:V.rank)===n[38]);const _={};u[0]&4352|u[1]&4096&&(_.$$scope={dirty:u,ctx:n}),s.$set(_)},i(h){c||(H(s.$$.fragment,h),c=!0)},o(h){F(s.$$.fragment,h),c=!1},d(h){h&&($(e),$(o)),oe(s,h),a=!1,xe(f)}}}function xo(n){let e,l,t="<div>Probabilities</div>",r,o,s,c,a,f,p,h,u,_,V,z,O,R,S,j,J,q,C,N,i,d=be(n[2]),m=[];for(let b=0;b<d.length;b+=1)m[b]=nn(ln(n,d,b));const w=b=>F(m[b],1,1,()=>{m[b]=null});let y=n[1]&&rn(n),E=n[1]&&on(n);function A(b){n[27](b)}function v(b){n[28](b)}let I={rowGap:n[16],rowHeight:n[15]};return n[5]!==void 0&&(I.hoveredIndex=n[5]),n[4]!==void 0&&(I.drawBars=n[4]),S=new Ho({props:I}),tt.push(()=>Cl(S,"hoveredIndex",A)),tt.push(()=>Cl(S,"drawBars",v)),{c(){e=B("div"),l=B("div"),l.innerHTML=t,r=U(),o=B("div"),s=B("div"),c=U(),a=B("div"),f=B("div");for(let b=0;b<m.length;b+=1)m[b].c();p=U(),h=B("div"),u=U(),_=B("div"),y&&y.c(),V=U(),z=B("div"),O=B("div"),E&&E.c(),R=U(),le(S.$$.fragment),this.h()},l(b){e=T(b,"DIV",{class:!0,role:!0});var D=P(e);l=T(D,"DIV",{class:!0,role:!0,"data-svelte-h":!0}),Ie(l)!=="svelte-1d64i2n"&&(l.innerHTML=t),r=x(D),o=T(D,"DIV",{class:!0,style:!0});var M=P(o);s=T(M,"DIV",{class:!0}),P(s).forEach($),c=x(M),a=T(M,"DIV",{class:!0});var L=P(a);f=T(L,"DIV",{class:!0});var G=P(f);for(let fe=0;fe<m.length;fe+=1)m[fe].l(G);G.forEach($),p=x(L),h=T(L,"DIV",{class:!0}),P(h).forEach($),L.forEach($),u=x(M),_=T(M,"DIV",{class:!0});var K=P(_);y&&y.l(K),V=x(K),z=T(K,"DIV",{class:!0});var de=P(z);O=T(de,"DIV",{class:!0});var Q=P(O);E&&E.l(Q),Q.forEach($),R=x(de),ne(S.$$.fragment,de),de.forEach($),K.forEach($),M.forEach($),D.forEach($),this.h()},h(){g(l,"class","title expandable svelte-1dtizln"),g(l,"role","none"),g(s,"class","bounding softmax-bounding svelte-1dtizln"),ie(s,"active",n[6]&&!n[1]),g(f,"class","content-box token-string svelte-1dtizln"),g(h,"class","vector vocab opacity-1 w-0"),g(a,"class","first-column relative flex justify-end"),g(O,"class","softmax-detail expandable flex gap-2 opacity-0"),g(z,"class","content-row flex gap-2"),g(_,"class","second-column flex flex-col svelte-1dtizln"),g(o,"class","content resize-watch relative svelte-1dtizln"),g(o,"style",`--softmax-row-height: ${n[15]}px;--softmax-row-gap: ${n[16]}px`),g(e,"class",q=pe(he("softmax",n[0],{expanded:n[1]}))+" svelte-1dtizln"),g(e,"role","none")},m(b,D){W(b,e,D),k(e,l),k(e,r),k(e,o),k(o,s),k(o,c),k(o,a),k(a,f);for(let M=0;M<m.length;M+=1)m[M]&&m[M].m(f,null);k(a,p),k(a,h),k(o,u),k(o,_),y&&y.m(_,null),k(_,V),k(_,z),k(z,O),E&&E.m(O,null),k(z,R),re(S,z,null),n[29](e),C=!0,N||(i=[ke(l,"click",n[14]),ke(l,"keydown",n[14]),ke(l,"mouseenter",n[17]),ke(l,"mouseleave",n[18]),ke(e,"click",n[13]),ke(e,"keydown",n[13])],N=!0)},p(b,D){if((!C||D[0]&66)&&ie(s,"active",b[6]&&!b[1]),D[0]&3620){d=be(b[2]);let L;for(L=0;L<d.length;L+=1){const G=ln(b,d,L);m[L]?(m[L].p(G,D),H(m[L],1)):(m[L]=nn(G),m[L].c(),H(m[L],1),m[L].m(f,null))}for(Ve(),L=d.length;L<m.length;L+=1)w(L);Ae()}b[1]?y?D[0]&2&&H(y,1):(y=rn(b),y.c(),H(y,1),y.m(_,V)):y&&(Ve(),F(y,1,1,()=>{y=null}),Ae()),b[1]?E?(E.p(b,D),D[0]&2&&H(E,1)):(E=on(b),E.c(),H(E,1),E.m(O,null)):E&&(Ve(),F(E,1,1,()=>{E=null}),Ae());const M={};!j&&D[0]&32&&(j=!0,M.hoveredIndex=b[5],Dl(()=>j=!1)),!J&&D[0]&16&&(J=!0,M.drawBars=b[4],Dl(()=>J=!1)),S.$set(M),(!C||D[0]&3&&q!==(q=pe(he("softmax",b[0],{expanded:b[1]}))+" svelte-1dtizln"))&&g(e,"class",q)},i(b){if(!C){for(let D=0;D<d.length;D+=1)H(m[D]);H(y),H(E),H(S.$$.fragment,b),C=!0}},o(b){m=m.filter(Boolean);for(let D=0;D<m.length;D+=1)F(m[D]);F(y),F(E),F(S.$$.fragment,b),C=!1},d(b){b&&$(e),Be(m,b),y&&y.d(),E&&E.d(),oe(S),n[29](null),N=!1,xe(i)}}}function Wo(n,e,l){let t,r,o,s,c,a,f,p,h;Ee(n,Ut,K=>l(19,c=K)),Ee(n,We,K=>l(20,a=K)),Ee(n,pr,K=>l(10,f=K)),Ee(n,tl,K=>l(11,p=K)),Ee(n,bl,K=>l(12,h=K));let{className:u=void 0}=e;Dt(Ct),ul("block-id","softmax");const _=fl("block-id");let V=!1;const z=()=>{V||(We.set({id:_}),q())},O=K=>{K.stopPropagation(),K.preventDefault(),V?(We.set({id:null}),C()):(We.set({id:_}),q())};let R;function S(K){V&&!R.contains(K.target)&&We.set({id:null})}$t(()=>(document.body.addEventListener("click",S),()=>{document.body.removeEventListener("click",S)}));let j,J;const q=async()=>{j=It.Flip.getState(".softmax .softmax-detail.expandable"),l(1,V=!0),await el(),dt.set(".steps",{justifyContent:"end"}),dt.set(".softmax-detail",{opacity:0}),It.Flip.from(j,{duration:.5,ease:"power2.inOut",onComplete:()=>{J==null||J()}}),dt.to(".softmax-detail",{opacity:1,duration:.2,delay:.5})},C=async()=>{j=It.Flip.getState(".softmax .softmax-detail.expandable"),l(1,V=!1),await el(),await It.Flip.from(j,{duration:.5,ease:"power2.inOut",onComplete:()=>{J==null||J()}}),dt.to(".softmax-detail",{opacity:0,duration:.2}),dt.set(".steps",{justifyContent:"start"})};let N=Rt*1.4,i=.5*Rt,d=null,m=!1;function w(){l(6,m=!0)}function y(){l(6,m=!1)}const E=K=>l(5,d=K),A=()=>l(5,d=null),v=K=>l(5,d=K),I=()=>l(5,d=null),b=K=>l(5,d=K),D=()=>l(5,d=null);function M(K){d=K,l(5,d)}function L(K){J=K,l(4,J)}function G(K){tt[K?"unshift":"push"](()=>{R=K,l(3,R)})}return n.$$set=K=>{"className"in K&&l(0,u=K.className)},n.$$.update=()=>{n.$$.dirty[0]&1048578&&a.id!==_&&V&&(l(1,V=!1),C()),n.$$.dirty[0]&524288&&l(2,t=(c==null?void 0:c.prediction)||[]),n.$$.dirty[0]&4&&l(9,r=t==null?void 0:t.map(K=>K.tokenId)),n.$$.dirty[0]&4&&l(8,o=(t==null?void 0:t.map(K=>K.logit))||[]),n.$$.dirty[0]&4&&l(7,s=(t==null?void 0:t.map(K=>K.adjustedExp))||[])},[u,V,t,R,J,d,m,s,o,r,f,p,h,z,O,N,i,w,y,c,a,E,A,v,I,b,D,M,L,G]}class Xo extends Ge{constructor(e){super(),Re(this,e,Wo,xo,je,{className:0},null,[-1,-1])}}function Ko(n){let e,l="Drop out is";return{c(){e=B("div"),e.textContent=l,this.h()},l(t){e=T(t,"DIV",{class:!0,"data-svelte-h":!0}),Ie(e)!=="svelte-ohkp45"&&(e.textContent=l),this.h()},h(){g(e,"class","dropout-content")},m(t,r){W(t,e,r)},p:Te,d(t){t&&$(e)}}}function Zo(n){let e,l;return e=new hl({props:{class:he("popover dropout-popover text-sm",n[1]),title:"Drop out",offset:n[0],triggeredBy:n[2],trigger:n[3],placement:n[4],arrow:!1,transition:ut,params:{duration:0},$$slots:{default:[Ko]},$$scope:{ctx:n}}}),{c(){le(e.$$.fragment)},l(t){ne(e.$$.fragment,t)},m(t,r){re(e,t,r),l=!0},p(t,[r]){const o={};r&2&&(o.class=he("popover dropout-popover text-sm",t[1])),r&1&&(o.offset=t[0]),r&4&&(o.triggeredBy=t[2]),r&8&&(o.trigger=t[3]),r&16&&(o.placement=t[4]),r&32&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){l||(H(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){oe(e,t)}}}function Qo(n,e,l){let{offset:t=void 0}=e,{className:r=void 0}=e,{triggeredBy:o=void 0}=e,{trigger:s="hover"}=e,{placement:c="right"}=e;return n.$$set=a=>{"offset"in a&&l(0,t=a.offset),"className"in a&&l(1,r=a.className),"triggeredBy"in a&&l(2,o=a.triggeredBy),"trigger"in a&&l(3,s=a.trigger),"placement"in a&&l(4,c=a.placement)},[t,r,o,s,c]}class Yo extends Ge{constructor(e){super(),Re(this,e,Qo,Zo,je,{offset:0,className:1,triggeredBy:2,trigger:3,placement:4})}}function Jo(n){let e,l="Layer normalization is";return{c(){e=B("div"),e.textContent=l,this.h()},l(t){e=T(t,"DIV",{class:!0,"data-svelte-h":!0}),Ie(e)!=="svelte-qw3l61"&&(e.textContent=l),this.h()},h(){g(e,"class","ln-content")},m(t,r){W(t,e,r)},p:Te,d(t){t&&$(e)}}}function es(n){let e,l;return e=new hl({props:{class:he("popover ln-popover text-sm",n[1]),title:"Layer Normalization",offset:n[0],triggeredBy:n[2],trigger:n[3],placement:n[4],arrow:!1,transition:ut,params:{duration:0},$$slots:{default:[Jo]},$$scope:{ctx:n}}}),{c(){le(e.$$.fragment)},l(t){ne(e.$$.fragment,t)},m(t,r){re(e,t,r),l=!0},p(t,[r]){const o={};r&2&&(o.class=he("popover ln-popover text-sm",t[1])),r&1&&(o.offset=t[0]),r&4&&(o.triggeredBy=t[2]),r&8&&(o.trigger=t[3]),r&16&&(o.placement=t[4]),r&32&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){l||(H(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){oe(e,t)}}}function ts(n,e,l){let{offset:t=void 0}=e,{className:r=void 0}=e,{triggeredBy:o=void 0}=e,{trigger:s="hover"}=e,{placement:c="right"}=e;return n.$$set=a=>{"offset"in a&&l(0,t=a.offset),"className"in a&&l(1,r=a.className),"triggeredBy"in a&&l(2,o=a.triggeredBy),"trigger"in a&&l(3,s=a.trigger),"placement"in a&&l(4,c=a.placement)},[t,r,o,s,c]}class ls extends Ge{constructor(e){super(),Re(this,e,ts,es,je,{offset:0,className:1,triggeredBy:2,trigger:3,placement:4})}}function ns(n){let e,l=`The GELU (Gaussian Error Linear Unit) activation function combines linear and non-linear
		behavior by scaling inputs using the Gaussian cumulative distribution function. It retains small
		negative values for smoother gradients and is effective in models like BERT.`;return{c(){e=B("div"),e.textContent=l,this.h()},l(t){e=T(t,"DIV",{class:!0,"data-svelte-h":!0}),Ie(e)!=="svelte-1ri460b"&&(e.textContent=l),this.h()},h(){g(e,"class","activation-content svelte-60plg2")},m(t,r){W(t,e,r)},p:Te,d(t){t&&$(e)}}}function rs(n){let e,l;return e=new hl({props:{class:he("popover activation-popover text-sm",n[1]),title:"GeLu Activation",offset:n[0],triggeredBy:n[2],trigger:n[3],placement:n[4],arrow:!1,transition:ut,params:{duration:0},$$slots:{default:[ns]},$$scope:{ctx:n}}}),{c(){le(e.$$.fragment)},l(t){ne(e.$$.fragment,t)},m(t,r){re(e,t,r),l=!0},p(t,[r]){const o={};r&2&&(o.class=he("popover activation-popover text-sm",t[1])),r&1&&(o.offset=t[0]),r&4&&(o.triggeredBy=t[2]),r&8&&(o.trigger=t[3]),r&16&&(o.placement=t[4]),r&32&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){l||(H(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){oe(e,t)}}}function os(n,e,l){let{offset:t=void 0}=e,{className:r=void 0}=e,{triggeredBy:o=void 0}=e,{trigger:s="hover"}=e,{placement:c="right"}=e;return n.$$set=a=>{"offset"in a&&l(0,t=a.offset),"className"in a&&l(1,r=a.className),"triggeredBy"in a&&l(2,o=a.triggeredBy),"trigger"in a&&l(3,s=a.trigger),"placement"in a&&l(4,c=a.placement)},[t,r,o,s,c]}class ss extends Ge{constructor(e){super(),Re(this,e,os,rs,je,{offset:0,className:1,triggeredBy:2,trigger:3,placement:4})}}function is(n){let e,l=`A shortcut that facilitates the flow of information by adding the input of a layer to its
		output, allowing important information to skip the layer and preventing its loss.`;return{c(){e=B("div"),e.textContent=l,this.h()},l(t){e=T(t,"DIV",{class:!0,"data-svelte-h":!0}),Ie(e)!=="svelte-1c9topx"&&(e.textContent=l),this.h()},h(){g(e,"class","residual-content svelte-9mwree")},m(t,r){W(t,e,r)},p:Te,d(t){t&&$(e)}}}function as(n){let e,l;return e=new hl({props:{class:he("popover residual-popover text-sm",n[1]),title:"Residual Connection",offset:n[0],triggeredBy:n[2],trigger:n[3],placement:n[4],arrow:!1,transition:ut,params:{duration:0},reference:n[5],$$slots:{default:[is]},$$scope:{ctx:n}}}),{c(){le(e.$$.fragment)},l(t){ne(e.$$.fragment,t)},m(t,r){re(e,t,r),l=!0},p(t,[r]){const o={};r&2&&(o.class=he("popover residual-popover text-sm",t[1])),r&1&&(o.offset=t[0]),r&4&&(o.triggeredBy=t[2]),r&8&&(o.trigger=t[3]),r&16&&(o.placement=t[4]),r&32&&(o.reference=t[5]),r&64&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){l||(H(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){oe(e,t)}}}function cs(n,e,l){let{offset:t=void 0}=e,{className:r=void 0}=e,{triggeredBy:o=void 0}=e,{trigger:s="hover"}=e,{placement:c="right"}=e,{reference:a}=e;return n.$$set=f=>{"offset"in f&&l(0,t=f.offset),"className"in f&&l(1,r=f.className),"triggeredBy"in f&&l(2,o=f.triggeredBy),"trigger"in f&&l(3,s=f.trigger),"placement"in f&&l(4,c=f.placement),"reference"in f&&l(5,a=f.reference)},[t,r,o,s,c,a]}class fs extends Ge{constructor(e){super(),Re(this,e,cs,as,je,{offset:0,className:1,triggeredBy:2,trigger:3,placement:4,reference:5})}}function fn(n,e,l){const t=n.slice();return t[15]=e[l],t[17]=l,t}function un(n,e,l){const t=n.slice();return t[15]=e[l],t[17]=l,t}function dn(n,e,l){const t=n.slice();return t[15]=e[l],t[17]=l,t}function hn(n,e,l){const t=n.slice();return t[15]=e[l],t[17]=l,t}function pn(n,e,l){const t=n.slice();return t[15]=e[l],t[17]=l,t}function us(n){let e,l,t,r,o,s,c=be(n[4]),a=[];for(let p=0;p<c.length;p+=1)a[p]=vn(fn(n,c,p));const f=p=>F(a[p],1,1,()=>{a[p]=null});return{c(){e=B("div");for(let p=0;p<a.length;p+=1)a[p].c();this.h()},l(p){e=T(p,"DIV",{id:!0,class:!0,role:!0});var h=P(e);for(let u=0;u<a.length;u+=1)a[u].l(h);h.forEach($),this.h()},h(){g(e,"id",l=`${n[0]}-end`),g(e,"class",t=pe(he("operation-col column residual",n[1]))+" svelte-cfq6hx"),g(e,"role","group")},m(p,h){W(p,e,h);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(e,null);r=!0,o||(s=[ke(e,"mouseenter",n[5]),ke(e,"mouseleave",n[6])],o=!0)},p(p,h){if(h&27){c=be(p[4]);let u;for(u=0;u<c.length;u+=1){const _=fn(p,c,u);a[u]?(a[u].p(_,h),H(a[u],1)):(a[u]=vn(_),a[u].c(),H(a[u],1),a[u].m(e,null))}for(Ve(),u=c.length;u<a.length;u+=1)f(u);Ae()}(!r||h&1&&l!==(l=`${p[0]}-end`))&&g(e,"id",l),(!r||h&2&&t!==(t=pe(he("operation-col column residual",p[1]))+" svelte-cfq6hx"))&&g(e,"class",t)},i(p){if(!r){for(let h=0;h<c.length;h+=1)H(a[h]);r=!0}},o(p){a=a.filter(Boolean);for(let h=0;h<a.length;h+=1)F(a[h]);r=!1},d(p){p&&$(e),Be(a,p),o=!1,xe(s)}}}function ds(n){let e,l,t,r,o,s,c,a,f=be(n[4]),p=[];for(let u=0;u<f.length;u+=1)p[u]=mn(un(n,f,u));const h=u=>F(p[u],1,1,()=>{p[u]=null});return t=new fs({props:{reference:`#${n[0]}-start`,triggeredBy:`[id^='${n[0]}-']`,offset:1}}),{c(){e=B("div");for(let u=0;u<p.length;u+=1)p[u].c();l=U(),le(t.$$.fragment),this.h()},l(u){e=T(u,"DIV",{id:!0,class:!0,role:!0});var _=P(e);for(let V=0;V<p.length;V+=1)p[V].l(_);l=x(_),ne(t.$$.fragment,_),_.forEach($),this.h()},h(){g(e,"id",r=`${n[0]}-start`),g(e,"class",o=pe(he("operation-col column residual",n[1]))+" svelte-cfq6hx"),g(e,"role","group")},m(u,_){W(u,e,_);for(let V=0;V<p.length;V+=1)p[V]&&p[V].m(e,null);k(e,l),re(t,e,null),s=!0,c||(a=[ke(e,"mouseenter",n[5]),ke(e,"mouseleave",n[6])],c=!0)},p(u,_){if(_&27){f=be(u[4]);let z;for(z=0;z<f.length;z+=1){const O=un(u,f,z);p[z]?(p[z].p(O,_),H(p[z],1)):(p[z]=mn(O),p[z].c(),H(p[z],1),p[z].m(e,l))}for(Ve(),z=f.length;z<p.length;z+=1)h(z);Ae()}const V={};_&1&&(V.reference=`#${u[0]}-start`),_&1&&(V.triggeredBy=`[id^='${u[0]}-']`),t.$set(V),(!s||_&1&&r!==(r=`${u[0]}-start`))&&g(e,"id",r),(!s||_&2&&o!==(o=pe(he("operation-col column residual",u[1]))+" svelte-cfq6hx"))&&g(e,"class",o)},i(u){if(!s){for(let _=0;_<f.length;_+=1)H(p[_]);H(t.$$.fragment,u),s=!0}},o(u){p=p.filter(Boolean);for(let _=0;_<p.length;_+=1)F(p[_]);F(t.$$.fragment,u),s=!1},d(u){u&&$(e),Be(p,u),oe(t),c=!1,xe(a)}}}function hs(n){let e,l,t,r,o,s,c,a=be(n[4]),f=[];for(let h=0;h<a.length;h+=1)f[h]=gn(dn(n,a,h));const p=h=>F(f[h],1,1,()=>{f[h]=null});return t=new ls({props:{triggeredBy:`#${n[0]}`}}),{c(){e=B("div");for(let h=0;h<f.length;h+=1)f[h].c();l=U(),le(t.$$.fragment),this.h()},l(h){e=T(h,"DIV",{id:!0,class:!0,role:!0});var u=P(e);for(let _=0;_<f.length;_+=1)f[_].l(u);l=x(u),ne(t.$$.fragment,u),u.forEach($),this.h()},h(){g(e,"id",n[0]),g(e,"class",r=pe(he("operation-col column ln",n[1]))+" svelte-cfq6hx"),g(e,"role","group")},m(h,u){W(h,e,u);for(let _=0;_<f.length;_+=1)f[_]&&f[_].m(e,null);k(e,l),re(t,e,null),o=!0,s||(c=[ke(e,"mouseenter",n[11]),ke(e,"mouseleave",n[12])],s=!0)},p(h,u){if(u&26){a=be(h[4]);let V;for(V=0;V<a.length;V+=1){const z=dn(h,a,V);f[V]?(f[V].p(z,u),H(f[V],1)):(f[V]=gn(z),f[V].c(),H(f[V],1),f[V].m(e,l))}for(Ve(),V=a.length;V<f.length;V+=1)p(V);Ae()}const _={};u&1&&(_.triggeredBy=`#${h[0]}`),t.$set(_),(!o||u&1)&&g(e,"id",h[0]),(!o||u&2&&r!==(r=pe(he("operation-col column ln",h[1]))+" svelte-cfq6hx"))&&g(e,"class",r)},i(h){if(!o){for(let u=0;u<a.length;u+=1)H(f[u]);H(t.$$.fragment,h),o=!0}},o(h){f=f.filter(Boolean);for(let u=0;u<f.length;u+=1)F(f[u]);F(t.$$.fragment,h),o=!1},d(h){h&&$(e),Be(f,h),oe(t),s=!1,xe(c)}}}function ps(n){let e,l,t,r,o,s,c,a=be(n[4]),f=[];for(let h=0;h<a.length;h+=1)f[h]=_n(hn(n,a,h));const p=h=>F(f[h],1,1,()=>{f[h]=null});return t=new Yo({props:{triggeredBy:`#${n[0]}`,offset:1}}),{c(){e=B("div");for(let h=0;h<f.length;h+=1)f[h].c();l=U(),le(t.$$.fragment),this.h()},l(h){e=T(h,"DIV",{id:!0,class:!0,role:!0});var u=P(e);for(let _=0;_<f.length;_+=1)f[_].l(u);l=x(u),ne(t.$$.fragment,u),u.forEach($),this.h()},h(){g(e,"id",n[0]),g(e,"class",r=pe(he("operation-col column dropout",n[1]))+" svelte-cfq6hx"),g(e,"role","group")},m(h,u){W(h,e,u);for(let _=0;_<f.length;_+=1)f[_]&&f[_].m(e,null);k(e,l),re(t,e,null),o=!0,s||(c=[ke(e,"mouseenter",n[9]),ke(e,"mouseleave",n[10])],s=!0)},p(h,u){if(u&26){a=be(h[4]);let V;for(V=0;V<a.length;V+=1){const z=hn(h,a,V);f[V]?(f[V].p(z,u),H(f[V],1)):(f[V]=_n(z),f[V].c(),H(f[V],1),f[V].m(e,l))}for(Ve(),V=a.length;V<f.length;V+=1)p(V);Ae()}const _={};u&1&&(_.triggeredBy=`#${h[0]}`),t.$set(_),(!o||u&1)&&g(e,"id",h[0]),(!o||u&2&&r!==(r=pe(he("operation-col column dropout",h[1]))+" svelte-cfq6hx"))&&g(e,"class",r)},i(h){if(!o){for(let u=0;u<a.length;u+=1)H(f[u]);H(t.$$.fragment,h),o=!0}},o(h){f=f.filter(Boolean);for(let u=0;u<f.length;u+=1)F(f[u]);F(t.$$.fragment,h),o=!1},d(h){h&&$(e),Be(f,h),oe(t),s=!1,xe(c)}}}function vs(n){let e,l,t,r,o,s,c,a=be(n[4]),f=[];for(let h=0;h<a.length;h+=1)f[h]=$n(pn(n,a,h));const p=h=>F(f[h],1,1,()=>{f[h]=null});return t=new ss({props:{triggeredBy:`#${n[0]}`,offset:1}}),{c(){e=B("div");for(let h=0;h<f.length;h+=1)f[h].c();l=U(),le(t.$$.fragment),this.h()},l(h){e=T(h,"DIV",{id:!0,class:!0,role:!0});var u=P(e);for(let _=0;_<f.length;_+=1)f[_].l(u);l=x(u),ne(t.$$.fragment,u),u.forEach($),this.h()},h(){g(e,"id",n[0]),g(e,"class",r=pe(he("operation-col column activation",n[1]))+" svelte-cfq6hx"),g(e,"role","group")},m(h,u){W(h,e,u);for(let _=0;_<f.length;_+=1)f[_]&&f[_].m(e,null);k(e,l),re(t,e,null),o=!0,s||(c=[ke(e,"mouseenter",n[7]),ke(e,"mouseleave",n[8])],s=!0)},p(h,u){if(u&26){a=be(h[4]);let V;for(V=0;V<a.length;V+=1){const z=pn(h,a,V);f[V]?(f[V].p(z,u),H(f[V],1)):(f[V]=$n(z),f[V].c(),H(f[V],1),f[V].m(e,l))}for(Ve(),V=a.length;V<f.length;V+=1)p(V);Ae()}const _={};u&1&&(_.triggeredBy=`#${h[0]}`),t.$set(_),(!o||u&1)&&g(e,"id",h[0]),(!o||u&2&&r!==(r=pe(he("operation-col column activation",h[1]))+" svelte-cfq6hx"))&&g(e,"class",r)},i(h){if(!o){for(let u=0;u<a.length;u+=1)H(f[u]);H(t.$$.fragment,h),o=!0}},o(h){f=f.filter(Boolean);for(let u=0;u<f.length;u+=1)F(f[u]);F(t.$$.fragment,h),o=!1},d(h){h&&$(e),Be(f,h),oe(t),s=!1,xe(c)}}}function vn(n){let e,l;return e=new ll({props:{id:n[0],className:he(n[1],{last:n[17]===n[4].length-1}),type:"residual-end",head:n[17]===0,active:n[3]}}),{c(){le(e.$$.fragment)},l(t){ne(e.$$.fragment,t)},m(t,r){re(e,t,r),l=!0},p(t,r){const o={};r&1&&(o.id=t[0]),r&18&&(o.className=he(t[1],{last:t[17]===t[4].length-1})),r&8&&(o.active=t[3]),e.$set(o)},i(t){l||(H(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){oe(e,t)}}}function mn(n){let e,l;return e=new ll({props:{id:n[0],className:he(n[1],{last:n[17]===n[4].length-1}),type:"residual-start",head:n[17]===0,active:n[3]}}),{c(){le(e.$$.fragment)},l(t){ne(e.$$.fragment,t)},m(t,r){re(e,t,r),l=!0},p(t,r){const o={};r&1&&(o.id=t[0]),r&18&&(o.className=he(t[1],{last:t[17]===t[4].length-1})),r&8&&(o.active=t[3]),e.$set(o)},i(t){l||(H(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){oe(e,t)}}}function gn(n){let e,l;return e=new ll({props:{className:he(n[1],{last:n[17]===n[4].length-1}),type:"ln",tail:n[17]===n[4].length-1,active:n[3]}}),{c(){le(e.$$.fragment)},l(t){ne(e.$$.fragment,t)},m(t,r){re(e,t,r),l=!0},p(t,r){const o={};r&18&&(o.className=he(t[1],{last:t[17]===t[4].length-1})),r&16&&(o.tail=t[17]===t[4].length-1),r&8&&(o.active=t[3]),e.$set(o)},i(t){l||(H(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){oe(e,t)}}}function _n(n){let e,l;return e=new ll({props:{className:he(n[1],{last:n[17]===n[4].length-1}),type:"dropout",tail:n[17]===n[4].length-1,active:n[3]}}),{c(){le(e.$$.fragment)},l(t){ne(e.$$.fragment,t)},m(t,r){re(e,t,r),l=!0},p(t,r){const o={};r&18&&(o.className=he(t[1],{last:t[17]===t[4].length-1})),r&16&&(o.tail=t[17]===t[4].length-1),r&8&&(o.active=t[3]),e.$set(o)},i(t){l||(H(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){oe(e,t)}}}function $n(n){let e,l;return e=new ll({props:{className:he(n[1],{last:n[17]===n[4].length-1}),type:"activation",tail:n[17]===n[4].length-1,active:n[3]}}),{c(){le(e.$$.fragment)},l(t){ne(e.$$.fragment,t)},m(t,r){re(e,t,r),l=!0},p(t,r){const o={};r&18&&(o.className=he(t[1],{last:t[17]===t[4].length-1})),r&16&&(o.tail=t[17]===t[4].length-1),r&8&&(o.active=t[3]),e.$set(o)},i(t){l||(H(e.$$.fragment,t),l=!0)},o(t){F(e.$$.fragment,t),l=!1},d(t){oe(e,t)}}}function ms(n){let e,l,t,r;const o=[vs,ps,hs,ds,us],s=[];function c(a,f){return a[2]==="activation"?0:a[2]==="dropout"?1:a[2]==="ln"?2:a[2]==="residual-start"?3:a[2]==="residual-end"?4:-1}return~(e=c(n))&&(l=s[e]=o[e](n)),{c(){l&&l.c(),t=vt()},l(a){l&&l.l(a),t=vt()},m(a,f){~e&&s[e].m(a,f),W(a,t,f),r=!0},p(a,[f]){let p=e;e=c(a),e===p?~e&&s[e].p(a,f):(l&&(Ve(),F(s[p],1,1,()=>{s[p]=null}),Ae()),~e?(l=s[e],l?l.p(a,f):(l=s[e]=o[e](a),l.c()),H(l,1),l.m(t.parentNode,t)):l=null)},i(a){r||(H(l),r=!0)},o(a){F(l),r=!1},d(a){a&&$(t),~e&&s[e].d(a)}}}function gs(n,e,l){let t;Ee(n,bt,S=>l(4,t=S));let{id:r}=e,{className:o=void 0}=e,{type:s=void 0}=e,c=!1;const a=()=>{l(3,c=!0);const S=document.querySelector(`#${r}-start`),j=document.querySelector(`#${r}-end`),J=lt(`.residual-connector.${r}`);J.style("opacity",1),h(J),S==null||S.classList.add("active"),j==null||j.classList.add("active")};let f;const p=()=>{l(3,c=!1);const S=document.querySelector(`#${r}-start`),j=document.querySelector(`#${r}-end`),J=lt(`.residual-connector.${r}`);J.style("opacity",0),f&&(f.kill(),J.style("stroke-dashoffset",0)),S==null||S.classList.remove("active"),j==null||j.classList.remove("active")},h=S=>{f=dt.to(S.node(),{strokeDashoffset:-50,duration:1,repeat:-1,ease:"none"})},u=()=>{l(3,c=!0)},_=()=>{l(3,c=!1)},V=()=>{l(3,c=!0)},z=()=>{l(3,c=!1)},O=()=>{l(3,c=!0)},R=()=>{l(3,c=!1)};return n.$$set=S=>{"id"in S&&l(0,r=S.id),"className"in S&&l(1,o=S.className),"type"in S&&l(2,s=S.type)},[r,o,s,c,t,a,p,u,_,V,z,O,R]}class ht extends Ge{constructor(e){super(),Re(this,e,gs,ms,je,{id:0,className:1,type:2})}}function bn(n,e,l){const t=n.slice();return t[19]=e[l],t[21]=l,t}function wn(n,e,l){const t=n.slice();return t[19]=e[l],t[21]=l,t}function kn(n,e,l){const t=n.slice();return t[19]=e[l],t[21]=l,t}function yn(n,e,l){const t=n.slice();return t[19]=e[l],t[21]=l,t}function En(n,e,l){const t=n.slice();return t[19]=e[l],t[21]=l,t}function In(n,e,l){const t=n.slice();return t[19]=e[l],t[21]=l,t}function Dn(n){let e,l="Token";return{c(){e=B("div"),e.textContent=l,this.h()},l(t){e=T(t,"DIV",{class:!0,"data-svelte-h":!0}),Ie(e)!=="svelte-6k2z6t"&&(e.textContent=l),this.h()},h(){g(e,"class","subtitle embedding-detail svelte-1iayxn1")},m(t,r){W(t,e,r)},d(t){t&&$(e)}}}function Cn(n){let e,l,t=n[19]+"",r;return{c(){e=B("div"),l=B("span"),r=me(t),this.h()},l(o){e=T(o,"DIV",{class:!0});var s=P(e);l=T(s,"SPAN",{class:!0});var c=P(l);r=ge(c,t),c.forEach($),s.forEach($),this.h()},h(){g(l,"class","label svelte-1iayxn1"),g(e,"class","cell svelte-1iayxn1"),ie(e,"last",n[21]===n[4].length-1)},m(o,s){W(o,e,s),k(e,l),k(l,r)},p(o,s){s&16&&t!==(t=o[19]+"")&&Pe(r,t),s&16&&ie(e,"last",o[21]===o[4].length-1)},d(o){o&&$(e)}}}function qn(n){let e,l,t,r,o,s="Token<br/>Embedding",c,a,f,p,h,u,_,V,z="Positional<br/>Encoding",O,R,S,j,J;e=new Oe({props:{triggeredBy:".embedding .vector",placement:"right",class:"popover",$$slots:{default:[_s]},$$scope:{ctx:n}}}),c=new Sl({props:{id:"token-embedding",$$slots:{default:[$s]},$$scope:{ctx:n}}});let q=be(n[4]),C=[];for(let v=0;v<q.length;v+=1)C[v]=Sn(En(n,q,v));const N=v=>F(C[v],1,1,()=>{C[v]=null});let i=be(n[4]),d=[];for(let v=0;v<i.length;v+=1)d[v]=Vn(yn(n,i,v));O=new Sl({props:{id:"position-embedding",$$slots:{default:[ws]},$$scope:{ctx:n}}});let m=be(n[4]),w=[];for(let v=0;v<m.length;v+=1)w[v]=An(kn(n,m,v));const y=v=>F(w[v],1,1,()=>{w[v]=null});let E=be(n[4]),A=[];for(let v=0;v<E.length;v+=1)A[v]=Nn(wn(n,E,v));return{c(){le(e.$$.fragment),l=U(),t=B("div"),r=B("div"),o=B("span"),o.innerHTML=s,le(c.$$.fragment),a=U();for(let v=0;v<C.length;v+=1)C[v].c();f=U(),p=B("div");for(let v=0;v<d.length;v+=1)d[v].c();h=U(),u=B("div"),_=B("div"),V=B("span"),V.innerHTML=z,le(O.$$.fragment),R=U();for(let v=0;v<w.length;v+=1)w[v].c();S=U(),j=B("div");for(let v=0;v<A.length;v+=1)A[v].c();this.h()},l(v){ne(e.$$.fragment,v),l=x(v),t=T(v,"DIV",{class:!0});var I=P(t);r=T(I,"DIV",{class:!0});var b=P(r);o=T(b,"SPAN",{"data-svelte-h":!0}),Ie(o)!=="svelte-1vtrff3"&&(o.innerHTML=s),ne(c.$$.fragment,b),b.forEach($),a=x(I);for(let K=0;K<C.length;K+=1)C[K].l(I);I.forEach($),f=x(v),p=T(v,"DIV",{class:!0});var D=P(p);for(let K=0;K<d.length;K+=1)d[K].l(D);D.forEach($),h=x(v),u=T(v,"DIV",{class:!0});var M=P(u);_=T(M,"DIV",{class:!0});var L=P(_);V=T(L,"SPAN",{"data-svelte-h":!0}),Ie(V)!=="svelte-12blhrw"&&(V.innerHTML=z),ne(O.$$.fragment,L),L.forEach($),R=x(M);for(let K=0;K<w.length;K+=1)w[K].l(M);M.forEach($),S=x(v),j=T(v,"DIV",{class:!0});var G=P(j);for(let K=0;K<A.length;K+=1)A[K].l(G);G.forEach($),this.h()},h(){g(r,"class","subtitle flex items-center gap-1 svelte-1iayxn1"),g(t,"class","column token-embedding embedding-detail svelte-1iayxn1"),g(p,"class","column symbol embedding-detail svelte-1iayxn1"),g(_,"class","subtitle flex gap-1 svelte-1iayxn1"),g(u,"class","column embedding-detail position-embedding svelte-1iayxn1"),g(j,"class","column symbol embedding-detail svelte-1iayxn1")},m(v,I){re(e,v,I),W(v,l,I),W(v,t,I),k(t,r),k(r,o),re(c,r,null),k(t,a);for(let b=0;b<C.length;b+=1)C[b]&&C[b].m(t,null);W(v,f,I),W(v,p,I);for(let b=0;b<d.length;b+=1)d[b]&&d[b].m(p,null);W(v,h,I),W(v,u,I),k(u,_),k(_,V),re(O,_,null),k(u,R);for(let b=0;b<w.length;b+=1)w[b]&&w[b].m(u,null);W(v,S,I),W(v,j,I);for(let b=0;b<A.length;b+=1)A[b]&&A[b].m(j,null);J=!0},p(v,I){const b={};I&134217760&&(b.$$scope={dirty:I,ctx:v}),e.$set(b);const D={};if(I&134217728&&(D.$$scope={dirty:I,ctx:v}),c.$set(D),I&16){q=be(v[4]);let L;for(L=0;L<q.length;L+=1){const G=En(v,q,L);C[L]?(C[L].p(G,I),H(C[L],1)):(C[L]=Sn(G),C[L].c(),H(C[L],1),C[L].m(t,null))}for(Ve(),L=q.length;L<C.length;L+=1)N(L);Ae()}if(I&16){i=be(v[4]);let L;for(L=0;L<i.length;L+=1){const G=yn(v,i,L);d[L]?d[L].p(G,I):(d[L]=Vn(),d[L].c(),d[L].m(p,null))}for(;L<d.length;L+=1)d[L].d(1);d.length=i.length}const M={};if(I&134217728&&(M.$$scope={dirty:I,ctx:v}),O.$set(M),I&80){m=be(v[4]);let L;for(L=0;L<m.length;L+=1){const G=kn(v,m,L);w[L]?(w[L].p(G,I),H(w[L],1)):(w[L]=An(G),w[L].c(),H(w[L],1),w[L].m(u,null))}for(Ve(),L=m.length;L<w.length;L+=1)y(L);Ae()}if(I&16){E=be(v[4]);let L;for(L=0;L<E.length;L+=1){const G=wn(v,E,L);A[L]?A[L].p(G,I):(A[L]=Nn(),A[L].c(),A[L].m(j,null))}for(;L<A.length;L+=1)A[L].d(1);A.length=E.length}},i(v){if(!J){H(e.$$.fragment,v),H(c.$$.fragment,v);for(let I=0;I<q.length;I+=1)H(C[I]);H(O.$$.fragment,v);for(let I=0;I<m.length;I+=1)H(w[I]);J=!0}},o(v){F(e.$$.fragment,v),F(c.$$.fragment,v),C=C.filter(Boolean);for(let I=0;I<C.length;I+=1)F(C[I]);F(O.$$.fragment,v),w=w.filter(Boolean);for(let I=0;I<w.length;I+=1)F(w[I]);J=!1},d(v){v&&($(l),$(t),$(f),$(p),$(h),$(u),$(S),$(j)),oe(e,v),oe(c),Be(C,v),Be(d,v),oe(O),Be(w,v),Be(A,v)}}}function _s(n){let e,l=n[5].dimension+"",t,r;return{c(){e=me("vector("),t=me(l),r=me(")")},l(o){e=ge(o,"vector("),t=ge(o,l),r=ge(o,")")},m(o,s){W(o,e,s),W(o,t,s),W(o,r,s)},p(o,s){s&32&&l!==(l=o[5].dimension+"")&&Pe(t,l)},d(o){o&&($(e),$(t),$(r))}}}function $s(n){let e;return{c(){e=me("Token Embedding is")},l(l){e=ge(l,"Token Embedding is")},m(l,t){W(l,e,t)},d(l){l&&$(e)}}}function bs(n){let e,l="id",t;return{c(){e=B("span"),e.textContent=l,t=B("br"),this.h()},l(r){e=T(r,"SPAN",{class:!0,"data-svelte-h":!0}),Ie(e)!=="svelte-1e13gni"&&(e.textContent=l),t=T(r,"BR",{}),this.h()},h(){g(e,"class","label svelte-1iayxn1")},m(r,o){W(r,e,o),W(r,t,o)},d(r){r&&($(e),$(t))}}}function Sn(n){let e,l,t='<div class="flex flex-col items-center"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 31 9" fill="none" class="w-10 text-gray-300"><path fill="currentColor" d="M30.3886 4.74352C30.5839 4.54826 30.5839 4.23168 30.3886 4.03642L27.2067 0.854435C27.0114 0.659173 26.6948 0.659173 26.4996 0.854435C26.3043 1.0497 26.3043 1.36628 26.4996 1.56154L29.328 4.38997L26.4996 7.2184C26.3043 7.41366 26.3043 7.73024 26.4996 7.9255C26.6948 8.12076 27.0114 8.12076 27.2067 7.9255L30.3886 4.74352ZM0.31958 4.88997H30.0351V3.88997H0.31958V4.88997Z"></path></svg></div>',r,o,s,c,a,f,p,h,u=(Math.random()*1e4).toFixed()+"",_,V,z;c=new pt({props:{active:!0}});let O=n[21]===0&&bs();return{c(){e=B("div"),l=B("div"),l.innerHTML=t,r=U(),o=B("div"),s=B("div"),le(c.$$.fragment),a=U(),f=B("span"),O&&O.c(),p=U(),h=B("span"),_=me(u),V=U(),this.h()},l(R){e=T(R,"DIV",{class:!0});var S=P(e);l=T(S,"DIV",{class:!0,"data-svelte-h":!0}),Ie(l)!=="svelte-lh48yp"&&(l.innerHTML=t),r=x(S),o=T(S,"DIV",{class:!0});var j=P(o);s=T(j,"DIV",{class:!0});var J=P(s);ne(c.$$.fragment,J),J.forEach($),a=x(j),f=T(j,"SPAN",{class:!0});var q=P(f);O&&O.l(q),p=x(q),h=T(q,"SPAN",{class:!0});var C=P(h);_=ge(C,u),C.forEach($),q.forEach($),j.forEach($),V=x(S),S.forEach($),this.h()},h(){g(l,"class","vocab-index ellipsis flex items-center text-right text-xs text-gray-400 svelte-1iayxn1"),g(s,"class",pe(`vector ${yl}`)+" svelte-1iayxn1"),g(h,"class","val svelte-1iayxn1"),g(f,"class","index-val text-xs svelte-1iayxn1"),g(o,"class","cell flex items-center svelte-1iayxn1"),g(e,"class","token-id flex items-center")},m(R,S){W(R,e,S),k(e,l),k(e,r),k(e,o),k(o,s),re(c,s,null),k(o,a),k(o,f),O&&O.m(f,null),k(f,p),k(f,h),k(h,_),k(e,V),z=!0},p:Te,i(R){z||(H(c.$$.fragment,R),z=!0)},o(R){F(c.$$.fragment,R),z=!1},d(R){R&&$(e),oe(c),O&&O.d()}}}function Vn(n){let e,l="+";return{c(){e=B("div"),e.textContent=l,this.h()},l(t){e=T(t,"DIV",{class:!0,"data-svelte-h":!0}),Ie(e)!=="svelte-124y0va"&&(e.textContent=l),this.h()},h(){g(e,"class","cell svelte-1iayxn1")},m(t,r){W(t,e,r)},p:Te,d(t){t&&$(e)}}}function ws(n){let e;return{c(){e=me("Positional Embedding is")},l(l){e=ge(l,"Positional Embedding is")},m(l,t){W(l,e,t)},d(l){l&&$(e)}}}function ks(n){let e,l="position",t;return{c(){e=B("span"),e.textContent=l,t=B("br"),this.h()},l(r){e=T(r,"SPAN",{class:!0,"data-svelte-h":!0}),Ie(e)!=="svelte-4n0g90"&&(e.textContent=l),t=T(r,"BR",{}),this.h()},h(){g(e,"class","label svelte-1iayxn1")},m(r,o){W(r,e,o),W(r,t,o)},d(r){r&&($(e),$(t))}}}function An(n){let e,l,t,r,o,s,c,a,f,p;t=new pt({props:{active:!0,colorScale:n[12]}});let h=n[21]===0&&ks();return{c(){e=B("div"),l=B("div"),le(t.$$.fragment),r=U(),o=B("span"),h&&h.c(),s=U(),c=B("span"),a=me(n[21]),f=U(),this.h()},l(u){e=T(u,"DIV",{class:!0});var _=P(e);l=T(_,"DIV",{class:!0});var V=P(l);ne(t.$$.fragment,V),V.forEach($),r=x(_),o=T(_,"SPAN",{class:!0});var z=P(o);h&&h.l(z),s=x(z),c=T(z,"SPAN",{class:!0});var O=P(c);a=ge(O,n[21]),O.forEach($),z.forEach($),f=x(_),_.forEach($),this.h()},h(){g(l,"class",pe(`vector ${yl}`)+" svelte-1iayxn1"),g(c,"class","val svelte-1iayxn1"),g(o,"class","index-val text-xs svelte-1iayxn1"),g(e,"class","cell flex items-center svelte-1iayxn1")},m(u,_){W(u,e,_),k(e,l),re(t,l,null),k(e,r),k(e,o),h&&h.m(o,null),k(o,s),k(o,c),k(c,a),k(e,f),p=!0},p:Te,i(u){p||(H(t.$$.fragment,u),p=!0)},o(u){F(t.$$.fragment,u),p=!1},d(u){u&&$(e),oe(t),h&&h.d()}}}function Nn(n){let e,l="=";return{c(){e=B("div"),e.textContent=l,this.h()},l(t){e=T(t,"DIV",{class:!0,"data-svelte-h":!0}),Ie(e)!=="svelte-1btrmmo"&&(e.textContent=l),this.h()},h(){g(e,"class","cell svelte-1iayxn1")},m(t,r){W(t,e,r)},p:Te,d(t){t&&$(e)}}}function ys(n){let e,l=n[5].dimension+"",t,r;return{c(){e=me("vector("),t=me(l),r=me(")")},l(o){e=ge(o,"vector("),t=ge(o,l),r=ge(o,")")},m(o,s){W(o,e,s),W(o,t,s),W(o,r,s)},p(o,s){s&32&&l!==(l=o[5].dimension+"")&&Pe(t,l)},d(o){o&&($(e),$(t),$(r))}}}function Ln(n){let e,l,t,r,o;return l=new pt({props:{active:n[3]||n[1]}}),r=new Oe({props:{placement:"right",class:"popover",$$slots:{default:[ys]},$$scope:{ctx:n}}}),{c(){e=B("div"),le(l.$$.fragment),t=U(),le(r.$$.fragment),this.h()},l(s){e=T(s,"DIV",{class:!0});var c=P(e);ne(l.$$.fragment,c),c.forEach($),t=x(s),ne(r.$$.fragment,s),this.h()},h(){g(e,"class",pe(`vector ${yl}`)+" svelte-1iayxn1"),ie(e,"last",n[21]===n[4].length-1)},m(s,c){W(s,e,c),re(l,e,null),W(s,t,c),re(r,s,c),o=!0},p(s,c){const a={};c&10&&(a.active=s[3]||s[1]),l.$set(a),(!o||c&16)&&ie(e,"last",s[21]===s[4].length-1);const f={};c&134217760&&(f.$$scope={dirty:c,ctx:s}),r.$set(f)},i(s){o||(H(l.$$.fragment,s),H(r.$$.fragment,s),o=!0)},o(s){F(l.$$.fragment,s),F(r.$$.fragment,s),o=!1},d(s){s&&($(e),$(t)),oe(l),oe(r,s)}}}function Es(n){let e,l,t="<div>Embedding</div>",r,o,s,c,a,f,p,h,u,_,V,z,O,R,S,j,J,q,C,N,i,d,m=n[1]&&Dn(),w=be(n[4]),y=[];for(let b=0;b<w.length;b+=1)y[b]=Cn(In(n,w,b));let E=n[1]&&qn(n),A=be(n[4]),v=[];for(let b=0;b<A.length;b+=1)v[b]=Ln(bn(n,A,b));const I=b=>F(v[b],1,1,()=>{v[b]=null});return R=new ht({props:{type:"dropout",id:"embedding-dropout"}}),j=new ht({props:{type:"residual-start",id:"residual-first"}}),q=new ht({props:{type:"ln",id:"embedding-ln"}}),{c(){e=B("div"),l=B("div"),l.innerHTML=t,r=U(),o=B("div"),s=B("div"),c=B("div"),m&&m.c(),a=U();for(let b=0;b<y.length;b+=1)y[b].c();f=U(),p=B("div"),h=U(),E&&E.c(),u=U(),_=B("div"),V=B("div");for(let b=0;b<v.length;b+=1)v[b].c();z=U(),O=B("div"),le(R.$$.fragment),S=U(),le(j.$$.fragment),J=U(),le(q.$$.fragment),this.h()},l(b){e=T(b,"DIV",{class:!0,role:!0});var D=P(e);l=T(D,"DIV",{class:!0,role:!0,"data-svelte-h":!0}),Ie(l)!=="svelte-szi5cj"&&(l.innerHTML=t),r=x(D),o=T(D,"DIV",{class:!0});var M=P(o);s=T(M,"DIV",{class:!0});var L=P(s);c=T(L,"DIV",{class:!0});var G=P(c);m&&m.l(G),a=x(G);for(let fe=0;fe<y.length;fe+=1)y[fe].l(G);f=x(G),p=T(G,"DIV",{class:!0}),P(p).forEach($),G.forEach($),h=x(L),E&&E.l(L),L.forEach($),u=x(M),_=T(M,"DIV",{class:!0});var K=P(_);V=T(K,"DIV",{class:!0});var de=P(V);for(let fe=0;fe<v.length;fe+=1)v[fe].l(de);de.forEach($),z=x(K),O=T(K,"DIV",{class:!0});var Q=P(O);ne(R.$$.fragment,Q),S=x(Q),ne(j.$$.fragment,Q),J=x(Q),ne(q.$$.fragment,Q),Q.forEach($),K.forEach($),M.forEach($),D.forEach($),this.h()},h(){g(l,"class","title expandable svelte-1iayxn1"),g(l,"role","none"),g(p,"class","bounding embedding-bounding svelte-1iayxn1"),ie(p,"active",n[3]&&!n[1]),g(c,"class","column token-string relative svelte-1iayxn1"),g(s,"class","token-column resizable resize-watch flex"),g(V,"class","column vectors svelte-1iayxn1"),g(O,"class","operations flex svelte-1iayxn1"),g(_,"class","vector-column relative flex"),g(o,"class","content relative svelte-1iayxn1"),g(e,"class",C=pe(he("embedding",n[0],{expanded:n[1]}))+" svelte-1iayxn1"),g(e,"role","none")},m(b,D){W(b,e,D),k(e,l),k(e,r),k(e,o),k(o,s),k(s,c),m&&m.m(c,null),k(c,a);for(let M=0;M<y.length;M+=1)y[M]&&y[M].m(c,null);k(c,f),k(c,p),k(s,h),E&&E.m(s,null),k(o,u),k(o,_),k(_,V);for(let M=0;M<v.length;M+=1)v[M]&&v[M].m(V,null);k(_,z),k(_,O),re(R,O,null),k(O,S),re(j,O,null),k(O,J),re(q,O,null),n[13](e),N=!0,i||(d=[ke(l,"click",n[8]),ke(l,"keydown",n[8]),ke(l,"mouseenter",n[9]),ke(l,"mouseleave",n[10]),ke(e,"click",n[7]),ke(e,"keydown",n[7])],i=!0)},p(b,[D]){if(b[1]?m||(m=Dn(),m.c(),m.m(c,a)):m&&(m.d(1),m=null),D&16){w=be(b[4]);let M;for(M=0;M<w.length;M+=1){const L=In(b,w,M);y[M]?y[M].p(L,D):(y[M]=Cn(L),y[M].c(),y[M].m(c,f))}for(;M<y.length;M+=1)y[M].d(1);y.length=w.length}if((!N||D&10)&&ie(p,"active",b[3]&&!b[1]),b[1]?E?(E.p(b,D),D&2&&H(E,1)):(E=qn(b),E.c(),H(E,1),E.m(s,null)):E&&(Ve(),F(E,1,1,()=>{E=null}),Ae()),D&58){A=be(b[4]);let M;for(M=0;M<A.length;M+=1){const L=bn(b,A,M);v[M]?(v[M].p(L,D),H(v[M],1)):(v[M]=Ln(L),v[M].c(),H(v[M],1),v[M].m(V,null))}for(Ve(),M=A.length;M<v.length;M+=1)I(M);Ae()}(!N||D&3&&C!==(C=pe(he("embedding",b[0],{expanded:b[1]}))+" svelte-1iayxn1"))&&g(e,"class",C)},i(b){if(!N){H(E);for(let D=0;D<A.length;D+=1)H(v[D]);H(R.$$.fragment,b),H(j.$$.fragment,b),H(q.$$.fragment,b),N=!0}},o(b){F(E),v=v.filter(Boolean);for(let D=0;D<v.length;D+=1)F(v[D]);F(R.$$.fragment,b),F(j.$$.fragment,b),F(q.$$.fragment,b),N=!1},d(b){b&&$(e),m&&m.d(),Be(y,b),E&&E.d(),Be(v,b),oe(R),oe(j),oe(q),n[13](null),i=!1,xe(d)}}}const yl="bg-gray-300";function Is(n,e,l){let t,r,o;Ee(n,We,C=>l(11,t=C)),Ee(n,bt,C=>l(4,r=C)),Ee(n,Ft,C=>l(5,o=C));const{theme:s}=Dt(Ct);let{className:c=void 0}=e;ul("block-id","embedding");const a=fl("block-id");let f=!1;const p=()=>{f||(We.set({id:a}),z())},h=C=>{C.stopPropagation(),C.preventDefault(),f?(We.set({id:null}),O()):(We.set({id:a}),z())};let u;function _(C){f&&!u.contains(C.target)&&We.set({id:null})}$t(()=>(document.body.addEventListener("click",_),()=>{document.body.removeEventListener("click",_)}));let V;const z=async()=>{V=It.Flip.getState(".embedding .token-column"),l(1,f=!0),await el(),It.Flip.from(V,{duration:.5,ease:"power2.inOut"}),dt.to(".embedding-detail",{opacity:1,duration:.5,delay:.5})},O=async()=>{V=It.Flip.getState(".embedding .token-column"),l(1,f=!1),await el(),It.Flip.from(V,{duration:.5,ease:"power2.inOut"})};let R=!1;function S(){l(3,R=!0)}function j(){l(3,R=!1)}const J=(C,N)=>lr().domain([0,.5,1]).range([s.colors.red[400],"white",s.colors.blue[400]])(C);function q(C){tt[C?"unshift":"push"](()=>{u=C,l(2,u)})}return n.$$set=C=>{"className"in C&&l(0,c=C.className)},n.$$.update=()=>{n.$$.dirty&2050&&t.id!==a&&f&&(l(1,f=!1),O())},[c,f,u,R,r,o,s,p,h,S,j,t,J,q]}class Ds extends Ge{constructor(e){super(),Re(this,e,Is,Es,je,{className:0})}}function Mn(n,e,l){const t=n.slice();return t[10]=e[l],t[12]=l,t}function Bn(n,e,l){const t=n.slice();return t[10]=e[l],t[12]=l,t}function Tn(n,e,l){const t=n.slice();return t[10]=e[l],t[12]=l,t}function Pn(n,e,l){const t=n.slice();return t[10]=e[l],t[12]=l,t}function Cs(n){let e,l=n[5].dimension+"",t,r;return{c(){e=me("vector("),t=me(l),r=me(")")},l(o){e=ge(o,"vector("),t=ge(o,l),r=ge(o,")")},m(o,s){W(o,e,s),W(o,t,s),W(o,r,s)},p(o,s){s&32&&l!==(l=o[5].dimension+"")&&Pe(t,l)},d(o){o&&($(e),$(t),$(r))}}}function zn(n){let e,l,t=n[10]+"",r,o,s,c,a,f,p,h,u,_,V,z,O;c=new pt({props:{colorScale:"purple",active:n[2]===n[12]}});function R(){return n[8](n[12])}return _=new Oe({props:{placement:"right",class:"popover",$$slots:{default:[Cs]},$$scope:{ctx:n}}}),{c(){e=B("div"),l=B("span"),r=me(t),o=U(),s=B("div"),le(c.$$.fragment),a=U(),f=B("div"),p=U(),h=B("div"),u=U(),le(_.$$.fragment),this.h()},l(S){e=T(S,"DIV",{class:!0,role:!0});var j=P(e);l=T(j,"SPAN",{class:!0});var J=P(l);r=ge(J,t),J.forEach($),o=x(j),s=T(j,"DIV",{class:!0});var q=P(s);ne(c.$$.fragment,q),a=x(q),f=T(q,"DIV",{class:!0}),P(f).forEach($),p=x(q),h=T(q,"DIV",{class:!0}),P(h).forEach($),q.forEach($),j.forEach($),u=x(S),ne(_.$$.fragment,S),this.h()},h(){g(l,"class","label float svelte-13p50c2"),g(f,"class","sub-vector x1-12 head1"),g(h,"class","sub-vector head-rest grow"),g(s,"class",pe(`vector flex flex-col  ${As}`)+" svelte-13p50c2"),g(e,"class","cell"),g(e,"role","group"),ie(e,"last",n[12]===n[4].length-1)},m(S,j){W(S,e,j),k(e,l),k(l,r),k(e,o),k(e,s),re(c,s,null),k(s,a),k(s,f),k(s,p),k(s,h),W(S,u,j),re(_,S,j),V=!0,z||(O=[ke(e,"mouseenter",R),ke(e,"mouseleave",n[9])],z=!0)},p(S,j){n=S,(!V||j&16)&&t!==(t=n[10]+"")&&Pe(r,t);const J={};j&4&&(J.active=n[2]===n[12]),c.$set(J),(!V||j&16)&&ie(e,"last",n[12]===n[4].length-1);const q={};j&65568&&(q.$$scope={dirty:j,ctx:n}),_.$set(q)},i(S){V||(H(c.$$.fragment,S),H(_.$$.fragment,S),V=!0)},o(S){F(c.$$.fragment,S),F(_.$$.fragment,S),V=!1},d(S){S&&($(e),$(u)),oe(c),oe(_,S),z=!1,xe(O)}}}function qs(n){let e,l=n[5].dimension*4+"",t,r;return{c(){e=me("vector("),t=me(l),r=me(")")},l(o){e=ge(o,"vector("),t=ge(o,l),r=ge(o,")")},m(o,s){W(o,e,s),W(o,t,s),W(o,r,s)},p(o,s){s&32&&l!==(l=o[5].dimension*4+"")&&Pe(t,l)},d(o){o&&($(e),$(t),$(r))}}}function Hn(n){let e,l,t,r,o,s,c;return t=new pt({props:{colorScale:"indigo"}}),s=new Oe({props:{placement:"right",class:"popover",$$slots:{default:[qs]},$$scope:{ctx:n}}}),{c(){e=B("div"),l=B("div"),le(t.$$.fragment),o=U(),le(s.$$.fragment),this.h()},l(a){e=T(a,"DIV",{class:!0});var f=P(e);l=T(f,"DIV",{class:!0});var p=P(l);ne(t.$$.fragment,p),p.forEach($),f.forEach($),o=x(a),ne(s.$$.fragment,a),this.h()},h(){g(l,"class",pe(he(`vector x4 ${Ns} opacity-80`))+" svelte-13p50c2"),g(e,"class",r=pe(he("cell x4",{small:n[12]!==0&&n[12]!==n[4].length-1}))+" svelte-13p50c2"),ie(e,"last",n[12]===n[4].length-1)},m(a,f){W(a,e,f),k(e,l),re(t,l,null),W(a,o,f),re(s,a,f),c=!0},p(a,f){(!c||f&16&&r!==(r=pe(he("cell x4",{small:a[12]!==0&&a[12]!==a[4].length-1}))+" svelte-13p50c2"))&&g(e,"class",r),(!c||f&16)&&ie(e,"last",a[12]===a[4].length-1);const p={};f&65568&&(p.$$scope={dirty:f,ctx:a}),s.$set(p)},i(a){c||(H(t.$$.fragment,a),H(s.$$.fragment,a),c=!0)},o(a){F(t.$$.fragment,a),F(s.$$.fragment,a),c=!1},d(a){a&&($(e),$(o)),oe(t),oe(s,a)}}}function On(n){let e,l,t=n[10]+"",r,o;return{c(){e=B("div"),l=B("span"),r=me(t),o=U(),this.h()},l(s){e=T(s,"DIV",{class:!0});var c=P(e);l=T(c,"SPAN",{class:!0});var a=P(l);r=ge(a,t),a.forEach($),o=x(c),c.forEach($),this.h()},h(){g(l,"class","label float svelte-13p50c2"),g(e,"class","cell"),ie(e,"last",n[12]===n[4].length-1)},m(s,c){W(s,e,c),k(e,l),k(l,r),k(e,o)},p(s,c){c&16&&t!==(t=s[10]+"")&&Pe(r,t),c&16&&ie(e,"last",s[12]===s[4].length-1)},d(s){s&&$(e)}}}function Ss(n){let e,l=n[5].dimension+"",t,r;return{c(){e=me("vector("),t=me(l),r=me(")")},l(o){e=ge(o,"vector("),t=ge(o,l),r=ge(o,")")},m(o,s){W(o,e,s),W(o,t,s),W(o,r,s)},p(o,s){s&32&&l!==(l=o[5].dimension+"")&&Pe(t,l)},d(o){o&&($(e),$(t),$(r))}}}function jn(n){let e,l,t,r,o,s;return t=new pt({props:{colorScale:"blue"}}),o=new Oe({props:{placement:"right",class:"popover",$$slots:{default:[Ss]},$$scope:{ctx:n}}}),{c(){e=B("div"),l=B("div"),le(t.$$.fragment),r=U(),le(o.$$.fragment),this.h()},l(c){e=T(c,"DIV",{class:!0});var a=P(e);l=T(a,"DIV",{class:!0});var f=P(l);ne(t.$$.fragment,f),f.forEach($),a.forEach($),r=x(c),ne(o.$$.fragment,c),this.h()},h(){g(l,"class",pe(`vector ${Ls}`)+" svelte-13p50c2"),g(e,"class","cell"),ie(e,"last",n[12]===n[4].length-1)},m(c,a){W(c,e,a),k(e,l),re(t,l,null),W(c,r,a),re(o,c,a),s=!0},p(c,a){(!s||a&16)&&ie(e,"last",c[12]===c[4].length-1);const f={};a&65568&&(f.$$scope={dirty:a,ctx:c}),o.$set(f)},i(c){s||(H(t.$$.fragment,c),H(o.$$.fragment,c),s=!0)},o(c){F(t.$$.fragment,c),F(o.$$.fragment,c),s=!1},d(c){c&&($(e),$(r)),oe(t),oe(o,c)}}}function Vs(n){let e,l,t="MLP",r,o,s,c,a,f,p,h,u,_,V,z,O,R,S,j,J,q,C,N,i,d,m,w,y,E,A,v,I,b,D,M,L,G,K,de=be(n[4]),Q=[];for(let Z=0;Z<de.length;Z+=1)Q[Z]=zn(Pn(n,de,Z));const fe=Z=>F(Q[Z],1,1,()=>{Q[Z]=null});_=new ht({props:{type:"dropout",id:"mlp-first-dropout"}}),z=new ht({props:{type:"residual-end",id:"residual-first"}}),R=new ht({props:{type:"ln",id:"mlp-first-ln"}}),j=new ht({props:{type:"residual-start",id:"residual-second"}});let ve=be(n[4]),ae=[];for(let Z=0;Z<ve.length;Z+=1)ae[Z]=Hn(Tn(n,ve,Z));const He=Z=>F(ae[Z],1,1,()=>{ae[Z]=null});d=new ht({props:{type:"activation",id:"mlp-activation",className:"x4"}});let ee=be(n[4]),te=[];for(let Z=0;Z<ee.length;Z+=1)te[Z]=On(Bn(n,ee,Z));A=new ht({props:{type:"residual-end",id:"residual-second"}}),I=new ht({props:{type:"ln",id:"mlp-second-ln"}});let X=be(n[4]),$e=[];for(let Z=0;Z<X.length;Z+=1)$e[Z]=jn(Mn(n,X,Z));const Se=Z=>F($e[Z],1,1,()=>{$e[Z]=null});return{c(){e=B("div"),l=B("div"),l.textContent=t,r=U(),o=B("div"),s=B("div"),c=U(),a=B("div"),f=U(),p=B("div"),h=B("div");for(let Z=0;Z<Q.length;Z+=1)Q[Z].c();u=U(),le(_.$$.fragment),V=U(),le(z.$$.fragment),O=U(),le(R.$$.fragment),S=U(),le(j.$$.fragment),J=U(),q=B("div"),C=B("div"),N=B("div");for(let Z=0;Z<ae.length;Z+=1)ae[Z].c();i=U(),le(d.$$.fragment),m=U(),w=B("div"),y=B("div");for(let Z=0;Z<te.length;Z+=1)te[Z].c();E=U(),le(A.$$.fragment),v=U(),le(I.$$.fragment),b=U(),D=B("div");for(let Z=0;Z<$e.length;Z+=1)$e[Z].c();this.h()},l(Z){e=T(Z,"DIV",{class:!0});var se=P(e);l=T(se,"DIV",{class:!0,role:!0,"data-svelte-h":!0}),Ie(l)!=="svelte-50ab67"&&(l.textContent=t),r=x(se),o=T(se,"DIV",{class:!0});var Y=P(o);s=T(Y,"DIV",{class:!0}),P(s).forEach($),c=x(Y),a=T(Y,"DIV",{class:!0}),P(a).forEach($),f=x(Y),p=T(Y,"DIV",{class:!0});var De=P(p);h=T(De,"DIV",{class:!0});var Ue=P(h);for(let Le=0;Le<Q.length;Le+=1)Q[Le].l(Ue);Ue.forEach($),u=x(De),ne(_.$$.fragment,De),V=x(De),ne(z.$$.fragment,De),O=x(De),ne(R.$$.fragment,De),S=x(De),ne(j.$$.fragment,De),De.forEach($),J=x(Y),q=T(Y,"DIV",{class:!0});var Ne=P(q);C=T(Ne,"DIV",{class:!0});var nt=P(C);N=T(nt,"DIV",{class:!0});var mt=P(N);for(let Le=0;Le<ae.length;Le+=1)ae[Le].l(mt);mt.forEach($),i=x(nt),ne(d.$$.fragment,nt),nt.forEach($),m=x(Ne),w=T(Ne,"DIV",{class:!0});var Me=P(w);y=T(Me,"DIV",{class:!0});var Ze=P(y);for(let Le=0;Le<te.length;Le+=1)te[Le].l(Ze);Ze.forEach($),E=x(Me),ne(A.$$.fragment,Me),v=x(Me),ne(I.$$.fragment,Me),b=x(Me),D=T(Me,"DIV",{class:!0});var gt=P(D);for(let Le=0;Le<$e.length;Le+=1)$e[Le].l(gt);gt.forEach($),Me.forEach($),Ne.forEach($),Y.forEach($),se.forEach($),this.h()},h(){g(l,"class","title"),g(l,"role","group"),g(s,"class","bounding transformer-bounding svelte-13p50c2"),ie(s,"active",n[3]),g(a,"class","bounding mlp-bounding svelte-13p50c2"),ie(a,"active",n[1]),g(h,"class","column initial"),g(p,"class","layer first-layer flex svelte-13p50c2"),g(N,"class","column"),g(C,"class","projections flex"),g(y,"class","column out-label"),g(D,"class","column out"),g(w,"class","ouputs flex"),g(q,"class","layer second-layer flex justify-between svelte-13p50c2"),g(o,"class","content relative svelte-13p50c2"),g(e,"class",M=pe(he("mlp",n[0]))+" svelte-13p50c2")},m(Z,se){W(Z,e,se),k(e,l),k(e,r),k(e,o),k(o,s),k(o,c),k(o,a),k(o,f),k(o,p),k(p,h);for(let Y=0;Y<Q.length;Y+=1)Q[Y]&&Q[Y].m(h,null);k(p,u),re(_,p,null),k(p,V),re(z,p,null),k(p,O),re(R,p,null),k(p,S),re(j,p,null),k(o,J),k(o,q),k(q,C),k(C,N);for(let Y=0;Y<ae.length;Y+=1)ae[Y]&&ae[Y].m(N,null);k(C,i),re(d,C,null),k(q,m),k(q,w),k(w,y);for(let Y=0;Y<te.length;Y+=1)te[Y]&&te[Y].m(y,null);k(w,E),re(A,w,null),k(w,v),re(I,w,null),k(w,b),k(w,D);for(let Y=0;Y<$e.length;Y+=1)$e[Y]&&$e[Y].m(D,null);L=!0,G||(K=[ke(l,"mouseenter",n[6]),ke(l,"mouseleave",n[7])],G=!0)},p(Z,[se]){if((!L||se&8)&&ie(s,"active",Z[3]),(!L||se&2)&&ie(a,"active",Z[1]),se&52){de=be(Z[4]);let Y;for(Y=0;Y<de.length;Y+=1){const De=Pn(Z,de,Y);Q[Y]?(Q[Y].p(De,se),H(Q[Y],1)):(Q[Y]=zn(De),Q[Y].c(),H(Q[Y],1),Q[Y].m(h,null))}for(Ve(),Y=de.length;Y<Q.length;Y+=1)fe(Y);Ae()}if(se&48){ve=be(Z[4]);let Y;for(Y=0;Y<ve.length;Y+=1){const De=Tn(Z,ve,Y);ae[Y]?(ae[Y].p(De,se),H(ae[Y],1)):(ae[Y]=Hn(De),ae[Y].c(),H(ae[Y],1),ae[Y].m(N,null))}for(Ve(),Y=ve.length;Y<ae.length;Y+=1)He(Y);Ae()}if(se&16){ee=be(Z[4]);let Y;for(Y=0;Y<ee.length;Y+=1){const De=Bn(Z,ee,Y);te[Y]?te[Y].p(De,se):(te[Y]=On(De),te[Y].c(),te[Y].m(y,null))}for(;Y<te.length;Y+=1)te[Y].d(1);te.length=ee.length}if(se&48){X=be(Z[4]);let Y;for(Y=0;Y<X.length;Y+=1){const De=Mn(Z,X,Y);$e[Y]?($e[Y].p(De,se),H($e[Y],1)):($e[Y]=jn(De),$e[Y].c(),H($e[Y],1),$e[Y].m(D,null))}for(Ve(),Y=X.length;Y<$e.length;Y+=1)Se(Y);Ae()}(!L||se&1&&M!==(M=pe(he("mlp",Z[0]))+" svelte-13p50c2"))&&g(e,"class",M)},i(Z){if(!L){for(let se=0;se<de.length;se+=1)H(Q[se]);H(_.$$.fragment,Z),H(z.$$.fragment,Z),H(R.$$.fragment,Z),H(j.$$.fragment,Z);for(let se=0;se<ve.length;se+=1)H(ae[se]);H(d.$$.fragment,Z),H(A.$$.fragment,Z),H(I.$$.fragment,Z);for(let se=0;se<X.length;se+=1)H($e[se]);L=!0}},o(Z){Q=Q.filter(Boolean);for(let se=0;se<Q.length;se+=1)F(Q[se]);F(_.$$.fragment,Z),F(z.$$.fragment,Z),F(R.$$.fragment,Z),F(j.$$.fragment,Z),ae=ae.filter(Boolean);for(let se=0;se<ae.length;se+=1)F(ae[se]);F(d.$$.fragment,Z),F(A.$$.fragment,Z),F(I.$$.fragment,Z),$e=$e.filter(Boolean);for(let se=0;se<$e.length;se+=1)F($e[se]);L=!1},d(Z){Z&&$(e),Be(Q,Z),oe(_),oe(z),oe(R),oe(j),Be(ae,Z),oe(d),Be(te,Z),oe(A),oe(I),Be($e,Z),G=!1,xe(K)}}}const As="bg-purple-200",Ns="bg-indigo-200",Ls="bg-blue-200";function Ms(n,e,l){let t,r,o;Ee(n,Jt,_=>l(3,t=_)),Ee(n,bt,_=>l(4,r=_)),Ee(n,Ft,_=>l(5,o=_));let{className:s=void 0}=e;ul("block-id","mlp");let c=!1;function a(){l(1,c=!0)}function f(){l(1,c=!1)}let p=null;const h=_=>{l(2,p=_)},u=()=>{l(2,p=null)};return n.$$set=_=>{"className"in _&&l(0,s=_.className)},[s,c,p,t,r,o,a,f,h,u]}class Bs extends Ge{constructor(e){super(),Re(this,e,Ms,Vs,je,{className:0})}}var Ts=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,vl=Math.ceil,st=Math.floor,et="[BigNumber Error] ",Gn=et+"Number primitive has more than 15 significant digits: ",ft=1e14,we=14,ml=9007199254740991,gl=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],kt=1e7,Fe=1e9;function cr(n){var e,l,t,r=S.prototype={constructor:S,toString:null,valueOf:null},o=new S(1),s=20,c=4,a=-7,f=21,p=-1e7,h=1e7,u=!1,_=1,V=0,z={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},O="0123456789abcdefghijklmnopqrstuvwxyz",R=!0;function S(i,d){var m,w,y,E,A,v,I,b,D=this;if(!(D instanceof S))return new S(i,d);if(d==null){if(i&&i._isBigNumber===!0){D.s=i.s,!i.c||i.e>h?D.c=D.e=null:i.e<p?D.c=[D.e=0]:(D.e=i.e,D.c=i.c.slice());return}if((v=typeof i=="number")&&i*0==0){if(D.s=1/i<0?(i=-i,-1):1,i===~~i){for(E=0,A=i;A>=10;A/=10,E++);E>h?D.c=D.e=null:(D.e=E,D.c=[i]);return}b=String(i)}else{if(!Ts.test(b=String(i)))return t(D,b,v);D.s=b.charCodeAt(0)==45?(b=b.slice(1),-1):1}(E=b.indexOf("."))>-1&&(b=b.replace(".","")),(A=b.search(/e/i))>0?(E<0&&(E=A),E+=+b.slice(A+1),b=b.substring(0,A)):E<0&&(E=b.length)}else{if(ze(d,2,O.length,"Base"),d==10&&R)return D=new S(i),C(D,s+D.e+1,c);if(b=String(i),v=typeof i=="number"){if(i*0!=0)return t(D,b,v,d);if(D.s=1/i<0?(b=b.slice(1),-1):1,S.DEBUG&&b.replace(/^0\.0*|\./,"").length>15)throw Error(Gn+i)}else D.s=b.charCodeAt(0)===45?(b=b.slice(1),-1):1;for(m=O.slice(0,d),E=A=0,I=b.length;A<I;A++)if(m.indexOf(w=b.charAt(A))<0){if(w=="."){if(A>E){E=I;continue}}else if(!y&&(b==b.toUpperCase()&&(b=b.toLowerCase())||b==b.toLowerCase()&&(b=b.toUpperCase()))){y=!0,A=-1,E=0;continue}return t(D,String(i),v,d)}v=!1,b=l(b,d,10,D.s),(E=b.indexOf("."))>-1?b=b.replace(".",""):E=b.length}for(A=0;b.charCodeAt(A)===48;A++);for(I=b.length;b.charCodeAt(--I)===48;);if(b=b.slice(A,++I)){if(I-=A,v&&S.DEBUG&&I>15&&(i>ml||i!==st(i)))throw Error(Gn+D.s*i);if((E=E-A-1)>h)D.c=D.e=null;else if(E<p)D.c=[D.e=0];else{if(D.e=E,D.c=[],A=(E+1)%we,E<0&&(A+=we),A<I){for(A&&D.c.push(+b.slice(0,A)),I-=we;A<I;)D.c.push(+b.slice(A,A+=we));A=we-(b=b.slice(A)).length}else A-=I;for(;A--;b+="0");D.c.push(+b)}}else D.c=[D.e=0]}S.clone=cr,S.ROUND_UP=0,S.ROUND_DOWN=1,S.ROUND_CEIL=2,S.ROUND_FLOOR=3,S.ROUND_HALF_UP=4,S.ROUND_HALF_DOWN=5,S.ROUND_HALF_EVEN=6,S.ROUND_HALF_CEIL=7,S.ROUND_HALF_FLOOR=8,S.EUCLID=9,S.config=S.set=function(i){var d,m;if(i!=null)if(typeof i=="object"){if(i.hasOwnProperty(d="DECIMAL_PLACES")&&(m=i[d],ze(m,0,Fe,d),s=m),i.hasOwnProperty(d="ROUNDING_MODE")&&(m=i[d],ze(m,0,8,d),c=m),i.hasOwnProperty(d="EXPONENTIAL_AT")&&(m=i[d],m&&m.pop?(ze(m[0],-Fe,0,d),ze(m[1],0,Fe,d),a=m[0],f=m[1]):(ze(m,-Fe,Fe,d),a=-(f=m<0?-m:m))),i.hasOwnProperty(d="RANGE"))if(m=i[d],m&&m.pop)ze(m[0],-Fe,-1,d),ze(m[1],1,Fe,d),p=m[0],h=m[1];else if(ze(m,-Fe,Fe,d),m)p=-(h=m<0?-m:m);else throw Error(et+d+" cannot be zero: "+m);if(i.hasOwnProperty(d="CRYPTO"))if(m=i[d],m===!!m)if(m)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))u=m;else throw u=!m,Error(et+"crypto unavailable");else u=m;else throw Error(et+d+" not true or false: "+m);if(i.hasOwnProperty(d="MODULO_MODE")&&(m=i[d],ze(m,0,9,d),_=m),i.hasOwnProperty(d="POW_PRECISION")&&(m=i[d],ze(m,0,Fe,d),V=m),i.hasOwnProperty(d="FORMAT"))if(m=i[d],typeof m=="object")z=m;else throw Error(et+d+" not an object: "+m);if(i.hasOwnProperty(d="ALPHABET"))if(m=i[d],typeof m=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(m))R=m.slice(0,10)=="0123456789",O=m;else throw Error(et+d+" invalid: "+m)}else throw Error(et+"Object expected: "+i);return{DECIMAL_PLACES:s,ROUNDING_MODE:c,EXPONENTIAL_AT:[a,f],RANGE:[p,h],CRYPTO:u,MODULO_MODE:_,POW_PRECISION:V,FORMAT:z,ALPHABET:O}},S.isBigNumber=function(i){if(!i||i._isBigNumber!==!0)return!1;if(!S.DEBUG)return!0;var d,m,w=i.c,y=i.e,E=i.s;e:if({}.toString.call(w)=="[object Array]"){if((E===1||E===-1)&&y>=-Fe&&y<=Fe&&y===st(y)){if(w[0]===0){if(y===0&&w.length===1)return!0;break e}if(d=(y+1)%we,d<1&&(d+=we),String(w[0]).length==d){for(d=0;d<w.length;d++)if(m=w[d],m<0||m>=ft||m!==st(m))break e;if(m!==0)return!0}}}else if(w===null&&y===null&&(E===null||E===1||E===-1))return!0;throw Error(et+"Invalid BigNumber: "+i)},S.maximum=S.max=function(){return J(arguments,-1)},S.minimum=S.min=function(){return J(arguments,1)},S.random=function(){var i=9007199254740992,d=Math.random()*i&2097151?function(){return st(Math.random()*i)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(m){var w,y,E,A,v,I=0,b=[],D=new S(o);if(m==null?m=s:ze(m,0,Fe),A=vl(m/we),u)if(crypto.getRandomValues){for(w=crypto.getRandomValues(new Uint32Array(A*=2));I<A;)v=w[I]*131072+(w[I+1]>>>11),v>=9e15?(y=crypto.getRandomValues(new Uint32Array(2)),w[I]=y[0],w[I+1]=y[1]):(b.push(v%1e14),I+=2);I=A/2}else if(crypto.randomBytes){for(w=crypto.randomBytes(A*=7);I<A;)v=(w[I]&31)*281474976710656+w[I+1]*1099511627776+w[I+2]*4294967296+w[I+3]*16777216+(w[I+4]<<16)+(w[I+5]<<8)+w[I+6],v>=9e15?crypto.randomBytes(7).copy(w,I):(b.push(v%1e14),I+=7);I=A/7}else throw u=!1,Error(et+"crypto unavailable");if(!u)for(;I<A;)v=d(),v<9e15&&(b[I++]=v%1e14);for(A=b[--I],m%=we,A&&m&&(v=gl[we-m],b[I]=st(A/v)*v);b[I]===0;b.pop(),I--);if(I<0)b=[E=0];else{for(E=-1;b[0]===0;b.splice(0,1),E-=we);for(I=1,v=b[0];v>=10;v/=10,I++);I<we&&(E-=we-I)}return D.e=E,D.c=b,D}}(),S.sum=function(){for(var i=1,d=arguments,m=new S(d[0]);i<d.length;)m=m.plus(d[i++]);return m},l=function(){var i="0123456789";function d(m,w,y,E){for(var A,v=[0],I,b=0,D=m.length;b<D;){for(I=v.length;I--;v[I]*=w);for(v[0]+=E.indexOf(m.charAt(b++)),A=0;A<v.length;A++)v[A]>y-1&&(v[A+1]==null&&(v[A+1]=0),v[A+1]+=v[A]/y|0,v[A]%=y)}return v.reverse()}return function(m,w,y,E,A){var v,I,b,D,M,L,G,K,de=m.indexOf("."),Q=s,fe=c;for(de>=0&&(D=V,V=0,m=m.replace(".",""),K=new S(w),L=K.pow(m.length-de),V=D,K.c=d(_t(ot(L.c),L.e,"0"),10,y,i),K.e=K.c.length),G=d(m,w,y,A?(v=O,i):(v=i,O)),b=D=G.length;G[--D]==0;G.pop());if(!G[0])return v.charAt(0);if(de<0?--b:(L.c=G,L.e=b,L.s=E,L=e(L,K,Q,fe,y),G=L.c,M=L.r,b=L.e),I=b+Q+1,de=G[I],D=y/2,M=M||I<0||G[I+1]!=null,M=fe<4?(de!=null||M)&&(fe==0||fe==(L.s<0?3:2)):de>D||de==D&&(fe==4||M||fe==6&&G[I-1]&1||fe==(L.s<0?8:7)),I<1||!G[0])m=M?_t(v.charAt(1),-Q,v.charAt(0)):v.charAt(0);else{if(G.length=I,M)for(--y;++G[--I]>y;)G[I]=0,I||(++b,G=[1].concat(G));for(D=G.length;!G[--D];);for(de=0,m="";de<=D;m+=v.charAt(G[de++]));m=_t(m,b,v.charAt(0))}return m}}(),e=function(){function i(w,y,E){var A,v,I,b,D=0,M=w.length,L=y%kt,G=y/kt|0;for(w=w.slice();M--;)I=w[M]%kt,b=w[M]/kt|0,A=G*I+b*L,v=L*I+A%kt*kt+D,D=(v/E|0)+(A/kt|0)+G*b,w[M]=v%E;return D&&(w=[D].concat(w)),w}function d(w,y,E,A){var v,I;if(E!=A)I=E>A?1:-1;else for(v=I=0;v<E;v++)if(w[v]!=y[v]){I=w[v]>y[v]?1:-1;break}return I}function m(w,y,E,A){for(var v=0;E--;)w[E]-=v,v=w[E]<y[E]?1:0,w[E]=v*A+w[E]-y[E];for(;!w[0]&&w.length>1;w.splice(0,1));}return function(w,y,E,A,v){var I,b,D,M,L,G,K,de,Q,fe,ve,ae,He,ee,te,X,$e,Se=w.s==y.s?1:-1,Z=w.c,se=y.c;if(!Z||!Z[0]||!se||!se[0])return new S(!w.s||!y.s||(Z?se&&Z[0]==se[0]:!se)?NaN:Z&&Z[0]==0||!se?Se*0:Se/0);for(de=new S(Se),Q=de.c=[],b=w.e-y.e,Se=E+b+1,v||(v=ft,b=it(w.e/we)-it(y.e/we),Se=Se/we|0),D=0;se[D]==(Z[D]||0);D++);if(se[D]>(Z[D]||0)&&b--,Se<0)Q.push(1),M=!0;else{for(ee=Z.length,X=se.length,D=0,Se+=2,L=st(v/(se[0]+1)),L>1&&(se=i(se,L,v),Z=i(Z,L,v),X=se.length,ee=Z.length),He=X,fe=Z.slice(0,X),ve=fe.length;ve<X;fe[ve++]=0);$e=se.slice(),$e=[0].concat($e),te=se[0],se[1]>=v/2&&te++;do{if(L=0,I=d(se,fe,X,ve),I<0){if(ae=fe[0],X!=ve&&(ae=ae*v+(fe[1]||0)),L=st(ae/te),L>1)for(L>=v&&(L=v-1),G=i(se,L,v),K=G.length,ve=fe.length;d(G,fe,K,ve)==1;)L--,m(G,X<K?$e:se,K,v),K=G.length,I=1;else L==0&&(I=L=1),G=se.slice(),K=G.length;if(K<ve&&(G=[0].concat(G)),m(fe,G,ve,v),ve=fe.length,I==-1)for(;d(se,fe,X,ve)<1;)L++,m(fe,X<ve?$e:se,ve,v),ve=fe.length}else I===0&&(L++,fe=[0]);Q[D++]=L,fe[0]?fe[ve++]=Z[He]||0:(fe=[Z[He]],ve=1)}while((He++<ee||fe[0]!=null)&&Se--);M=fe[0]!=null,Q[0]||Q.splice(0,1)}if(v==ft){for(D=1,Se=Q[0];Se>=10;Se/=10,D++);C(de,E+(de.e=D+b*we-1)+1,A,M)}else de.e=b,de.r=+M;return de}}();function j(i,d,m,w){var y,E,A,v,I;if(m==null?m=c:ze(m,0,8),!i.c)return i.toString();if(y=i.c[0],A=i.e,d==null)I=ot(i.c),I=w==1||w==2&&(A<=a||A>=f)?il(I,A):_t(I,A,"0");else if(i=C(new S(i),d,m),E=i.e,I=ot(i.c),v=I.length,w==1||w==2&&(d<=E||E<=a)){for(;v<d;I+="0",v++);I=il(I,E)}else if(d-=A,I=_t(I,E,"0"),E+1>v){if(--d>0)for(I+=".";d--;I+="0");}else if(d+=E-v,d>0)for(E+1==v&&(I+=".");d--;I+="0");return i.s<0&&y?"-"+I:I}function J(i,d){for(var m,w,y=1,E=new S(i[0]);y<i.length;y++)w=new S(i[y]),(!w.s||(m=Tt(E,w))===d||m===0&&E.s===d)&&(E=w);return E}function q(i,d,m){for(var w=1,y=d.length;!d[--y];d.pop());for(y=d[0];y>=10;y/=10,w++);return(m=w+m*we-1)>h?i.c=i.e=null:m<p?i.c=[i.e=0]:(i.e=m,i.c=d),i}t=function(){var i=/^(-?)0([xbo])(?=\w[\w.]*$)/i,d=/^([^.]+)\.$/,m=/^\.([^.]+)$/,w=/^-?(Infinity|NaN)$/,y=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(E,A,v,I){var b,D=v?A:A.replace(y,"");if(w.test(D))E.s=isNaN(D)?null:D<0?-1:1;else{if(!v&&(D=D.replace(i,function(M,L,G){return b=(G=G.toLowerCase())=="x"?16:G=="b"?2:8,!I||I==b?L:M}),I&&(b=I,D=D.replace(d,"$1").replace(m,"0.$1")),A!=D))return new S(D,b);if(S.DEBUG)throw Error(et+"Not a"+(I?" base "+I:"")+" number: "+A);E.s=null}E.c=E.e=null}}();function C(i,d,m,w){var y,E,A,v,I,b,D,M=i.c,L=gl;if(M){e:{for(y=1,v=M[0];v>=10;v/=10,y++);if(E=d-y,E<0)E+=we,A=d,I=M[b=0],D=st(I/L[y-A-1]%10);else if(b=vl((E+1)/we),b>=M.length)if(w){for(;M.length<=b;M.push(0));I=D=0,y=1,E%=we,A=E-we+1}else break e;else{for(I=v=M[b],y=1;v>=10;v/=10,y++);E%=we,A=E-we+y,D=A<0?0:st(I/L[y-A-1]%10)}if(w=w||d<0||M[b+1]!=null||(A<0?I:I%L[y-A-1]),w=m<4?(D||w)&&(m==0||m==(i.s<0?3:2)):D>5||D==5&&(m==4||w||m==6&&(E>0?A>0?I/L[y-A]:0:M[b-1])%10&1||m==(i.s<0?8:7)),d<1||!M[0])return M.length=0,w?(d-=i.e+1,M[0]=L[(we-d%we)%we],i.e=-d||0):M[0]=i.e=0,i;if(E==0?(M.length=b,v=1,b--):(M.length=b+1,v=L[we-E],M[b]=A>0?st(I/L[y-A]%L[A])*v:0),w)for(;;)if(b==0){for(E=1,A=M[0];A>=10;A/=10,E++);for(A=M[0]+=v,v=1;A>=10;A/=10,v++);E!=v&&(i.e++,M[0]==ft&&(M[0]=1));break}else{if(M[b]+=v,M[b]!=ft)break;M[b--]=0,v=1}for(E=M.length;M[--E]===0;M.pop());}i.e>h?i.c=i.e=null:i.e<p&&(i.c=[i.e=0])}return i}function N(i){var d,m=i.e;return m===null?i.toString():(d=ot(i.c),d=m<=a||m>=f?il(d,m):_t(d,m,"0"),i.s<0?"-"+d:d)}return r.absoluteValue=r.abs=function(){var i=new S(this);return i.s<0&&(i.s=1),i},r.comparedTo=function(i,d){return Tt(this,new S(i,d))},r.decimalPlaces=r.dp=function(i,d){var m,w,y,E=this;if(i!=null)return ze(i,0,Fe),d==null?d=c:ze(d,0,8),C(new S(E),i+E.e+1,d);if(!(m=E.c))return null;if(w=((y=m.length-1)-it(this.e/we))*we,y=m[y])for(;y%10==0;y/=10,w--);return w<0&&(w=0),w},r.dividedBy=r.div=function(i,d){return e(this,new S(i,d),s,c)},r.dividedToIntegerBy=r.idiv=function(i,d){return e(this,new S(i,d),0,1)},r.exponentiatedBy=r.pow=function(i,d){var m,w,y,E,A,v,I,b,D,M=this;if(i=new S(i),i.c&&!i.isInteger())throw Error(et+"Exponent not an integer: "+N(i));if(d!=null&&(d=new S(d)),v=i.e>14,!M.c||!M.c[0]||M.c[0]==1&&!M.e&&M.c.length==1||!i.c||!i.c[0])return D=new S(Math.pow(+N(M),v?i.s*(2-sl(i)):+N(i))),d?D.mod(d):D;if(I=i.s<0,d){if(d.c?!d.c[0]:!d.s)return new S(NaN);w=!I&&M.isInteger()&&d.isInteger(),w&&(M=M.mod(d))}else{if(i.e>9&&(M.e>0||M.e<-1||(M.e==0?M.c[0]>1||v&&M.c[1]>=24e7:M.c[0]<8e13||v&&M.c[0]<=9999975e7)))return E=M.s<0&&sl(i)?-0:0,M.e>-1&&(E=1/E),new S(I?1/E:E);V&&(E=vl(V/we+2))}for(v?(m=new S(.5),I&&(i.s=1),b=sl(i)):(y=Math.abs(+N(i)),b=y%2),D=new S(o);;){if(b){if(D=D.times(M),!D.c)break;E?D.c.length>E&&(D.c.length=E):w&&(D=D.mod(d))}if(y){if(y=st(y/2),y===0)break;b=y%2}else if(i=i.times(m),C(i,i.e+1,1),i.e>14)b=sl(i);else{if(y=+N(i),y===0)break;b=y%2}M=M.times(M),E?M.c&&M.c.length>E&&(M.c.length=E):w&&(M=M.mod(d))}return w?D:(I&&(D=o.div(D)),d?D.mod(d):E?C(D,V,c,A):D)},r.integerValue=function(i){var d=new S(this);return i==null?i=c:ze(i,0,8),C(d,d.e+1,i)},r.isEqualTo=r.eq=function(i,d){return Tt(this,new S(i,d))===0},r.isFinite=function(){return!!this.c},r.isGreaterThan=r.gt=function(i,d){return Tt(this,new S(i,d))>0},r.isGreaterThanOrEqualTo=r.gte=function(i,d){return(d=Tt(this,new S(i,d)))===1||d===0},r.isInteger=function(){return!!this.c&&it(this.e/we)>this.c.length-2},r.isLessThan=r.lt=function(i,d){return Tt(this,new S(i,d))<0},r.isLessThanOrEqualTo=r.lte=function(i,d){return(d=Tt(this,new S(i,d)))===-1||d===0},r.isNaN=function(){return!this.s},r.isNegative=function(){return this.s<0},r.isPositive=function(){return this.s>0},r.isZero=function(){return!!this.c&&this.c[0]==0},r.minus=function(i,d){var m,w,y,E,A=this,v=A.s;if(i=new S(i,d),d=i.s,!v||!d)return new S(NaN);if(v!=d)return i.s=-d,A.plus(i);var I=A.e/we,b=i.e/we,D=A.c,M=i.c;if(!I||!b){if(!D||!M)return D?(i.s=-d,i):new S(M?A:NaN);if(!D[0]||!M[0])return M[0]?(i.s=-d,i):new S(D[0]?A:c==3?-0:0)}if(I=it(I),b=it(b),D=D.slice(),v=I-b){for((E=v<0)?(v=-v,y=D):(b=I,y=M),y.reverse(),d=v;d--;y.push(0));y.reverse()}else for(w=(E=(v=D.length)<(d=M.length))?v:d,v=d=0;d<w;d++)if(D[d]!=M[d]){E=D[d]<M[d];break}if(E&&(y=D,D=M,M=y,i.s=-i.s),d=(w=M.length)-(m=D.length),d>0)for(;d--;D[m++]=0);for(d=ft-1;w>v;){if(D[--w]<M[w]){for(m=w;m&&!D[--m];D[m]=d);--D[m],D[w]+=ft}D[w]-=M[w]}for(;D[0]==0;D.splice(0,1),--b);return D[0]?q(i,D,b):(i.s=c==3?-1:1,i.c=[i.e=0],i)},r.modulo=r.mod=function(i,d){var m,w,y=this;return i=new S(i,d),!y.c||!i.s||i.c&&!i.c[0]?new S(NaN):!i.c||y.c&&!y.c[0]?new S(y):(_==9?(w=i.s,i.s=1,m=e(y,i,0,3),i.s=w,m.s*=w):m=e(y,i,0,_),i=y.minus(m.times(i)),!i.c[0]&&_==1&&(i.s=y.s),i)},r.multipliedBy=r.times=function(i,d){var m,w,y,E,A,v,I,b,D,M,L,G,K,de,Q,fe=this,ve=fe.c,ae=(i=new S(i,d)).c;if(!ve||!ae||!ve[0]||!ae[0])return!fe.s||!i.s||ve&&!ve[0]&&!ae||ae&&!ae[0]&&!ve?i.c=i.e=i.s=null:(i.s*=fe.s,!ve||!ae?i.c=i.e=null:(i.c=[0],i.e=0)),i;for(w=it(fe.e/we)+it(i.e/we),i.s*=fe.s,I=ve.length,M=ae.length,I<M&&(K=ve,ve=ae,ae=K,y=I,I=M,M=y),y=I+M,K=[];y--;K.push(0));for(de=ft,Q=kt,y=M;--y>=0;){for(m=0,L=ae[y]%Q,G=ae[y]/Q|0,A=I,E=y+A;E>y;)b=ve[--A]%Q,D=ve[A]/Q|0,v=G*b+D*L,b=L*b+v%Q*Q+K[E]+m,m=(b/de|0)+(v/Q|0)+G*D,K[E--]=b%de;K[E]=m}return m?++w:K.splice(0,1),q(i,K,w)},r.negated=function(){var i=new S(this);return i.s=-i.s||null,i},r.plus=function(i,d){var m,w=this,y=w.s;if(i=new S(i,d),d=i.s,!y||!d)return new S(NaN);if(y!=d)return i.s=-d,w.minus(i);var E=w.e/we,A=i.e/we,v=w.c,I=i.c;if(!E||!A){if(!v||!I)return new S(y/0);if(!v[0]||!I[0])return I[0]?i:new S(v[0]?w:y*0)}if(E=it(E),A=it(A),v=v.slice(),y=E-A){for(y>0?(A=E,m=I):(y=-y,m=v),m.reverse();y--;m.push(0));m.reverse()}for(y=v.length,d=I.length,y-d<0&&(m=I,I=v,v=m,d=y),y=0;d;)y=(v[--d]=v[d]+I[d]+y)/ft|0,v[d]=ft===v[d]?0:v[d]%ft;return y&&(v=[y].concat(v),++A),q(i,v,A)},r.precision=r.sd=function(i,d){var m,w,y,E=this;if(i!=null&&i!==!!i)return ze(i,1,Fe),d==null?d=c:ze(d,0,8),C(new S(E),i,d);if(!(m=E.c))return null;if(y=m.length-1,w=y*we+1,y=m[y]){for(;y%10==0;y/=10,w--);for(y=m[0];y>=10;y/=10,w++);}return i&&E.e+1>w&&(w=E.e+1),w},r.shiftedBy=function(i){return ze(i,-ml,ml),this.times("1e"+i)},r.squareRoot=r.sqrt=function(){var i,d,m,w,y,E=this,A=E.c,v=E.s,I=E.e,b=s+4,D=new S("0.5");if(v!==1||!A||!A[0])return new S(!v||v<0&&(!A||A[0])?NaN:A?E:1/0);if(v=Math.sqrt(+N(E)),v==0||v==1/0?(d=ot(A),(d.length+I)%2==0&&(d+="0"),v=Math.sqrt(+d),I=it((I+1)/2)-(I<0||I%2),v==1/0?d="5e"+I:(d=v.toExponential(),d=d.slice(0,d.indexOf("e")+1)+I),m=new S(d)):m=new S(v+""),m.c[0]){for(I=m.e,v=I+b,v<3&&(v=0);;)if(y=m,m=D.times(y.plus(e(E,y,b,1))),ot(y.c).slice(0,v)===(d=ot(m.c)).slice(0,v))if(m.e<I&&--v,d=d.slice(v-3,v+1),d=="9999"||!w&&d=="4999"){if(!w&&(C(y,y.e+s+2,0),y.times(y).eq(E))){m=y;break}b+=4,v+=4,w=1}else{(!+d||!+d.slice(1)&&d.charAt(0)=="5")&&(C(m,m.e+s+2,1),i=!m.times(m).eq(E));break}}return C(m,m.e+s+1,c,i)},r.toExponential=function(i,d){return i!=null&&(ze(i,0,Fe),i++),j(this,i,d,1)},r.toFixed=function(i,d){return i!=null&&(ze(i,0,Fe),i=i+this.e+1),j(this,i,d)},r.toFormat=function(i,d,m){var w,y=this;if(m==null)i!=null&&d&&typeof d=="object"?(m=d,d=null):i&&typeof i=="object"?(m=i,i=d=null):m=z;else if(typeof m!="object")throw Error(et+"Argument not an object: "+m);if(w=y.toFixed(i,d),y.c){var E,A=w.split("."),v=+m.groupSize,I=+m.secondaryGroupSize,b=m.groupSeparator||"",D=A[0],M=A[1],L=y.s<0,G=L?D.slice(1):D,K=G.length;if(I&&(E=v,v=I,I=E,K-=E),v>0&&K>0){for(E=K%v||v,D=G.substr(0,E);E<K;E+=v)D+=b+G.substr(E,v);I>0&&(D+=b+G.slice(E)),L&&(D="-"+D)}w=M?D+(m.decimalSeparator||"")+((I=+m.fractionGroupSize)?M.replace(new RegExp("\\d{"+I+"}\\B","g"),"$&"+(m.fractionGroupSeparator||"")):M):D}return(m.prefix||"")+w+(m.suffix||"")},r.toFraction=function(i){var d,m,w,y,E,A,v,I,b,D,M,L,G=this,K=G.c;if(i!=null&&(v=new S(i),!v.isInteger()&&(v.c||v.s!==1)||v.lt(o)))throw Error(et+"Argument "+(v.isInteger()?"out of range: ":"not an integer: ")+N(v));if(!K)return new S(G);for(d=new S(o),b=m=new S(o),w=I=new S(o),L=ot(K),E=d.e=L.length-G.e-1,d.c[0]=gl[(A=E%we)<0?we+A:A],i=!i||v.comparedTo(d)>0?E>0?d:b:v,A=h,h=1/0,v=new S(L),I.c[0]=0;D=e(v,d,0,1),y=m.plus(D.times(w)),y.comparedTo(i)!=1;)m=w,w=y,b=I.plus(D.times(y=b)),I=y,d=v.minus(D.times(y=d)),v=y;return y=e(i.minus(m),w,0,1),I=I.plus(y.times(b)),m=m.plus(y.times(w)),I.s=b.s=G.s,E=E*2,M=e(b,w,E,c).minus(G).abs().comparedTo(e(I,m,E,c).minus(G).abs())<1?[b,w]:[I,m],h=A,M},r.toNumber=function(){return+N(this)},r.toPrecision=function(i,d){return i!=null&&ze(i,1,Fe),j(this,i,d,2)},r.toString=function(i){var d,m=this,w=m.s,y=m.e;return y===null?w?(d="Infinity",w<0&&(d="-"+d)):d="NaN":(i==null?d=y<=a||y>=f?il(ot(m.c),y):_t(ot(m.c),y,"0"):i===10&&R?(m=C(new S(m),s+y+1,c),d=_t(ot(m.c),m.e,"0")):(ze(i,2,O.length,"Base"),d=l(_t(ot(m.c),y,"0"),10,i,w,!0)),w<0&&m.c[0]&&(d="-"+d)),d},r.valueOf=r.toJSON=function(){return N(this)},r._isBigNumber=!0,r[Symbol.toStringTag]="BigNumber",r[Symbol.for("nodejs.util.inspect.custom")]=r.valueOf,n!=null&&S.set(n),S}function it(n){var e=n|0;return n>0||n===e?e:e-1}function ot(n){for(var e,l,t=1,r=n.length,o=n[0]+"";t<r;){for(e=n[t++]+"",l=we-e.length;l--;e="0"+e);o+=e}for(r=o.length;o.charCodeAt(--r)===48;);return o.slice(0,r+1||1)}function Tt(n,e){var l,t,r=n.c,o=e.c,s=n.s,c=e.s,a=n.e,f=e.e;if(!s||!c)return null;if(l=r&&!r[0],t=o&&!o[0],l||t)return l?t?0:-c:s;if(s!=c)return s;if(l=s<0,t=a==f,!r||!o)return t?0:!r^l?1:-1;if(!t)return a>f^l?1:-1;for(c=(a=r.length)<(f=o.length)?a:f,s=0;s<c;s++)if(r[s]!=o[s])return r[s]>o[s]^l?1:-1;return a==f?0:a>f^l?1:-1}function ze(n,e,l,t){if(n<e||n>l||n!==st(n))throw Error(et+(t||"Argument")+(typeof n=="number"?n<e||n>l?" out of range: ":" not an integer: ":" not a primitive number: ")+String(n))}function sl(n){var e=n.c.length-1;return it(n.e/we)==e&&n.c[e]%2!=0}function il(n,e){return(n.length>1?n.charAt(0)+"."+n.slice(1):n)+(e<0?"e":"e+")+e}function _t(n,e,l){var t,r;if(e<0){for(r=l+".";++e;r+=l);n=r+n}else if(t=n.length,++e>t){for(r=l,e-=t;--e;r+=l);n+=r}else e<t&&(n=n.slice(0,e)+"."+n.slice(e));return n}cr();const{theme:Ps}=Dt(Ct),Je=(n,e,l={})=>{const{color:t="rgba(255,255,255,0)",duration:r=.2,ease:o="power1.in",offset:s={from:"0%",to:"100%"},position:c="+=0",...a}=l,{from:f="0%",to:p="100%"}=s,h=Array.isArray(e)?e.map(u=>u.getAttribute("stop-color")):e.getAttribute("stop-color");n.fromTo(e,{attr:{offset:f,"stop-color":t}},{attr:{offset:p,"stop-color":t},duration:r,ease:o,...a},c).to(e,{attr:{offset:p,"stop-color":u=>Array.isArray(e)?h[u]:h},duration:r,ease:o,...a},"-=50%")},Ot=Ps.colors.gray[100],Yt=.2,zs=async n=>new Promise(e=>{var Se,Z,se,Y,De,Ue,Ne,nt,mt,Me,Ze,gt,Le,xt,St,Wt,Vt,At,Qe,Pt,Xt,Kt;const l=dt.timeline({onComplete:e}),t=.02,r=document.querySelectorAll(".embedding .content .last");l.fromTo(r,{opacity:0},{opacity:1,duration:t});const o=document.querySelectorAll(".sankey .embedding .last");l.set(o,{opacity:nr});const s=(Se=document.querySelector("#gray-blue-last"))==null?void 0:Se.querySelectorAll("stop")[1];Je(l,s,{duration:t*10});const c=document.querySelectorAll(".attention .column .vector.last");l.fromTo(c,{opacity:0},{opacity:1,duration:t});const a=document.querySelectorAll(".sankey-top .attention .last"),f=document.querySelectorAll(".sankey-back .attention .last"),p=document.querySelectorAll(".sankey-top .attention .to-attention-out");l.set(a,{opacity:Et}),l.set(f,{opacity:jt}),l.set(p,{opacity:cl});const h=(Z=document.querySelector("#blue-blue-last"))==null?void 0:Z.querySelectorAll("stop")[1],u=(se=document.querySelector("#red-red-last"))==null?void 0:se.querySelectorAll("stop")[1],_=(Y=document.querySelector("#green-green-last"))==null?void 0:Y.querySelectorAll("stop")[1],V=(De=document.querySelector("#blue-blue2-last"))==null?void 0:De.querySelectorAll("stop")[1],z=(Ue=document.querySelector("#red-red2-last"))==null?void 0:Ue.querySelectorAll("stop")[1],O=(Ne=document.querySelector("#green-green2-last"))==null?void 0:Ne.querySelectorAll("stop")[1];Je(l,[h,u,_,V,z,O],{duration:t*10});const R=document.querySelectorAll(".attention .head-block .qkv .column .last");l.fromTo(R,{opacity:0},{opacity:1,duration:t});const S=document.querySelectorAll(".sankey-top g.attention path.key-to-attention"),j=document.querySelectorAll(".sankey-top g.attention path.query-to-attention"),J=document.querySelector(".attention .attention-result");[...S,...j].forEach(at=>{const ue=at.getTotalLength();at.style.strokeDasharray=ue,at.style.strokeDashoffset=ue});const q=.4,C=Number((q/n).toFixed(2));l.to(S,{strokeDashoffset:0,stagger:C,duration:q,ease:"power2.out"}).to(j,{strokeDashoffset:0,stagger:C,duration:q,ease:"power2.out"},"<").from(J.querySelectorAll("svg circle"),{scale:0,transformOrigin:"50% 50%",opacity:0,delay:q/n,stagger:Number((q/Math.pow(n,2)).toFixed(2)),ease:"power2.out",duration:q},"<");const N=(nt=document.querySelector("#green-purple"))==null?void 0:nt.querySelectorAll("stop")[1],i=(mt=document.querySelector("#transparent-purple2"))==null?void 0:mt.querySelectorAll("stop")[1];Je(l,[i,N],{color:Ot,position:"<50%"});const d=document.querySelectorAll(".attention .head-block .head-out .column .cell"),m=document.querySelector(".attention .head-block .head-out .title");l.fromTo([d,m],{opacity:(at,ue)=>ue.classList.contains("last")?0:Yt},{opacity:1,duration:t});const w=(Me=document.querySelector("#purple-purple"))==null?void 0:Me.querySelectorAll("stop")[1],y=(Ze=document.querySelector("#transparent-purple"))==null?void 0:Ze.querySelectorAll("stop")[1],E=(gt=document.querySelector("#purple-purple-last"))==null?void 0:gt.querySelectorAll("stop")[1],A=(Le=document.querySelector("#transparent-purple-last"))==null?void 0:Le.querySelectorAll("stop")[1];l.set([w,E],{opacity:Et}),l.set([y,A],{opacity:jt}),Je(l,[w,y],{color:Ot}),Je(l,[E,A],{position:"<"});const v=document.querySelectorAll(".mlp .first-layer .cell");l.fromTo(v,{opacity:(at,ue)=>ue.classList.contains("last")?0:Yt},{opacity:1,duration:t});const I=document.querySelectorAll(".sankey .mlp .last");l.set(I,{opacity:kl});const b=(xt=document.querySelector("#purple-indigo"))==null?void 0:xt.querySelectorAll("stop")[1],D=(St=document.querySelector("#purple-indigo-last"))==null?void 0:St.querySelectorAll("stop")[1];Je(l,b,{color:Ot}),Je(l,D,{position:"<"});const M=document.querySelectorAll(".mlp .second-layer .projections .cell");l.fromTo(M,{opacity:(at,ue)=>ue.classList.contains("last")?0:Yt},{opacity:1,duration:t});const L=(Wt=document.querySelector("#indigo-blue"))==null?void 0:Wt.querySelectorAll("stop")[1],G=(Vt=document.querySelector("#indigo-blue-last"))==null?void 0:Vt.querySelectorAll("stop")[1];Je(l,L,{color:Ot}),Je(l,G,{position:"<"});const K=document.querySelectorAll(".mlp .second-layer .ouputs .cell");l.fromTo(K,{opacity:(at,ue)=>ue.classList.contains("last")?0:Yt},{opacity:1,duration:t});const de=document.querySelectorAll(".sankey .transformer-blocks .last");l.set(de,{opacity:rr});const Q=(At=document.querySelector("#blue-white-blue"))==null?void 0:At.querySelectorAll("stop")[1],fe=(Qe=document.querySelector("#blue-white-blue"))==null?void 0:Qe.querySelectorAll("stop")[3],ve=(Pt=document.querySelector("#blue-white-blue-last"))==null?void 0:Pt.querySelectorAll("stop")[1],ae=(Xt=document.querySelector("#blue-white-blue-last"))==null?void 0:Xt.querySelectorAll("stop")[3],He=dt.timeline({});Je(He,Q,{color:Ot,duration:t*5,offset:{to:"50%"},ease:"sine.inOut"}),Je(He,ve,{duration:t*5,offset:{to:"50%"},ease:"sine.inOut",position:"<"}),Je(He,fe,{duration:t*5,color:Ot,offset:{from:"50%"},ease:"sine.inOut"}),Je(He,ae,{duration:t*5,offset:{from:"50%"},ease:"sine.inOut",position:"<"}),l.add(He);const ee=document.querySelectorAll(".transformer-blocks .cell");l.fromTo(ee,{opacity:(at,ue)=>ue.classList.contains("last")?0:Yt},{opacity:1,duration:t});const te=document.querySelectorAll(".sankey .linear-softmax .last");l.set(te,{opacity:or});const X=(Kt=document.querySelector("#blue-gray"))==null?void 0:Kt.querySelectorAll("stop")[1];Je(l,X,{offset:{to:"50%"}});const $e=document.querySelectorAll(".softmax .content");l.fromTo($e,{opacity:0},{opacity:1,duration:t})}),Hs=async()=>{};vr.wasm.wasmPaths="https://cdn.jsdelivr.net/npm/onnxruntime-web/dist/";const fr=20,Os=async(n,e)=>{ql.set(!0);const{token_ids:l,input_tokens:t}=await Rs(n);bt.set(t);const{outputs:r,prediction:o}=await Us(l),s=er(o,e),c=tr(s,fr);Ut.set({outputs:r,prediction:s,sampled:c}),setTimeout(async()=>{await zs(t.length),tl.set(c),ql.set(!1)},0)},js=async(n,e)=>{const l=er(n,e),t=tr(l,fr);Ut.update(r=>({...r,prediction:l})),await Hs(),tl.set(t)},Gs=n=>{const e=Math.max(...n),l=n.map(r=>Math.exp(r-e)),t=l.reduce((r,o)=>r+o,0);return l.map(r=>r/t)},Rs=async n=>{const e=await Yn.from_pretrained("Xenova/gpt2"),l=e.encode(n),t=l.map(r=>e.decode([r])).flat();return{token_ids:l,input_tokens:t}},Fs=(n,e,l,t)=>{const r=Array.from(n).map((o,s)=>({tokenId:s,logit:o,probability:e[s]}));return r.sort((o,s)=>s.probability-o.probability),r.slice(0,t).map((o,s)=>({...o,rank:s,token:l.decode([o.tokenId])}))},Us=async n=>{try{const e=new mr("int64",n,[1,n.length]),l=dr(Qn);if(!l)throw new Error("Model session is not initialized.");const t={input:e},r=await l.run(t),o=r.linear_output.data,s=Gs(o),c=await Yn.from_pretrained("Xenova/gpt2"),f=Fs(o,s,c,100);return{outputs:xs.reduce((h,u)=>{const _=r[u],V={..._,data:Yr([..._.cpuData],_.dims)};return h[u]=V,h},{}),prediction:f}}catch(e){throw console.error("Error during inference:",e.message),e}},xs=["block_0_attn_head_0_attn","block_0_attn_head_0_attn_scaled","block_0_attn_head_0_attn_masked","block_0_attn_head_0_attn_softmax","block_0_attn_head_0_attn_dropout","linear_output"];async function Ws(n){const e=await fetch(n);if(!e.ok)throw new Error(`Failed to fetch ${n}`);return e.arrayBuffer()}async function Xs(n){const e=await Promise.all(n.map(o=>Ws(o))),l=e.reduce((o,s)=>o+s.byteLength,0),t=new Uint8Array(l);let r=0;for(const o of e)t.set(new Uint8Array(o),r),r+=o.byteLength;return t.buffer}function Rn(n){let e,l,t,r,o,s,c;return l=new Ir({}),{c(){e=B("div"),le(l.$$.fragment),this.h()},l(a){e=T(a,"DIV",{class:!0,style:!0,role:!0});var f=P(e);ne(l.$$.fragment,f),f.forEach($),this.h()},h(){g(e,"class","qkv-weight-popover weight-popover svelte-1cfr5kc"),g(e,"style",t=`left:${n[0].left}px;top:${n[0].top}px;`),g(e,"role","group")},m(a,f){W(a,e,f),re(l,e,null),o=!0,s||(c=[ke(e,"mouseenter",n[3]),ke(e,"mouseleave",n[4])],s=!0)},p(a,f){(!o||f&1&&t!==(t=`left:${a[0].left}px;top:${a[0].top}px;`))&&g(e,"style",t)},i(a){o||(H(l.$$.fragment,a),a&&(r||Gt(()=>{r=hr(e,ut,{duration:300}),r.start()})),o=!0)},o(a){F(l.$$.fragment,a),o=!1},d(a){a&&$(e),oe(l),s=!1,xe(c)}}}function Ks(n){let e,l,t=(n[2]==="embedding"||n[1])&&Rn(n);return{c(){t&&t.c(),e=vt()},l(r){t&&t.l(r),e=vt()},m(r,o){t&&t.m(r,o),W(r,e,o),l=!0},p(r,[o]){r[2]==="embedding"||r[1]?t?(t.p(r,o),o&6&&H(t,1)):(t=Rn(r),t.c(),H(t,1),t.m(e.parentNode,e)):t&&(Ve(),F(t,1,1,()=>{t=null}),Ae())},i(r){l||(H(t),l=!0)},o(r){F(t),l=!1},d(r){r&&$(e),t&&t.d(r)}}}function Zs(n,e,l){let t;Ee(n,$l,f=>l(2,t=f));let r,o={left:0,top:0},s=!1;return $t(()=>{const f=()=>{var R;const h=window.scrollX,u=(R=document.querySelector(".top-bar"))==null?void 0:R.offsetHeight,_=document.querySelector(".step.embedding .content"),V=document.querySelector(".step.mlp .content"),z=_.getBoundingClientRect(),O=V.getBoundingClientRect();l(0,o={left:z.right+h,top:z.top-u}),O.left+h,O.top-u};return f(),r=new ResizeObserver(h=>{f()}),(document==null?void 0:document.querySelectorAll(".resize-watch")).forEach(h=>r.observe(h)),()=>{r.disconnect()}}),[o,s,t,()=>{l(1,s=!0)},()=>{l(1,s=!1)}]}class Qs extends Ge{constructor(e){super(),Re(this,e,Zs,Ks,je,{})}}function Fn(n){let e,l,t,r,o,s,c,a,f,p,h;return{c(){e=B("div"),t=U(),r=B("div"),c=U(),a=B("div"),this.h()},l(u){e=T(u,"DIV",{class:!0}),P(e).forEach($),t=x(u),r=T(u,"DIV",{class:!0}),P(r).forEach($),c=x(u),a=T(u,"DIV",{class:!0}),P(a).forEach($),this.h()},h(){g(e,"class","dim svelte-p1rtu3"),g(r,"class",o=pe(he("dim-partial left",`${n[2].id||""}`))+" svelte-p1rtu3"),g(a,"class",f=pe(he("dim-partial right",`${n[2].id||""}`))+" svelte-p1rtu3")},m(u,_){W(u,e,_),W(u,t,_),W(u,r,_),W(u,c,_),W(u,a,_),h=!0},p(u,_){(!h||_&4&&o!==(o=pe(he("dim-partial left",`${u[2].id||""}`))+" svelte-p1rtu3"))&&g(r,"class",o),(!h||_&4&&f!==(f=pe(he("dim-partial right",`${u[2].id||""}`))+" svelte-p1rtu3"))&&g(a,"class",f)},i(u){h||(u&&Gt(()=>{h&&(l||(l=zt(e,ut,{duration:100},!0)),l.run(1))}),u&&Gt(()=>{h&&(s||(s=zt(r,ut,{duration:100},!0)),s.run(1))}),u&&Gt(()=>{h&&(p||(p=zt(a,ut,{duration:100},!0)),p.run(1))}),h=!0)},o(u){u&&(l||(l=zt(e,ut,{duration:100},!1)),l.run(0)),u&&(s||(s=zt(r,ut,{duration:100},!1)),s.run(0)),u&&(p||(p=zt(a,ut,{duration:100},!1)),p.run(0)),h=!1},d(u){u&&($(e),$(t),$(r),$(c),$(a)),u&&l&&l.end(),u&&s&&s.end(),u&&p&&p.end()}}}function Ys(n){let e,l,t,r,o,s,c,a,f,p,h,u,_,V,z,O,R,S,j,J,q,C=!!n[2].id&&Fn(n);return r=new xr({}),a=new Ds({props:{className:"step"}}),p=new Eo({props:{className:"step"}}),u=new Bs({props:{className:"step"}}),V=new Bo({props:{className:"step"}}),O=new Xo({props:{className:"step"}}),j=new Qs({}),{c(){e=B("div"),C&&C.c(),l=U(),t=B("div"),le(r.$$.fragment),o=U(),s=B("div"),c=B("div"),le(a.$$.fragment),f=U(),le(p.$$.fragment),h=U(),le(u.$$.fragment),_=U(),le(V.$$.fragment),z=U(),le(O.$$.fragment),S=U(),le(j.$$.fragment),this.h()},l(N){e=T(N,"DIV",{class:!0,style:!0});var i=P(e);C&&C.l(i),l=x(i),t=T(i,"DIV",{class:!0});var d=P(t);ne(r.$$.fragment,d),d.forEach($),o=x(i),s=T(i,"DIV",{class:!0});var m=P(s);c=T(m,"DIV",{class:!0});var w=P(c);ne(a.$$.fragment,w),f=x(w),ne(p.$$.fragment,w),h=x(w),ne(u.$$.fragment,w),_=x(w),ne(V.$$.fragment,w),z=x(w),ne(O.$$.fragment,w),w.forEach($),S=x(m),ne(j.$$.fragment,m),m.forEach($),i.forEach($),this.h()},h(){g(t,"class","sankey opacity-1 svelte-p1rtu3"),ie(t,"attention",n[2].id==="attention"),g(c,"class","steps svelte-p1rtu3"),Gt(()=>n[7].call(c)),ie(c,"expanded",!!n[2].id),g(s,"class","nodes resize-watch svelte-p1rtu3"),g(e,"class","main-section h-full w-full"),g(e,"style",J=`--vector-height: ${n[1]}px;--title-height: ${n[3]}px;--content-height:${n[0]-n[3]}px;`)},m(N,i){W(N,e,i),C&&C.m(e,null),k(e,l),k(e,t),re(r,t,null),k(e,o),k(e,s),k(s,c),re(a,c,null),k(c,f),re(p,c,null),k(c,h),re(u,c,null),k(c,_),re(V,c,null),k(c,z),re(O,c,null),R=Kn(c,n[7].bind(c)),k(s,S),re(j,s,null),q=!0},p(N,[i]){N[2].id?C?(C.p(N,i),i&4&&H(C,1)):(C=Fn(N),C.c(),H(C,1),C.m(e,l)):C&&(Ve(),F(C,1,1,()=>{C=null}),Ae()),(!q||i&4)&&ie(t,"attention",N[2].id==="attention"),(!q||i&4)&&ie(c,"expanded",!!N[2].id),(!q||i&3&&J!==(J=`--vector-height: ${N[1]}px;--title-height: ${N[3]}px;--content-height:${N[0]-N[3]}px;`))&&g(e,"style",J)},i(N){q||(H(C),H(r.$$.fragment,N),H(a.$$.fragment,N),H(p.$$.fragment,N),H(u.$$.fragment,N),H(V.$$.fragment,N),H(O.$$.fragment,N),H(j.$$.fragment,N),q=!0)},o(N){F(C),F(r.$$.fragment,N),F(a.$$.fragment,N),F(p.$$.fragment,N),F(u.$$.fragment,N),F(V.$$.fragment,N),F(O.$$.fragment,N),F(j.$$.fragment,N),q=!1},d(N){N&&$(e),C&&C.d(),oe(r),oe(a),oe(p),oe(u),oe(V),oe(O),R(),oe(j)}}}function Js(n,e,l){let t,r,o,s,c,a;Ee(n,bt,_=>l(4,t=_)),Ee(n,Ut,_=>l(5,r=_)),Ee(n,bl,_=>l(8,o=_)),Ee(n,tl,_=>l(6,s=_)),Ee(n,al,_=>l(1,c=_)),Ee(n,We,_=>l(2,a=_)),$t(async()=>{const V=Array(63).fill(0).map((C,N)=>`${Lr}/gpt2.onnx.part${N}`),z=await Xs(V),O=new Blob([z],{type:"application/octet-stream"}),R=URL.createObjectURL(O),S=await gr.create(R,{});Qn.set(S),_r.set(!1);const j=$r.subscribe(C=>{Os(C.trim(),o)});let J=!0;const q=bl.subscribe(C=>{if(J){J=!1;return}js(r==null?void 0:r.prediction,C)});return()=>{j(),q()}});let f=0,p=Rt*5;const h=()=>{const _=Rt*.5*(t.length-1),V=Math.min(Math.max((f-p-_)/t.length/br,wr),kr);al.set(V),Zn.set(t.length*V*3+_)};function u(){f=this.offsetHeight,l(0,f)}return n.$$.update=()=>{n.$$.dirty&32&&console.log("data",r),n.$$.dirty&64&&console.log("p tkn",s),n.$$.dirty&17&&(f||t.length)&&h()},[f,c,a,p,t,r,s,u]}class fi extends Ge{constructor(e){super(),Re(this,e,Js,Ys,je,{})}}export{fi as component,ci as universal};

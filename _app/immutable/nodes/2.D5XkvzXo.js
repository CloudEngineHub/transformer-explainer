import{s as Ne,G as Pt,D as Yt,H as Ot,I as Dn,J as hn,M as vn,N as gn,O as mn,a4 as ke,a5 as ye,d as C,g as v,p as h,j as H,n as Se,m as $e,z as st,C as Et,A as Xe,e as E,c as I,q as De,w as lt,b as S,h as N,k as g,ad as ae,t as oe,o as Ie,f as re,P as It,af as pn,v as _e,l as Ve,r as je,a9 as St,u as x,E as Nt,a7 as Qt,ag as Ln}from"../chunks/scheduler.QcZkUrsu.js";import{S as He,i as ze,c as te,a as le,m as ne,t as B,b as R,d as se,g as Le,e as Me,h as Ut,j as Mn,f as Lt}from"../chunks/index.Bylzl8VN.js";import{r as dt,a as ht,t as ot,m as $t,s as Tt,e as ve,u as ct,b as ie,g as Fe,v as wt,w as Bt,x as yt,y as _n,p as Ht,d as bt,n as Mt,z as qn,f as Gt,Z as Bn,i as Jt,M as Sn,A as bn,P as Nn,j as Hn,k as zn,B as jn,C as An,D as Pn}from"../chunks/index.CHTeGXUK.js";import{b as zt,d as Tn,c as Gn}from"../chunks/transform.yYZBLT4W.js";import{s as qt,a as Oe,M as _t,F as ut,f as nt,Q as Fn}from"../chunks/QKVWeightPopover.CwHZgNdX.js";import{a as Rn,i as $n,b as Wn,c as Zn,l as Ft}from"../chunks/linear.D3KXbiNi.js";import{g as Xn,a as Kn,t as Yn,b as ft}from"../chunks/index.LjCCkuxf.js";import{P as On,a as jt,H as xt,A as wn}from"../chunks/bignumber.BV3wFKVA.js";import{b as Qn}from"../chunks/paths.DDmbMy1m.js";function Un(n){let e;const l=n[4].default,t=hn(l,n,n[6],null);return{c(){t&&t.c()},l(o){t&&t.l(o)},m(o,s){t&&t.m(o,s),e=!0},p(o,s){t&&t.p&&(!e||s&64)&&vn(t,l,o,o[6],e?mn(l,o[6],s,null):gn(o[6]),null)},i(o){e||(B(t,o),e=!0)},o(o){R(t,o),e=!1},d(o){t&&t.d(o)}}}function Jn(n){let e,l;const t=[{rounded:!0},{shadow:!0},n[1],{class:n[0]}];let o={$$slots:{default:[Un]},$$scope:{ctx:n}};for(let s=0;s<t.length;s+=1)o=Pt(o,t[s]);return e=new On({props:o}),e.$on("show",n[5]),{c(){te(e.$$.fragment)},l(s){le(e.$$.fragment,s)},m(s,r){ne(e,s,r),l=!0},p(s,[r]){const c=r&3?Xn(t,[t[0],t[1],r&2&&Kn(s[1]),r&1&&{class:s[0]}]):{};r&64&&(c.$$scope={dirty:r,ctx:s}),e.$set(c)},i(s){l||(B(e.$$.fragment,s),l=!0)},o(s){R(e.$$.fragment,s),l=!1},d(s){se(e,s)}}}function xn(n,e,l){const t=["type","defaultClass"];let o=Yt(e,t),{$$slots:s={},$$scope:r}=e,{type:c="dark"}=e,{defaultClass:a="py-2 px-3 text-sm font-medium"}=e;const i={dark:"bg-gray-900 text-white dark:bg-gray-700",light:"border-gray-200 bg-white text-gray-900",auto:" bg-white text-gray-900 dark:bg-gray-700 dark:text-white border-gray-200 dark:border-gray-700",custom:""};let f;function u(d){Dn.call(this,n,d)}return n.$$set=d=>{l(8,e=Pt(Pt({},e),Ot(d))),l(1,o=Yt(e,t)),"type"in d&&l(2,c=d.type),"defaultClass"in d&&l(3,a=d.defaultClass),"$$scope"in d&&l(6,r=d.$$scope)},n.$$.update=()=>{o.color?l(2,c="custom"):l(1,o.color="none",o),["light","auto"].includes(c)&&l(1,o.border=!0,o),l(0,f=Yn("tooltip",a,i[c],e.class))},e=Ot(e),[f,o,c,a,s,u,r]}class Ke extends He{constructor(e){super(),ze(this,e,xn,Jn,Ne,{type:2,defaultClass:3})}}function kn(n=[],e){const l=n.map(r=>r.logit/e),t=l.map(r=>Math.exp(r)),o=t.reduce((r,c)=>r+c,0);return console.log(l,t),n.map((r,c)=>({...r,adjustedLogit:l[c],adjustedProbability:t[c]/o,adjustedExp:t[c]}))}function yn(n){const e=[];let l=0;for(const o of n)l+=o.probability,e.push(l);const t=Math.random();for(let o=0;o<e.length;o++)if(t<e[o])return n[o];return n[0]}const es=!0,pr=Object.freeze(Object.defineProperty({__proto__:null,prerender:es},Symbol.toStringTag,{value:"Module"}));function ts(n,e){let l,t;for(const o of n)o!=null&&(l===void 0?o>=o&&(l=t=o):(l>o&&(l=o),t<o&&(t=o)));return[l,t]}function ls(n,e){let l;if(e===void 0)for(const t of n)t!=null&&(l<t||l===void 0&&t>=t)&&(l=t);else{let t=-1;for(let o of n)(o=e(o,++t,n))!=null&&(l<o||l===void 0&&o>=o)&&(l=o)}return l}function ns(n,e){e===void 0&&(e=n,n=zt);for(var l=0,t=e.length-1,o=e[0],s=new Array(t<0?0:t);l<t;)s[l]=n(o,o=e[++l]);return function(r){var c=Math.max(0,Math.min(t-1,Math.floor(r*=t)));return s[c](r-c)}}function ss(n,e){return e.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function os(){var n=0,e=.5,l=1,t=1,o,s,r,c,a,i=$n,f,u=!1,d;function m(V){return isNaN(V=+V)?d:(V=.5+((V=+f(V))-s)*(t*V<t*s?c:a),i(u?Math.max(0,Math.min(1,V)):V))}m.domain=function(V){return arguments.length?([n,e,l]=V,o=f(n=+n),s=f(e=+e),r=f(l=+l),c=o===s?0:.5/(s-o),a=s===r?0:.5/(r-s),t=s<o?-1:1,m):[n,e,l]},m.clamp=function(V){return arguments.length?(u=!!V,m):u},m.interpolator=function(V){return arguments.length?(i=V,m):i};function $(V){return function(j){var L,z,p;return arguments.length?([L,z,p]=j,i=ns(V,[L,z,p]),m):[i(0),i(.5),i(1)]}}return m.range=$(zt),m.rangeRound=$(Zn),m.unknown=function(V){return arguments.length?(d=V,m):d},function(V){return f=V,o=V(n),s=V(e),r=V(l),c=o===s?0:.5/(s-o),a=s===r?0:.5/(r-s),t=s<o?-1:1,m}}function En(){var n=Rn(os()($n));return n.copy=function(){return ss(n,En())},Wn.apply(n,arguments)}const{theme:J}=dt(ht),fe=200,el={"gray-blue":{0:J.colors.gray[fe],100:J.colors.blue[fe]},"gray-blue-last":{0:J.colors.gray[fe],100:J.colors.blue[fe]},"purple-indigo":{0:J.colors.purple[fe],100:J.colors.indigo[fe]},"purple-indigo-last":{0:J.colors.purple[fe],100:J.colors.indigo[fe]},"indigo-blue":{0:J.colors.indigo[fe],100:J.colors.blue[fe]},"indigo-blue-last":{0:J.colors.indigo[fe],100:J.colors.blue[fe]},"blue-white":{0:J.colors.blue[fe],100:J.colors.white},"red-white":{0:J.colors.red[fe],100:J.colors.white},"green-white":{0:J.colors.green[fe],100:J.colors.white},"red-purple":{0:J.colors.red[fe],100:J.colors.purple[fe]},"blue-purple":{90:J.colors.blue[fe],100:J.colors.purple[fe]},"green-purple":{0:J.colors.green[fe],100:J.colors.purple[fe]},"blue-gray":{0:J.colors.blue[fe],100:J.colors.gray[fe]},"blue-white-blue":{0:J.colors.blue[fe],40:J.colors.white,60:J.colors.white,100:J.colors.blue[fe]},"blue-white-blue-last":{0:J.colors.blue[fe],40:J.colors.white,60:J.colors.white,100:J.colors.blue[fe]},"transparent-purple":{0:{color:J.colors.purple[100],opacity:0},100:{color:J.colors.purple[100],opacity:1}},"transparent-purple2":{0:{color:J.colors.purple[400],opacity:0},100:{color:J.colors.purple[200],opacity:1}},"transparent-purple-last":{0:{color:J.colors.purple[100],opacity:0},100:{color:J.colors.purple[100],opacity:1}},"transparent-purple2-last":{0:{color:J.colors.purple[400],opacity:0},100:{color:J.colors.purple[200],opacity:1}},"blue-blue":{0:J.colors.blue[fe],100:J.colors.blue[fe]},"red-red":{0:J.colors.red[fe],100:J.colors.red[fe]},"green-green":{0:J.colors.green[fe],100:J.colors.green[fe]},"blue-blue2":{0:J.colors.blue[fe],100:J.colors.blue[fe]},"red-red2":{0:J.colors.red[fe],100:J.colors.red[fe]},"green-green2":{0:J.colors.green[fe],100:J.colors.green[fe]},"blue-blue-last":{0:J.colors.blue[fe],100:J.colors.blue[fe]},"red-red-last":{0:J.colors.red[fe],100:J.colors.red[fe]},"green-green-last":{0:J.colors.green[fe],100:J.colors.green[fe]},"blue-blue2-last":{0:J.colors.blue[fe],100:J.colors.blue[fe]},"red-red2-last":{0:J.colors.red[fe],100:J.colors.red[fe]},"green-green2-last":{0:J.colors.green[fe],100:J.colors.green[fe]},"gray-gray":{0:J.colors.gray[fe],100:J.colors.gray[fe]},"purple-purple":{0:J.colors.purple[fe],100:J.colors.purple[fe]},"purple-purple-last":{0:J.colors.purple[fe],100:J.colors.purple[fe]}};function rs(n){let e,l,t,o;return{c(){e=ke("svg"),t=ke("svg"),this.h()},l(s){e=ye(s,"svg",{id:!0,class:!0,style:!0}),C(e).forEach(v),t=ye(s,"svg",{class:!0,style:!0}),C(t).forEach(v),this.h()},h(){h(e,"id","back"),h(e,"class","sankey-back absolute left-0 top-0 h-full w-full"),h(e,"style",l=`z-index:${n[2].attention_head_num-1};`),h(t,"class","sankey-top absolute left-0 top-0 h-full w-full"),h(t,"style",o=`z-index:${n[2].attention_head_num};`)},m(s,r){H(s,e,r),n[4](e),H(s,t,r),n[5](t)},p(s,[r]){r&4&&l!==(l=`z-index:${s[2].attention_head_num-1};`)&&h(e,"style",l),r&4&&o!==(o=`z-index:${s[2].attention_head_num};`)&&h(t,"style",o)},i:Se,o:Se,d(s){s&&(v(e),v(t)),n[4](null),n[5](null)}}}const is=80;function as(n,e,l){let t,o,s;$e(n,ot,p=>l(3,o=p)),$e(n,$t,p=>l(2,s=p));const{theme:r}=dt(ht);let c,a,i;const f={attention:[{from:".attention .query .head-rest",to:".head-block .query .vector",gradientId:"blue-blue2",opacity:.4},{from:".attention .key .head-rest",to:".head-block .key .vector",gradientId:"red-red2",opacity:.4},{from:".attention .value .head-rest",to:".head-block .value .vector",gradientId:"green-green2",opacity:.4},{from:".attention .head-out .vector",to:".mlp .initial .vector .head-rest",gradientId:"transparent-purple",opacity:.4}]},u=()=>{const D=Oe(a).append("defs");Object.keys(el).forEach(M=>{const _=el[M],y=D.append("linearGradient").attr("id",M).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%");Object.keys(_).forEach(F=>{let Z,P;typeof _[F]!="string"?(Z=_[F].color,P=_[F].opacity):(Z=_[F],P=1),y.append("stop").attr("offset",`${F}%`).attr("stop-color",Z).attr("stop-opacity",P)})})};let d=1,m;const $=async()=>{await Et();const p=Oe(a),D=Oe(c);[{dataMap:t,svg:p},{dataMap:f,svg:D}].forEach(({dataMap:M,svg:_})=>{_.selectAll("g.path-group").data(Object.keys(M)).join("g").attr("class",F=>`path-group ${F}`).on("mouseenter",(F,Z)=>{clearTimeout(m),Tt.set(Z);const P=Oe(`g.${Z}`).selectAll("path");d=P.nodes()[0].getAttribute("opacity"),P.transition().duration(300).style("opacity",Number(d)+.2)}).on("mouseleave",(F,Z)=>{m=setTimeout(()=>{Tt.set(null)},300),Oe(`g.${Z}`).selectAll("path").transition().duration(300).style("opacity",d)}).selectAll("path.sankey-path").data(F=>M[F].map(P=>{const X=qt(P.from).nodes(),W=qt(P.to).nodes();return X.map((ee,T)=>{const k=ee.getBoundingClientRect(),K=W[T].getBoundingClientRect(),w=P.curve||is,A=(P.pathGenerator||V)(k,K,w),b=W.length>1&&T===X.length-1;let U=P.gradientId;return b&&document.getElementById(P.gradientId+"-last")&&(U=P.gradientId+"-last"),{id:P.id,isLast:T===X.length-1,path:A,fill:P.type==="stroke"?"none":P.gradientId?`url(#${U})`:P.fill,opacity:P.opacity,stroke:P.type==="stroke"?P.gradientId?`url(#${P.gradientId})`:P.fill:"none"}})}).flat()).join("path").attr("class",F=>`sankey-path ${F.id||""} ${F.isLast?"last":""}`).attr("fill",F=>F.fill).attr("stroke",F=>F.stroke).attr("stroke-width",2).attr("opacity",F=>F.opacity||1).attr("d",F=>F.path)})},V=(p,D,M)=>{const _=window.scrollY,y=window.scrollX;return`
        M ${p.right+y},${p.top+_}
        C ${p.right+y+M},${p.top+_} ${D.left+y-M},${D.top+_} ${D.left+y},${D.top+_}
        L ${D.left+y},${D.bottom+_}
        C ${D.left+y-M},${D.bottom+_} ${p.right+y+M},${p.bottom+_} ${p.right+y},${p.bottom+_}
        Z
    `};st(()=>(u(),i=new ResizeObserver(D=>{$(),j()}),(document==null?void 0:document.querySelectorAll(".resize-watch")).forEach(D=>i.observe(D)),()=>{i.disconnect()}));const j=()=>{const p=Oe(a),D=qt(".residual-start path.head").nodes(),M=qt(".residual-end path.head").nodes(),_=D.map((y,F)=>{const Z=y.getBoundingClientRect(),P=M[F].getBoundingClientRect(),X=Z.right,W=Z.top,ee=P.left,T=P.top;return{x1:X,y1:W,x2:ee,y2:T,id:y.id}});p.selectAll("line.residual-connector").data(_).join("line").attr("class",y=>`residual-connector ${y.id}`).attr("x1",y=>y.x1).attr("y1",y=>y.y1).attr("x2",y=>y.x2).attr("y2",y=>y.y2).attr("stroke",r.colors.gray[400]).attr("stroke-width",1).style("opacity",0)};function L(p){Xe[p?"unshift":"push"](()=>{c=p,l(0,c)})}function z(p){Xe[p?"unshift":"push"](()=>{a=p,l(1,a)})}return n.$$.update=()=>{n.$$.dirty&8&&(t={embedding:[{from:".embedding .vector-column .column.vectors .vector",to:".attention .vector",gradientId:"gray-blue",opacity:.6,pathGenerator:(p,D,M)=>{const _=window.scrollY,y=window.scrollX,F=30;return`
					M ${p.right+y},${p.top+_}
					L ${p.right+F+y},${p.top+_}
					C ${p.right+F+y+M},${p.top+_} ${D.left+y-M},${D.top+_} ${D.left+y},${D.top+_}
					L ${D.left+y},${D.bottom+_}
					C ${D.left+y-M},${D.bottom+_} ${p.right+F+y+M},${p.bottom+_} ${p.right+F+y},${p.bottom+_}
					L ${p.right+y},${p.bottom+_}
					Z
				`}}],attention:[{from:".attention .query .sub-vector.head1",to:".head-block .query .vector",gradientId:"blue-blue"},{from:".attention .key .sub-vector.head1",to:".head-block .key .vector",gradientId:"red-red"},{from:".attention .value .sub-vector.head1",to:".head-block .value .vector",gradientId:"green-green"},{from:".attention .head-out .vector",to:".mlp .initial .head1",gradientId:"purple-purple"},{from:".head-block .key .vector",to:".attention-initial .main g.g-row",id:"key-to-attention",type:"stroke",gradientId:"red-purple",curve:30,pathGenerator:(p,D,M)=>{const _=window.scrollY,y=window.scrollX,F=p.top+_+p.height/2,Z=D.top+_+D.height/2,P=p.right+y+M,X=D.left+y-M;return`
			    M ${p.right+y},${F}
			    C ${P},${F} ${X},${Z} ${D.left+y},${Z}
					L ${D.right+y},${Z}
			`}},{from:".head-block .query .vector",to:`.attention-matrix.attention-initial .main g.g-row-${o.length-1} circle`,gradientId:"blue-purple",id:"query-to-attention",type:"stroke",curve:20,pathGenerator:(p,D,M)=>{const _=window.scrollY,y=window.scrollX,F=p.top+_+p.height/2,Z=D.left+y+D.width/2;return`
			    M ${p.right+y},${F}
			    L ${Z-M},${F}
			    A ${M},${M} 0 0 1 ${Z},${F+M}
			    L ${Z},${D.bottom+_}
			`}},{from:".attention-matrix.attention-out .main svg",to:".attention .head-out",gradientId:"transparent-purple2",id:"to-attention-out",opacity:.4,curve:20,pathGenerator:(p,D,M)=>{const _=window.scrollY,y=window.scrollX;return`
			    M ${p.right+y},${p.top+_}
			    C ${p.right+y+M},${p.top+_} ${D.left+y-M},${D.top+_} ${D.left+y},${D.top+_}
			    L ${D.left+y},${D.bottom+_}
			    C ${D.left+y-M},${D.bottom+_} ${p.right+y+M},${p.bottom+_} ${p.right+y},${p.bottom+_}
			    Z
			`}},{from:".head-block .value",to:".attention .head-out",gradientId:"green-purple",id:"to-attention-out",opacity:.4,curve:60,pathGenerator:(p,D,M)=>{const _=window.scrollY,y=window.scrollX;return`
        M ${p.right+y},${p.top+_} 
        C ${D.left-M},${p.top+_} ${D.left+y-M},${p.top+_} ${D.left+y},${D.top+_}
        L ${D.left+y},${D.bottom+_}
        C ${D.left+y-M},${p.bottom+_} ${D.left-M},${p.bottom+_} ${p.right+y},${p.bottom+_}
        Z
    `}}],mlp:[{from:".mlp .column.initial .vector",to:".mlp .projections .vector",gradientId:"purple-indigo",curve:50,opacity:.4,pathGenerator:(p,D,M)=>{const _=window.scrollY,y=window.scrollX,F=49;return`
					M ${p.right+y},${p.top+_}
					L ${p.right+F+y},${p.top+_}
					C ${p.right+F+y+M},${p.top+_} ${D.left+y-M},${D.top+_} ${D.left+y},${D.top+_}
					L ${D.left+y},${D.bottom+_}
					C ${D.left+y-M},${D.bottom+_} ${p.right+F+y+M},${p.bottom+_} ${p.right+F+y},${p.bottom+_}
					L ${p.right+y},${p.bottom+_}
					Z
				`}},{from:".mlp .projections .vector",to:".mlp .column.out .vector",gradientId:"indigo-blue",curve:50,opacity:.4,pathGenerator:(p,D,M)=>{const _=window.scrollY,y=window.scrollX,F=20;return`
					M ${p.right+y},${p.top+_}
					C ${p.right+y+M},${p.top+_} ${D.left-F+y-M},${D.top+_} ${D.left-F+y},${D.top+_}
					L ${D.left+y},${D.top+_}
					L ${D.left+y},${D.bottom+_}
					L ${D.left-F+y},${D.bottom+_}
					C ${D.left-F+y-M},${D.bottom+_} ${p.right+y+M},${p.bottom+_} ${p.right+y},${p.bottom+_}
					L ${p.right+y},${p.bottom+_}
					Z
				`}}],"transformer-blocks":[{from:".mlp .out .vector",to:".transformer-blocks .column.final .vector",gradientId:"blue-white-blue",opacity:.6,pathGenerator:(p,D,M)=>{const _=window.scrollY,y=window.scrollX;return`
        M ${p.right+y},${p.top+_}
        C ${p.right+y+M},${p.top+_} ${D.left+y-M},${D.top+_} ${D.left+y},${D.top+_}
        L ${D.left+y},${D.bottom+_}
        C ${D.left+y-M},${D.bottom+_} ${p.right+y+M},${p.bottom+_} ${p.right+y},${p.bottom+_}
        Z
    `}}],"linear-softmax":[{from:".transformer-blocks .final .vector.last-token ",to:".softmax .content .vector",gradientId:"blue-gray",opacity:.4}]}),n.$$.dirty&8&&typeof window<"u"&&o&&($(),j())},[c,a,s,o,L,z]}class cs extends He{constructor(e){super(),ze(this,e,as,rs,Ne,{})}}function tl(n,e,l){const t=n.slice();return t[6]=e[l],t[8]=l,t}function fs(n){let e,l,t,o,s;return{c(){e=E("div"),l=E("div"),o=S(),this.h()},l(r){e=I(r,"DIV",{class:!0,style:!0});var c=C(e);l=I(c,"DIV",{class:!0,style:!0}),C(l).forEach(v),o=N(c),c.forEach(v),this.h()},h(){h(l,"class","card svelte-1k8s99h"),h(l,"style",t=`width: ${n[1].width}px; height: ${n[1].height}px;`),h(e,"class","rest absolute"),h(e,"style",s=`transform:translate(${n[8]*ct.x}px,${n[8]*ct.y}px) scale(${1-ct.scale*n[8]}); 
      z-index: ${n[2].attention_head_num-n[8]};opacity:${Math.max(.1,1-n[8]*nl)};`)},m(r,c){H(r,e,c),g(e,l),g(e,o)},p(r,c){c&2&&t!==(t=`width: ${r[1].width}px; height: ${r[1].height}px;`)&&h(l,"style",t),c&4&&s!==(s=`transform:translate(${r[8]*ct.x}px,${r[8]*ct.y}px) scale(${1-ct.scale*r[8]}); 
      z-index: ${r[2].attention_head_num-r[8]};opacity:${Math.max(.1,1-r[8]*nl)};`)&&h(e,"style",s)},i:Se,o:Se,d(r){r&&v(e)}}}function us(n){let e,l,t;const o=n[4].default,s=hn(o,n,n[3],null);return{c(){e=E("div"),s&&s.c(),l=S(),this.h()},l(r){e=I(r,"DIV",{class:!0});var c=C(e);s&&s.l(c),l=N(c),c.forEach(v),this.h()},h(){h(e,"class",ae("first-head-content")+" svelte-1k8s99h")},m(r,c){H(r,e,c),s&&s.m(e,null),g(e,l),n[5](e),t=!0},p(r,c){s&&s.p&&(!t||c&8)&&vn(s,o,r,r[3],t?mn(o,r[3],c,null):gn(r[3]),null)},i(r){t||(B(s,r),t=!0)},o(r){R(s,r),t=!1},d(r){r&&v(e),s&&s.d(r),n[5](null)}}}function ll(n){let e,l,t,o;const s=[us,fs],r=[];function c(a,i){return a[8]===0?0:1}return e=c(n),l=r[e]=s[e](n),{c(){l.c(),t=lt()},l(a){l.l(a),t=lt()},m(a,i){r[e].m(a,i),H(a,t,i),o=!0},p(a,i){l.p(a,i)},i(a){o||(B(l),o=!0)},o(a){R(l),o=!1},d(a){a&&v(t),r[e].d(a)}}}function ds(n){let e,l,t=ve(Array(n[2].attention_head_num+1).fill(0)),o=[];for(let r=0;r<t.length;r+=1)o[r]=ll(tl(n,t,r));const s=r=>R(o[r],1,1,()=>{o[r]=null});return{c(){e=E("div");for(let r=0;r<o.length;r+=1)o[r].c();this.h()},l(r){e=I(r,"DIV",{class:!0});var c=C(e);for(let a=0;a<o.length;a+=1)o[a].l(c);c.forEach(v),this.h()},h(){h(e,"class","multi-head flex w-full svelte-1k8s99h")},m(r,c){H(r,e,c);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(e,null);l=!0},p(r,[c]){if(c&15){t=ve(Array(r[2].attention_head_num+1).fill(0));let a;for(a=0;a<t.length;a+=1){const i=tl(r,t,a);o[a]?(o[a].p(i,c),B(o[a],1)):(o[a]=ll(i),o[a].c(),B(o[a],1),o[a].m(e,null))}for(Le(),a=t.length;a<o.length;a+=1)s(a);Me()}},i(r){if(!l){for(let c=0;c<t.length;c+=1)B(o[c]);l=!0}},o(r){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)R(o[c]);l=!1},d(r){r&&v(e),De(o,r)}}}let nl=.1;function hs(n,e,l){let t;$e(n,$t,i=>l(2,t=i));let{$$slots:o={},$$scope:s}=e,r,c={width:0,height:0};st(()=>{const i=new ResizeObserver(f=>{for(let u of f){const{width:d,height:m}=u.contentRect;l(1,c={width:d,height:m})}});return i.observe(r),()=>{i.unobserve(r)}});function a(i){Xe[i?"unshift":"push"](()=>{r=i,l(0,r)})}return n.$$set=i=>{"$$scope"in i&&l(3,s=i.$$scope)},[r,c,t,s,o,a]}class vs extends He{constructor(e){super(),ze(this,e,hs,ds,Ne,{})}}const gs=(n,e)=>{console.log(n,e);const l=e.filter(o=>o!==1),t=(o,s)=>{if(s.length===1)return o.splice(0,s[0]);const r=s[0],c=s.slice(1);return Array.from({length:r},()=>t(o,c))};return t(n,l)},at=n=>n.map((e,l)=>{let t=new Array(e.length).fill(-1/0);for(let o=0;o<=l&&o<e.length;o++)t[o]=e[o];return t});function ms(n){var Zt,Xt;let e,l,t,o,s,r,c="QK<sup>T</sup>",a,i,f,u=((Zt=n[1][0])==null?void 0:Zt.toFixed(1))+"",d,m,$,V,j,L=((Xt=n[1][1])==null?void 0:Xt.toFixed(1))+"",z,p,D,M,_,y,F,Z,P,X,W,ee,T,k="Scaling · Mask",K,w,G='<span class="val svelte-1y1cy1i">-3.0</span> <div class="bar svelte-1y1cy1i"></div> <span class="val svelte-1y1cy1i">3.0</span>',A,b,U,q,ge,de,O,pe,Y,me,Re,Pe="Softmax · Dropout",Ce,Qe,Te='<span class="val svelte-1y1cy1i">-1.0</span> <div class="bar svelte-1y1cy1i"></div> <span class="val svelte-1y1cy1i">1.0</span>',we,qe,Q,ue,be,Be,rt="Attention",ce,Ae,vt,Je,We,Ge,Wt;return o=new _t({props:{className:"main",data:n[2],showSize:!1,cellHeight:n[10],cellWidth:n[10],rowGap:3,colGap:3,shape:"circle",colorScale:n[9]}}),P=new _t({props:{className:"prev absolute top-0 left-0 pointer-events-none",data:n[2],showSize:!1,cellHeight:n[10],cellWidth:n[10],rowGap:3,colGap:3,shape:"circle",colorScale:n[9]}}),W=new _t({props:{className:"main opacity-0",data:at(n[12]),showSize:!1,cellHeight:n[10],cellWidth:n[10],rowGap:3,colGap:3,shape:"circle",colorScale:n[14]}}),O=new _t({props:{className:"prev absolute top-0 left-0  pointer-events-none",data:at(n[12]),showSize:!1,cellHeight:n[10],cellWidth:n[10],rowGap:3,colGap:3,shape:"circle",colorScale:n[14]}}),Y=new _t({props:{className:"main opacity-0",data:at(n[11]),showSize:!1,cellHeight:n[10],cellWidth:n[10],rowGap:3,colGap:3,shape:"circle",colorScale:n[15]}}),ue=new _t({props:{className:"main",data:at(n[11]),showSize:!1,cellHeight:n[10],cellWidth:n[10],rowGap:3,colGap:3,shape:"circle",colorScale:n[15]}}),{c(){e=E("div"),l=E("div"),t=E("div"),te(o.$$.fragment),s=S(),r=E("div"),r.innerHTML=c,a=S(),i=E("div"),f=E("span"),d=oe(u),m=S(),$=E("div"),V=S(),j=E("span"),z=oe(L),D=S(),M=E("div"),_=ke("svg"),y=ke("path"),F=S(),Z=E("div"),te(P.$$.fragment),X=S(),te(W.$$.fragment),ee=S(),T=E("div"),T.textContent=k,K=S(),w=E("div"),w.innerHTML=G,A=S(),b=E("div"),U=ke("svg"),q=ke("path"),ge=S(),de=E("div"),te(O.$$.fragment),pe=S(),te(Y.$$.fragment),me=S(),Re=E("div"),Re.textContent=Pe,Ce=S(),Qe=E("div"),Qe.innerHTML=Te,qe=S(),Q=E("div"),te(ue.$$.fragment),be=S(),Be=E("div"),Be.textContent=rt,this.h()},l(he){e=I(he,"DIV",{class:!0,style:!0});var Ee=C(e);l=I(Ee,"DIV",{role:!0,tabindex:!0,class:!0});var Ze=C(l);t=I(Ze,"DIV",{class:!0});var Ue=C(t);le(o.$$.fragment,Ue),s=N(Ue),r=I(Ue,"DIV",{class:!0,"data-svelte-h":!0}),Ie(r)!=="svelte-1uhcjv4"&&(r.innerHTML=c),a=N(Ue),i=I(Ue,"DIV",{class:!0});var xe=C(i);f=I(xe,"SPAN",{class:!0});var gt=C(f);d=re(gt,u),gt.forEach(v),m=N(xe),$=I(xe,"DIV",{class:!0}),C($).forEach(v),V=N(xe),j=I(xe,"SPAN",{class:!0});var mt=C(j);z=re(mt,L),mt.forEach(v),xe.forEach(v),Ue.forEach(v),D=N(Ze),M=I(Ze,"DIV",{class:!0});var Ye=C(M);_=ye(Ye,"svg",{class:!0,"aria-hidden":!0,xmlns:!0,width:!0,height:!0,fill:!0,viewBox:!0});var kt=C(_);y=ye(kt,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),C(y).forEach(v),kt.forEach(v),F=N(Ye),Z=I(Ye,"DIV",{});var pt=C(Z);le(P.$$.fragment,pt),X=N(pt),le(W.$$.fragment,pt),pt.forEach(v),ee=N(Ye),T=I(Ye,"DIV",{class:!0,"data-svelte-h":!0}),Ie(T)!=="svelte-15vmxu9"&&(T.textContent=k),K=N(Ye),w=I(Ye,"DIV",{class:!0,"data-svelte-h":!0}),Ie(w)!=="svelte-bz6asq"&&(w.innerHTML=G),Ye.forEach(v),A=N(Ze),b=I(Ze,"DIV",{class:!0});var it=C(b);U=ye(it,"svg",{class:!0,"aria-hidden":!0,xmlns:!0,width:!0,height:!0,fill:!0,viewBox:!0});var Kt=C(U);q=ye(Kt,"path",{stroke:!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0}),C(q).forEach(v),Kt.forEach(v),ge=N(it),de=I(it,"DIV",{});var Vt=C(de);le(O.$$.fragment,Vt),pe=N(Vt),le(Y.$$.fragment,Vt),Vt.forEach(v),me=N(it),Re=I(it,"DIV",{class:!0,"data-svelte-h":!0}),Ie(Re)!=="svelte-1fyrzav"&&(Re.textContent=Pe),Ce=N(it),Qe=I(it,"DIV",{class:!0,"data-svelte-h":!0}),Ie(Qe)!=="svelte-1lh8vbm"&&(Qe.innerHTML=Te),it.forEach(v),qe=N(Ze),Q=I(Ze,"DIV",{class:!0});var Dt=C(Q);le(ue.$$.fragment,Dt),be=N(Dt),Be=I(Dt,"DIV",{class:!0,"data-svelte-h":!0}),Ie(Be)!=="svelte-10aghm9"&&(Be.textContent=rt),Dt.forEach(v),Ze.forEach(v),Ee.forEach(v),this.h()},h(){h(r,"class","matrix-label svelte-1y1cy1i"),h(f,"class","val svelte-1y1cy1i"),h($,"class","bar svelte-1y1cy1i"),h(j,"class","val svelte-1y1cy1i"),h(i,"class","color-scale svelte-1y1cy1i"),h(t,"class",p=ae(ie("attention-matrix attention-qk flex flex-col items-center",{"attention-initial":n[0]}))+" svelte-1y1cy1i"),h(y,"stroke","currentColor"),h(y,"stroke-linecap","round"),h(y,"stroke-linejoin","round"),h(y,"stroke-width","2"),h(y,"d","M19 12H5m14 0-4 4m4-4-4-4"),h(_,"class","arrow svelte-1y1cy1i"),h(_,"aria-hidden","true"),h(_,"xmlns","http://www.w3.org/2000/svg"),h(_,"width","24"),h(_,"height","24"),h(_,"fill","none"),h(_,"viewBox","0 0 24 24"),h(T,"class","matrix-label svelte-1y1cy1i"),h(w,"class","color-scale svelte-1y1cy1i"),h(M,"class","attention-matrix attention-mask flex flex-col items-center svelte-1y1cy1i"),h(q,"stroke","currentColor"),h(q,"stroke-linecap","round"),h(q,"stroke-linejoin","round"),h(q,"stroke-width","2"),h(q,"d","M19 12H5m14 0-4 4m4-4-4-4"),h(U,"class","arrow svelte-1y1cy1i"),h(U,"aria-hidden","true"),h(U,"xmlns","http://www.w3.org/2000/svg"),h(U,"width","24"),h(U,"height","24"),h(U,"fill","none"),h(U,"viewBox","0 0 24 24"),h(Re,"class","matrix-label svelte-1y1cy1i"),h(Qe,"class","color-scale svelte-1y1cy1i"),h(b,"class",we=ae(ie("attention-matrix attention-softmax flex flex-col items-center",{"attention-out":n[0]}))+" svelte-1y1cy1i"),h(Be,"class","matrix-label svelte-1y1cy1i"),h(Q,"class",ce=ae(ie("attention-matrix attention-result flex flex-col items-center",{"attention-initial":!n[0],"attention-out":!n[0]}))+" svelte-1y1cy1i"),It(()=>n[24].call(Q)),h(l,"role","button"),h(l,"tabindex","0"),h(l,"class",vt=ae(ie("attention-matrix-container relative flex gap-3 p-3 pb-1",{active:n[0]}))+" svelte-1y1cy1i"),h(e,"class","flex items-center gap-8 px-5"),h(e,"style",Je=`--attention-matrix-width: ${n[7]}px;`)},m(he,Ee){H(he,e,Ee),g(e,l),g(l,t),ne(o,t,null),g(t,s),g(t,r),g(t,a),g(t,i),g(i,f),g(f,d),g(i,m),g(i,$),g(i,V),g(i,j),g(j,z),n[20](t),g(l,D),g(l,M),g(M,_),g(_,y),g(M,F),g(M,Z),ne(P,Z,null),g(Z,X),ne(W,Z,null),g(M,ee),g(M,T),g(M,K),g(M,w),n[21](M),g(l,A),g(l,b),g(b,U),g(U,q),g(b,ge),g(b,de),ne(O,de,null),g(de,pe),ne(Y,de,null),g(b,me),g(b,Re),g(b,Ce),g(b,Qe),n[22](b),g(l,qe),g(l,Q),ne(ue,Q,null),g(Q,be),g(Q,Be),n[23](Q),Ae=pn(Q,n[24].bind(Q)),n[25](l),We=!0,Ge||(Wt=[_e(l,"click",n[13]),_e(l,"keydown",n[13])],Ge=!0)},p(he,Ee){var kt,pt;const Ze={};Ee[0]&4&&(Ze.data=he[2]),Ee[0]&1024&&(Ze.cellHeight=he[10]),Ee[0]&1024&&(Ze.cellWidth=he[10]),Ee[0]&512&&(Ze.colorScale=he[9]),o.$set(Ze),(!We||Ee[0]&2)&&u!==(u=((kt=he[1][0])==null?void 0:kt.toFixed(1))+"")&&Ve(d,u),(!We||Ee[0]&2)&&L!==(L=((pt=he[1][1])==null?void 0:pt.toFixed(1))+"")&&Ve(z,L),(!We||Ee[0]&1&&p!==(p=ae(ie("attention-matrix attention-qk flex flex-col items-center",{"attention-initial":he[0]}))+" svelte-1y1cy1i"))&&h(t,"class",p);const Ue={};Ee[0]&4&&(Ue.data=he[2]),Ee[0]&1024&&(Ue.cellHeight=he[10]),Ee[0]&1024&&(Ue.cellWidth=he[10]),Ee[0]&512&&(Ue.colorScale=he[9]),P.$set(Ue);const xe={};Ee[0]&4096&&(xe.data=at(he[12])),Ee[0]&1024&&(xe.cellHeight=he[10]),Ee[0]&1024&&(xe.cellWidth=he[10]),W.$set(xe);const gt={};Ee[0]&4096&&(gt.data=at(he[12])),Ee[0]&1024&&(gt.cellHeight=he[10]),Ee[0]&1024&&(gt.cellWidth=he[10]),O.$set(gt);const mt={};Ee[0]&2048&&(mt.data=at(he[11])),Ee[0]&1024&&(mt.cellHeight=he[10]),Ee[0]&1024&&(mt.cellWidth=he[10]),Y.$set(mt),(!We||Ee[0]&1&&we!==(we=ae(ie("attention-matrix attention-softmax flex flex-col items-center",{"attention-out":he[0]}))+" svelte-1y1cy1i"))&&h(b,"class",we);const Ye={};Ee[0]&2048&&(Ye.data=at(he[11])),Ee[0]&1024&&(Ye.cellHeight=he[10]),Ee[0]&1024&&(Ye.cellWidth=he[10]),ue.$set(Ye),(!We||Ee[0]&1&&ce!==(ce=ae(ie("attention-matrix attention-result flex flex-col items-center",{"attention-initial":!he[0],"attention-out":!he[0]}))+" svelte-1y1cy1i"))&&h(Q,"class",ce),(!We||Ee[0]&1&&vt!==(vt=ae(ie("attention-matrix-container relative flex gap-3 p-3 pb-1",{active:he[0]}))+" svelte-1y1cy1i"))&&h(l,"class",vt),(!We||Ee[0]&128&&Je!==(Je=`--attention-matrix-width: ${he[7]}px;`))&&h(e,"style",Je)},i(he){We||(B(o.$$.fragment,he),B(P.$$.fragment,he),B(W.$$.fragment,he),B(O.$$.fragment,he),B(Y.$$.fragment,he),B(ue.$$.fragment,he),We=!0)},o(he){R(o.$$.fragment,he),R(P.$$.fragment,he),R(W.$$.fragment,he),R(O.$$.fragment,he),R(Y.$$.fragment,he),R(ue.$$.fragment,he),We=!1},d(he){he&&v(e),se(o),n[20](null),se(P),se(W),n[21](null),se(O),se(Y),n[22](null),se(ue),n[23](null),Ae(),n[25](null),Ge=!1,je(Wt)}}}let ps=16,_s=20,bs=10;function $s(n,e,l){let t,o,s,r,c,a,i,f,u,d;$e(n,ot,b=>l(17,f=b)),$e(n,Fe,b=>l(18,u=b)),$e(n,wt,b=>l(19,d=b));const{theme:m}=dt(ht);let $,V,j,L,z=0,p=!1;const D=St("block-id"),M=()=>{p||(Fe.set({id:D}),P())};let _;function y(b){p&&!_.contains(b.target)&&Fe.set({id:null})}st(()=>(document.body.addEventListener("click",y),()=>{document.body.removeEventListener("click",y)}));let F=ft.timeline(),Z=ft.timeline();const P=()=>{l(0,p=!0),Z.progress(1);const b=document.querySelectorAll("div.sankey g.attention path.key-to-attention"),U=document.querySelectorAll("div.sankey g.attention path.query-to-attention"),q=document.querySelectorAll("div.sankey g.attention path.to-attention-out");[...b,...U].forEach(O=>{const pe=O.getTotalLength();O.style.strokeDasharray=pe,O.style.strokeDashoffset=pe});const ge=1.2,de=Number((ge/f.length).toFixed(2));F.set([V.querySelector(".prev"),j.querySelector(".prev")],{opacity:1}).set([V.querySelector(".main"),j.querySelector(".main")],{opacity:0}),F.set(q,{opacity:0}),F.to(L,{opacity:0,display:"none",duration:.2}),F.set($,{width:"auto",display:"flex",opacity:0}).to($,{opacity:1,duration:.5}).to(b,{strokeDashoffset:0,stagger:de,duration:ge,ease:"power2.out"}).to(U,{strokeDashoffset:0,stagger:de,duration:ge,ease:"power2.out"},"<").from($.querySelectorAll("svg circle"),{scale:0,transformOrigin:"50% 50%",opacity:0,delay:ge/f.length,stagger:Number((ge/Math.pow(f.length,2)).toFixed(2)),ease:"power2.out",duration:ge},"<"),F.set(V,{width:0,x:z*-1,opacity:0}).to(V,{opacity:1,display:"flex",width:z,x:0,duration:.5}).to(V.querySelector(".prev"),{opacity:0,duration:1}).to(V.querySelector(".main"),{opacity:1,duration:1},"<"),F.set(j,{width:0,x:z*-1,opacity:0}).to(j,{opacity:1,display:"flex",width:z,x:0,duration:.4}).to(j.querySelector(".prev"),{opacity:0,duration:1}).to(j.querySelector(".main"),{opacity:1,duration:1},"<"),F.to(q,{opacity:.5})},X=()=>{l(0,p=!1),F.progress(1),Z.to([$,V,j],{opacity:0,display:"none",width:0,duration:.5}),Z.to(L,{opacity:1,display:"flex",duration:.5},0)},W=(b,U)=>Ft().domain([-3,3]).range(["white",m.colors.purple[700]])(b),ee=(b,U)=>zt("white",m.colors.purple[700])(b);function T(b){Xe[b?"unshift":"push"](()=>{$=b,l(3,$)})}function k(b){Xe[b?"unshift":"push"](()=>{V=b,l(4,V)})}function K(b){Xe[b?"unshift":"push"](()=>{j=b,l(5,j)})}function w(b){Xe[b?"unshift":"push"](()=>{L=b,l(6,L)})}function G(){z=this.offsetWidth,l(7,z)}function A(b){Xe[b?"unshift":"push"](()=>{_=b,l(8,_)})}return n.$$.update=()=>{var b,U,q,ge,de,O;n.$$.dirty[0]&131072&&l(16,t=Array(f.length).fill(0).map(pe=>Array(f.length).fill(-1/0))),n.$$.dirty[0]&589824&&l(2,o=((U=(b=d==null?void 0:d.outputs)==null?void 0:b.block_0_attn_head_0_attn)==null?void 0:U.data)||t),n.$$.dirty[0]&589824&&l(12,s=((ge=(q=d==null?void 0:d.outputs)==null?void 0:q.block_0_attn_head_0_attn_masked)==null?void 0:ge.data)||t),n.$$.dirty[0]&589824&&l(11,r=((O=(de=d==null?void 0:d.outputs)==null?void 0:de.block_0_attn_head_0_attn_dropout)==null?void 0:O.data)||t),n.$$.dirty[0]&131072&&l(10,c=Math.min(_s,Math.max(1/f.length*ps*6,bs))),n.$$.dirty[0]&262145&&u.id!==D&&p&&(l(0,p=!1),X()),n.$$.dirty[0]&4&&l(1,a=ts(o.flat())),n.$$.dirty[0]&2&&l(9,i=(pe,Y)=>Ft().domain(a).range(["white",m.colors.purple[700]])(pe))},[p,a,o,$,V,j,L,z,_,i,c,r,s,M,W,ee,t,f,u,d,T,k,K,w,G,A]}class ws extends He{constructor(e){super(),ze(this,e,$s,ms,Ne,{},null,[-1,-1])}}function ks(n){let e;return{c(){e=E("canvas"),this.h()},l(l){e=I(l,"CANVAS",{class:!0}),C(e).forEach(v),this.h()},h(){h(e,"class","svelte-ex5m8"),x(e,"active",n[0])},m(l,t){H(l,e,t),n[4](e)},p(l,[t]){t&1&&x(e,"active",l[0])},i:Se,o:Se,d(l){l&&v(e),n[4](null)}}}let ys=100;const At=1;function Es(n,e,l){const{theme:t}=dt(ht);let{active:o=!1}=e,{data:s=new Array(ys).fill(0).map(d=>Math.random())}=e,{colorScale:r=void 0}=e,c;const a=typeof r=="string"?r:"gray",i=typeof r=="function"?r:zt(t.colors[a][100],t.colors[a][400]);function f(){const d=c.getContext("2d");if(!d)return;const m=c.parentElement.clientWidth,$=c.parentElement.clientHeight;d.clearRect(0,0,m,$);let V=4;l(1,c.width=m*V,c),l(1,c.height=$*V,c),l(1,c.style.width=`${m}px`,c),l(1,c.style.height=`${$}px`,c);for(let j=0;j<$/At;j++){const L=s[j];d.fillStyle=i(L),d.fillRect(0,j*At*V,m*V,At*V)}}st(()=>{const d=Bt.subscribe(f);return()=>{d()}});function u(d){Xe[d?"unshift":"push"](()=>{c=d,l(1,c)})}return n.$$set=d=>{"active"in d&&l(0,o=d.active),"data"in d&&l(2,s=d.data),"colorScale"in d&&l(3,r=d.colorScale)},n.$$.update=()=>{n.$$.dirty&6&&s&&c&&f()},[o,c,s,r,u]}class tt extends He{constructor(e){super(),ze(this,e,Es,ks,Ne,{active:0,data:2,colorScale:3})}}function sl(n,e,l){const t=n.slice();return t[14]=e[l],t[16]=l,t}function ol(n,e,l){const t=n.slice();return t[14]=e[l],t[16]=l,t}function rl(n,e,l){const t=n.slice();return t[14]=e[l],t[16]=l,t}function il(n,e,l){const t=n.slice();return t[14]=e[l],t[16]=l,t}function al(n,e,l){const t=n.slice();return t[14]=e[l],t[16]=l,t}function Is(n){let e,l=n[5].dimension*3+"",t,o;return{c(){e=oe("size(1, "),t=oe(l),o=oe(")")},l(s){e=re(s,"size(1, "),t=re(s,l),o=re(s,")")},m(s,r){H(s,e,r),H(s,t,r),H(s,o,r)},p(s,r){r&32&&l!==(l=s[5].dimension*3+"")&&Ve(t,l)},d(s){s&&(v(e),v(t),v(o))}}}function Cs(n){let e,l=n[5].dimension/n[5].attention_head_num+"",t,o;return{c(){e=oe("Head1 Query, size(1, "),t=oe(l),o=oe(")")},l(s){e=re(s,"Head1 Query, size(1, "),t=re(s,l),o=re(s,")")},m(s,r){H(s,e,r),H(s,t,r),H(s,o,r)},p(s,r){r&32&&l!==(l=s[5].dimension/s[5].attention_head_num+"")&&Ve(t,l)},d(s){s&&(v(e),v(t),v(o))}}}function Vs(n){let e,l=n[5].dimension/n[5].attention_head_num+"",t,o;return{c(){e=oe("Head1 Key, size(1, "),t=oe(l),o=oe(")")},l(s){e=re(s,"Head1 Key, size(1, "),t=re(s,l),o=re(s,")")},m(s,r){H(s,e,r),H(s,t,r),H(s,o,r)},p(s,r){r&32&&l!==(l=s[5].dimension/s[5].attention_head_num+"")&&Ve(t,l)},d(s){s&&(v(e),v(t),v(o))}}}function Ds(n){let e,l=n[5].dimension/n[5].attention_head_num+"",t,o;return{c(){e=oe("Head1 Value size(1, "),t=oe(l),o=oe(")")},l(s){e=re(s,"Head1 Value size(1, "),t=re(s,l),o=re(s,")")},m(s,r){H(s,e,r),H(s,t,r),H(s,o,r)},p(s,r){r&32&&l!==(l=s[5].dimension/s[5].attention_head_num+"")&&Ve(t,l)},d(s){s&&(v(e),v(t),v(o))}}}function Ls(n){let e,l=n[5].dimension/n[5].attention_head_num+"",t,o;return{c(){e=oe("Head1 Attention Out, size(1, "),t=oe(l),o=oe(")")},l(s){e=re(s,"Head1 Attention Out, size(1, "),t=re(s,l),o=re(s,")")},m(s,r){H(s,e,r),H(s,t,r),H(s,o,r)},p(s,r){r&32&&l!==(l=s[5].dimension/s[5].attention_head_num+"")&&Ve(t,l)},d(s){s&&(v(e),v(t),v(o))}}}function cl(n){let e,l="Q";return{c(){e=E("span"),e.textContent=l},l(t){e=I(t,"SPAN",{"data-svelte-h":!0}),Ie(e)!=="svelte-10ub4hf"&&(e.textContent=l)},m(t,o){H(t,e,o)},d(t){t&&v(e)}}}function fl(n){let e,l="K";return{c(){e=E("span"),e.textContent=l},l(t){e=I(t,"SPAN",{"data-svelte-h":!0}),Ie(e)!=="svelte-1c09r6x"&&(e.textContent=l)},m(t,o){H(t,e,o)},d(t){t&&v(e)}}}function ul(n){let e,l="V";return{c(){e=E("span"),e.textContent=l},l(t){e=I(t,"SPAN",{"data-svelte-h":!0}),Ie(e)!=="svelte-j40kxg"&&(e.textContent=l)},m(t,o){H(t,e,o)},d(t){t&&v(e)}}}function dl(n){let e,l,t,o,s,r,c,a,i,f,u,d,m,$,V,j,L,z,p,D,M,_,y,F,Z;t=new tt({props:{colorScale:"blue",active:n[2]===n[16]}});let P=n[2]!==n[16]&&cl();f=new tt({props:{colorScale:"red",active:n[2]===n[16]}});let X=n[2]!==n[16]&&fl();L=new tt({props:{colorScale:"green",active:n[2]===n[16]}});let W=n[2]!==n[16]&&ul();function ee(){return n[11](n[16])}return{c(){e=E("div"),l=E("div"),te(t.$$.fragment),o=S(),s=E("div"),r=S(),c=E("div"),P&&P.c(),a=S(),i=E("div"),te(f.$$.fragment),u=S(),d=E("div"),m=S(),$=E("div"),X&&X.c(),V=S(),j=E("div"),te(L.$$.fragment),z=S(),p=E("div"),D=S(),M=E("div"),W&&W.c(),_=S(),this.h()},l(T){e=I(T,"DIV",{class:!0,role:!0});var k=C(e);l=I(k,"DIV",{class:!0});var K=C(l);le(t.$$.fragment,K),o=N(K),s=I(K,"DIV",{class:!0}),C(s).forEach(v),r=N(K),c=I(K,"DIV",{class:!0});var w=C(c);P&&P.l(w),w.forEach(v),K.forEach(v),a=N(k),i=I(k,"DIV",{class:!0});var G=C(i);le(f.$$.fragment,G),u=N(G),d=I(G,"DIV",{class:!0}),C(d).forEach(v),m=N(G),$=I(G,"DIV",{class:!0});var A=C($);X&&X.l(A),A.forEach(v),G.forEach(v),V=N(k),j=I(k,"DIV",{class:!0});var b=C(j);le(L.$$.fragment,b),z=N(b),p=I(b,"DIV",{class:!0}),C(p).forEach(v),D=N(b),M=I(b,"DIV",{class:!0});var U=C(M);W&&W.l(U),U.forEach(v),b.forEach(v),_=N(k),k.forEach(v),this.h()},h(){h(s,"class",ae(`sub-vector x1-12 head1 ${In}`)+" svelte-1hhniwm"),h(c,"class","sub-vector head-rest grow svelte-1hhniwm"),h(l,"class",ae(`sub-vector query relative flex grow flex-col ${Bs}`)+" svelte-1hhniwm"),h(d,"class",ae(`sub-vector x1-12 head1 ${Cn}`)+" svelte-1hhniwm"),h($,"class","sub-vector head-rest grow svelte-1hhniwm"),h(i,"class",ae(`sub-vector key relative flex grow flex-col ${Ss}`)+" svelte-1hhniwm"),h(p,"class",ae(`sub-vector x1-12 head1 ${Vn}`)+" svelte-1hhniwm"),h(M,"class","sub-vector head-rest grow svelte-1hhniwm"),h(j,"class",ae(`sub-vector value relative flex grow flex-col ${Ns}`)+" svelte-1hhniwm"),h(e,"class","qkv-weighted vector x3 flex flex-col"),h(e,"role","group"),x(e,"last",n[16]===n[6].length-1)},m(T,k){H(T,e,k),g(e,l),ne(t,l,null),g(l,o),g(l,s),g(l,r),g(l,c),P&&P.m(c,null),g(e,a),g(e,i),ne(f,i,null),g(i,u),g(i,d),g(i,m),g(i,$),X&&X.m($,null),g(e,V),g(e,j),ne(L,j,null),g(j,z),g(j,p),g(j,D),g(j,M),W&&W.m(M,null),g(e,_),y=!0,F||(Z=[_e(e,"mouseenter",ee),_e(e,"mouseleave",n[12])],F=!0)},p(T,k){n=T;const K={};k&4&&(K.active=n[2]===n[16]),t.$set(K),n[2]!==n[16]?P||(P=cl(),P.c(),P.m(c,null)):P&&(P.d(1),P=null);const w={};k&4&&(w.active=n[2]===n[16]),f.$set(w),n[2]!==n[16]?X||(X=fl(),X.c(),X.m($,null)):X&&(X.d(1),X=null);const G={};k&4&&(G.active=n[2]===n[16]),L.$set(G),n[2]!==n[16]?W||(W=ul(),W.c(),W.m(M,null)):W&&(W.d(1),W=null),(!y||k&64)&&x(e,"last",n[16]===n[6].length-1)},i(T){y||(B(t.$$.fragment,T),B(f.$$.fragment,T),B(L.$$.fragment,T),y=!0)},o(T){R(t.$$.fragment,T),R(f.$$.fragment,T),R(L.$$.fragment,T),y=!1},d(T){T&&v(e),se(t),P&&P.d(),se(f),X&&X.d(),se(L),W&&W.d(),F=!1,je(Z)}}}function hl(n){let e,l,t=n[14]+"",o,s,r,c;return{c(){e=E("div"),l=E("span"),o=oe(t),s=S(),r=E("div"),c=S(),this.h()},l(a){e=I(a,"DIV",{class:!0});var i=C(e);l=I(i,"SPAN",{class:!0});var f=C(l);o=re(f,t),f.forEach(v),s=N(i),r=I(i,"DIV",{class:!0}),C(r).forEach(v),c=N(i),i.forEach(v),this.h()},h(){h(l,"class","label float svelte-1hhniwm"),h(r,"class",ae(`vector x1-12  ${In}`)+" svelte-1hhniwm"),h(e,"class","head1 cell x1-12 text-xs"),x(e,"last",n[16]===n[6].length-1)},m(a,i){H(a,e,i),g(e,l),g(l,o),g(e,s),g(e,r),g(e,c)},p(a,i){i&64&&t!==(t=a[14]+"")&&Ve(o,t),i&64&&x(e,"last",a[16]===a[6].length-1)},d(a){a&&v(e)}}}function vl(n){let e,l,t=n[14]+"",o,s,r,c,a;return{c(){e=E("div"),l=E("span"),o=oe(t),s=S(),r=E("div"),c=S(),this.h()},l(i){e=I(i,"DIV",{class:!0});var f=C(e);l=I(f,"SPAN",{class:!0});var u=C(l);o=re(u,t),u.forEach(v),s=N(f),r=I(f,"DIV",{class:!0}),C(r).forEach(v),c=N(f),f.forEach(v),this.h()},h(){h(l,"class","label float svelte-1hhniwm"),h(r,"class",ae(`vector x1-12 ${Cn}`)+" svelte-1hhniwm"),h(e,"class",a="head1 cell x1-12 text-xs class:last="+(n[16]===n[6].length-1)+" svelte-1hhniwm")},m(i,f){H(i,e,f),g(e,l),g(l,o),g(e,s),g(e,r),g(e,c)},p(i,f){f&64&&t!==(t=i[14]+"")&&Ve(o,t),f&64&&a!==(a="head1 cell x1-12 text-xs class:last="+(i[16]===i[6].length-1)+" svelte-1hhniwm")&&h(e,"class",a)},d(i){i&&v(e)}}}function gl(n){let e,l,t=n[14]+"",o,s,r,c;return{c(){e=E("div"),l=E("span"),o=oe(t),s=S(),r=E("div"),c=S(),this.h()},l(a){e=I(a,"DIV",{class:!0});var i=C(e);l=I(i,"SPAN",{class:!0});var f=C(l);o=re(f,t),f.forEach(v),s=N(i),r=I(i,"DIV",{class:!0}),C(r).forEach(v),c=N(i),i.forEach(v),this.h()},h(){h(l,"class","label float svelte-1hhniwm"),h(r,"class",ae(`vector x1-12 ${Vn}`)+" svelte-1hhniwm"),h(e,"class","head1 cell x1-12 text-xs"),x(e,"last",n[16]===n[6].length-1)},m(a,i){H(a,e,i),g(e,l),g(l,o),g(e,s),g(e,r),g(e,c)},p(a,i){i&64&&t!==(t=a[14]+"")&&Ve(o,t),i&64&&x(e,"last",a[16]===a[6].length-1)},d(a){a&&v(e)}}}function ml(n){let e,l,t;return{c(){e=E("div"),l=E("div"),t=S(),this.h()},l(o){e=I(o,"DIV",{class:!0});var s=C(e);l=I(s,"DIV",{class:!0}),C(l).forEach(v),t=N(s),s.forEach(v),this.h()},h(){h(l,"class",ae(`vector x1-12 ${Hs}`)+" svelte-1hhniwm"),h(e,"class","head1 cell x1-12"),x(e,"last",n[16]===n[6].length-1)},m(o,s){H(o,e,s),g(e,l),g(e,t)},p(o,s){s&64&&x(e,"last",o[16]===o[6].length-1)},d(o){o&&v(e)}}}function Ms(n){let e,l,t,o,s="Query",r,c,a,i,f="Key",u,d,m,$,V="Value",j,L,z,p,D,M,_,y,F="Out",Z,P,X,W,ee=n[5].attention_head_num+"",T,k,K,w=ve(n[6]),G=[];for(let O=0;O<w.length;O+=1)G[O]=hl(il(n,w,O));let A=ve(n[6]),b=[];for(let O=0;O<A.length;O+=1)b[O]=vl(rl(n,A,O));let U=ve(n[6]),q=[];for(let O=0;O<U.length;O+=1)q[O]=gl(ol(n,U,O));p=new ws({});let ge=ve(n[6]),de=[];for(let O=0;O<ge.length;O+=1)de[O]=ml(sl(n,ge,O));return{c(){e=E("div"),l=E("div"),t=E("div"),o=E("div"),o.textContent=s,r=S();for(let O=0;O<G.length;O+=1)G[O].c();c=S(),a=E("div"),i=E("div"),i.textContent=f,u=S();for(let O=0;O<b.length;O+=1)b[O].c();d=S(),m=E("div"),$=E("div"),$.textContent=V,j=S();for(let O=0;O<q.length;O+=1)q[O].c();L=S(),z=E("div"),te(p.$$.fragment),D=S(),M=E("div"),_=E("div"),y=E("div"),y.textContent=F,Z=S();for(let O=0;O<de.length;O+=1)de[O].c();P=S(),X=E("div"),W=oe("Head 1 of "),T=oe(ee),this.h()},l(O){e=I(O,"DIV",{class:!0,style:!0});var pe=C(e);l=I(pe,"DIV",{class:!0});var Y=C(l);t=I(Y,"DIV",{class:!0});var me=C(t);o=I(me,"DIV",{class:!0,"data-svelte-h":!0}),Ie(o)!=="svelte-1a2739d"&&(o.textContent=s),r=N(me);for(let qe=0;qe<G.length;qe+=1)G[qe].l(me);me.forEach(v),c=N(Y),a=I(Y,"DIV",{class:!0});var Re=C(a);i=I(Re,"DIV",{class:!0,"data-svelte-h":!0}),Ie(i)!=="svelte-bmmhtu"&&(i.textContent=f),u=N(Re);for(let qe=0;qe<b.length;qe+=1)b[qe].l(Re);Re.forEach(v),d=N(Y),m=I(Y,"DIV",{class:!0});var Pe=C(m);$=I(Pe,"DIV",{class:!0,"data-svelte-h":!0}),Ie($)!=="svelte-17pe084"&&($.textContent=V),j=N(Pe);for(let qe=0;qe<q.length;qe+=1)q[qe].l(Pe);Pe.forEach(v),Y.forEach(v),L=N(pe),z=I(pe,"DIV",{class:!0});var Ce=C(z);le(p.$$.fragment,Ce),Ce.forEach(v),D=N(pe),M=I(pe,"DIV",{class:!0});var Qe=C(M);_=I(Qe,"DIV",{class:!0});var Te=C(_);y=I(Te,"DIV",{class:!0,"data-svelte-h":!0}),Ie(y)!=="svelte-68unf9"&&(y.textContent=F),Z=N(Te);for(let qe=0;qe<de.length;qe+=1)de[qe].l(Te);Te.forEach(v),Qe.forEach(v),P=N(pe),X=I(pe,"DIV",{class:!0});var we=C(X);W=re(we,"Head 1 of "),T=re(we,ee),we.forEach(v),pe.forEach(v),this.h()},h(){h(o,"class","title svelte-1hhniwm"),h(t,"class","column query"),h(i,"class","title svelte-1hhniwm"),h(a,"class","column key"),h($,"class","title svelte-1hhniwm"),h(m,"class","column value"),h(l,"class","qkv flex h-full flex-col justify-center gap-[5rem] pl-[6rem]"),h(z,"class","resize-watch attention-matrix flex"),h(y,"class","title svelte-1hhniwm"),h(_,"class","column out"),h(M,"class","head-out mx-[2rem]"),h(X,"class","head-title absolute bottom-2 right-3 text-right text-gray-400"),h(e,"class","head-block flex w-full items-center justify-between px-2"),h(e,"style",k=`height:${n[7]}px;`)},m(O,pe){H(O,e,pe),g(e,l),g(l,t),g(t,o),g(t,r);for(let Y=0;Y<G.length;Y+=1)G[Y]&&G[Y].m(t,null);g(l,c),g(l,a),g(a,i),g(a,u);for(let Y=0;Y<b.length;Y+=1)b[Y]&&b[Y].m(a,null);g(l,d),g(l,m),g(m,$),g(m,j);for(let Y=0;Y<q.length;Y+=1)q[Y]&&q[Y].m(m,null);g(e,L),g(e,z),ne(p,z,null),g(e,D),g(e,M),g(M,_),g(_,y),g(_,Z);for(let Y=0;Y<de.length;Y+=1)de[Y]&&de[Y].m(_,null);g(e,P),g(e,X),g(X,W),g(X,T),K=!0},p(O,pe){if(pe&64){w=ve(O[6]);let Y;for(Y=0;Y<w.length;Y+=1){const me=il(O,w,Y);G[Y]?G[Y].p(me,pe):(G[Y]=hl(me),G[Y].c(),G[Y].m(t,null))}for(;Y<G.length;Y+=1)G[Y].d(1);G.length=w.length}if(pe&64){A=ve(O[6]);let Y;for(Y=0;Y<A.length;Y+=1){const me=rl(O,A,Y);b[Y]?b[Y].p(me,pe):(b[Y]=vl(me),b[Y].c(),b[Y].m(a,null))}for(;Y<b.length;Y+=1)b[Y].d(1);b.length=A.length}if(pe&64){U=ve(O[6]);let Y;for(Y=0;Y<U.length;Y+=1){const me=ol(O,U,Y);q[Y]?q[Y].p(me,pe):(q[Y]=gl(me),q[Y].c(),q[Y].m(m,null))}for(;Y<q.length;Y+=1)q[Y].d(1);q.length=U.length}if(pe&64){ge=ve(O[6]);let Y;for(Y=0;Y<ge.length;Y+=1){const me=sl(O,ge,Y);de[Y]?de[Y].p(me,pe):(de[Y]=ml(me),de[Y].c(),de[Y].m(_,null))}for(;Y<de.length;Y+=1)de[Y].d(1);de.length=ge.length}(!K||pe&32)&&ee!==(ee=O[5].attention_head_num+"")&&Ve(T,ee),(!K||pe&128&&k!==(k=`height:${O[7]}px;`))&&h(e,"style",k)},i(O){K||(B(p.$$.fragment,O),K=!0)},o(O){R(p.$$.fragment,O),K=!1},d(O){O&&v(e),De(G,O),De(b,O),De(q,O),se(p),De(de,O)}}}function qs(n){let e,l,t="<div>Multi-head Self Attention</div>",o,s,r,c='<div class="bounding-title svelte-1hhniwm">Transformer Block 1</div>',a,i,f,u,d,m,$,V,j,L,z,p,D,M,_,y,F,Z,P,X,W,ee;m=new Ke({props:{triggeredBy:".attention .qkv-weighted",placement:"right",class:"popover text-sm font-light",$$slots:{default:[Is]},$$scope:{ctx:n}}}),V=new Ke({props:{triggeredBy:".attention .query .head1",placement:"right",class:"popover text-sm font-light",$$slots:{default:[Cs]},$$scope:{ctx:n}}}),L=new Ke({props:{triggeredBy:".attention .key .head1",placement:"right",class:"popover text-sm font-light",$$slots:{default:[Vs]},$$scope:{ctx:n}}}),p=new Ke({props:{triggeredBy:".attention .value .head1",placement:"right",class:"popover text-sm font-light",$$slots:{default:[Ds]},$$scope:{ctx:n}}}),M=new Ke({props:{triggeredBy:".attention .out .head1",placement:"right",class:"popover text-sm font-light",$$slots:{default:[Ls]},$$scope:{ctx:n}}});let T=ve(n[6]),k=[];for(let w=0;w<T.length;w+=1)k[w]=dl(al(n,T,w));const K=w=>R(k[w],1,1,()=>{k[w]=null});return Z=new vs({props:{$$slots:{default:[Ms]},$$scope:{ctx:n}}}),{c(){e=E("div"),l=E("div"),l.innerHTML=t,o=S(),s=E("div"),r=E("div"),r.innerHTML=c,a=S(),i=E("div"),u=S(),d=E("div"),te(m.$$.fragment),$=S(),te(V.$$.fragment),j=S(),te(L.$$.fragment),z=S(),te(p.$$.fragment),D=S(),te(M.$$.fragment),_=S();for(let w=0;w<k.length;w+=1)k[w].c();y=S(),F=E("div"),te(Z.$$.fragment),this.h()},l(w){e=I(w,"DIV",{class:!0});var G=C(e);l=I(G,"DIV",{class:!0,role:!0,"data-svelte-h":!0}),Ie(l)!=="svelte-n6swon"&&(l.innerHTML=t),o=N(G),s=I(G,"DIV",{class:!0});var A=C(s);r=I(A,"DIV",{class:!0,"data-svelte-h":!0}),Ie(r)!=="svelte-vte4ua"&&(r.innerHTML=c),a=N(A),i=I(A,"DIV",{class:!0,style:!0}),C(i).forEach(v),u=N(A),d=I(A,"DIV",{class:!0});var b=C(d);le(m.$$.fragment,b),$=N(b),le(V.$$.fragment,b),j=N(b),le(L.$$.fragment,b),z=N(b),le(p.$$.fragment,b),D=N(b),le(M.$$.fragment,b),_=N(b);for(let q=0;q<k.length;q+=1)k[q].l(b);b.forEach(v),y=N(A),F=I(A,"DIV",{class:!0});var U=C(F);le(Z.$$.fragment,U),U.forEach(v),A.forEach(v),G.forEach(v),this.h()},h(){h(l,"class","title svelte-1hhniwm"),h(l,"role","group"),h(r,"class","bounding transformer-bounding svelte-1hhniwm"),x(r,"active",n[4]),h(i,"class","bounding attention-bounding svelte-1hhniwm"),h(i,"style",f=`padding-bottom:${n[5].attention_head_num*ct.y}px`),x(i,"active",n[1]&&!n[3]),h(d,"class","column"),h(F,"class","heads svelte-1hhniwm"),h(s,"class","content relative svelte-1hhniwm"),h(e,"class",P=ae(ie("attention",n[0],{expanded:n[3]}))+" svelte-1hhniwm")},m(w,G){H(w,e,G),g(e,l),g(e,o),g(e,s),g(s,r),g(s,a),g(s,i),g(s,u),g(s,d),ne(m,d,null),g(d,$),ne(V,d,null),g(d,j),ne(L,d,null),g(d,z),ne(p,d,null),g(d,D),ne(M,d,null),g(d,_);for(let A=0;A<k.length;A+=1)k[A]&&k[A].m(d,null);g(s,y),g(s,F),ne(Z,F,null),X=!0,W||(ee=[_e(l,"mouseenter",n[8]),_e(l,"mouseleave",n[9])],W=!0)},p(w,[G]){(!X||G&16)&&x(r,"active",w[4]),(!X||G&32&&f!==(f=`padding-bottom:${w[5].attention_head_num*ct.y}px`))&&h(i,"style",f),(!X||G&10)&&x(i,"active",w[1]&&!w[3]);const A={};G&2097184&&(A.$$scope={dirty:G,ctx:w}),m.$set(A);const b={};G&2097184&&(b.$$scope={dirty:G,ctx:w}),V.$set(b);const U={};G&2097184&&(U.$$scope={dirty:G,ctx:w}),L.$set(U);const q={};G&2097184&&(q.$$scope={dirty:G,ctx:w}),p.$set(q);const ge={};if(G&2097184&&(ge.$$scope={dirty:G,ctx:w}),M.$set(ge),G&68){T=ve(w[6]);let O;for(O=0;O<T.length;O+=1){const pe=al(w,T,O);k[O]?(k[O].p(pe,G),B(k[O],1)):(k[O]=dl(pe),k[O].c(),B(k[O],1),k[O].m(d,null))}for(Le(),O=T.length;O<k.length;O+=1)K(O);Me()}const de={};G&2097376&&(de.$$scope={dirty:G,ctx:w}),Z.$set(de),(!X||G&9&&P!==(P=ae(ie("attention",w[0],{expanded:w[3]}))+" svelte-1hhniwm"))&&h(e,"class",P)},i(w){if(!X){B(m.$$.fragment,w),B(V.$$.fragment,w),B(L.$$.fragment,w),B(p.$$.fragment,w),B(M.$$.fragment,w);for(let G=0;G<T.length;G+=1)B(k[G]);B(Z.$$.fragment,w),X=!0}},o(w){R(m.$$.fragment,w),R(V.$$.fragment,w),R(L.$$.fragment,w),R(p.$$.fragment,w),R(M.$$.fragment,w),k=k.filter(Boolean);for(let G=0;G<k.length;G+=1)R(k[G]);R(Z.$$.fragment,w),X=!1},d(w){w&&v(e),se(m),se(V),se(L),se(p),se(M),De(k,w),se(Z),W=!1,je(ee)}}}const Bs="bg-blue-200",Ss="bg-red-200",Ns="bg-green-200",In="bg-blue-300",Cn="bg-red-300",Vn="bg-green-300",Hs="bg-purple-300";function zs(n,e,l){let t,o,s,r,c,a;$e(n,Fe,L=>l(10,o=L)),$e(n,yt,L=>l(4,s=L)),$e(n,$t,L=>l(5,r=L)),$e(n,ot,L=>l(6,c=L)),$e(n,_n,L=>l(7,a=L));let{className:i=void 0}=e;Nt("block-id","attention");const f=St("block-id");let u=!1;function d(){l(1,u=!0)}function m(){l(1,u=!1)}let $=null;const V=L=>{l(2,$=L)},j=()=>{l(2,$=null)};return n.$$set=L=>{"className"in L&&l(0,i=L.className)},n.$$.update=()=>{n.$$.dirty&1024&&l(3,t=o.id===f)},[i,u,$,t,s,r,c,a,d,m,o,V,j]}class js extends He{constructor(e){super(),ze(this,e,zs,qs,Ne,{className:0})}}function As(n){let e,l,t,o,s,r,c,a=n[3]&&pl(n);return{c(){e=E("div"),l=E("div"),t=S(),o=ke("svg"),a&&a.c(),s=ke("path"),this.h()},l(i){e=I(i,"DIV",{class:!0});var f=C(e);l=I(f,"DIV",{class:!0}),C(l).forEach(v),t=N(f),o=ye(f,"svg",{class:!0});var u=C(o);a&&a.l(u),s=ye(u,"path",{d:!0,class:!0}),C(s).forEach(v),u.forEach(v),f.forEach(v),this.h()},h(){h(l,"class","cursor svelte-1jqlo12"),h(s,"d",r=`M0,0 L0,${n[6]}`),h(s,"class","svelte-1jqlo12"),h(o,"class","main svelte-1jqlo12"),h(e,"class",c=ae(ie("residual residual-end cell",n[1]))+" svelte-1jqlo12"),x(e,"active",n[5])},m(i,f){H(i,e,f),g(e,l),g(e,t),g(e,o),a&&a.m(o,null),g(o,s)},p(i,f){i[3]?a?a.p(i,f):(a=pl(i),a.c(),a.m(o,s)):a&&(a.d(1),a=null),f&64&&r!==(r=`M0,0 L0,${i[6]}`)&&h(s,"d",r),f&2&&c!==(c=ae(ie("residual residual-end cell",i[1]))+" svelte-1jqlo12")&&h(e,"class",c),f&34&&x(e,"active",i[5])},d(i){i&&v(e),a&&a.d()}}}function Ps(n){let e,l,t,o,s,r,c,a=n[3]&&_l(n);return{c(){e=E("div"),l=E("div"),t=S(),o=ke("svg"),a&&a.c(),s=ke("path"),this.h()},l(i){e=I(i,"DIV",{class:!0});var f=C(e);l=I(f,"DIV",{class:!0}),C(l).forEach(v),t=N(f),o=ye(f,"svg",{class:!0});var u=C(o);a&&a.l(u),s=ye(u,"path",{d:!0,class:!0}),C(s).forEach(v),u.forEach(v),f.forEach(v),this.h()},h(){h(l,"class","cursor svelte-1jqlo12"),h(s,"d",r=`M0,0 L0,${n[6]}`),h(s,"class","svelte-1jqlo12"),h(o,"class","main svelte-1jqlo12"),h(e,"class",c=ae(ie("residual residual-start cell",n[1]))+" svelte-1jqlo12"),x(e,"active",n[5])},m(i,f){H(i,e,f),g(e,l),g(e,t),g(e,o),a&&a.m(o,null),g(o,s)},p(i,f){i[3]?a?a.p(i,f):(a=_l(i),a.c(),a.m(o,s)):a&&(a.d(1),a=null),f&64&&r!==(r=`M0,0 L0,${i[6]}`)&&h(s,"d",r),f&2&&c!==(c=ae(ie("residual residual-start cell",i[1]))+" svelte-1jqlo12")&&h(e,"class",c),f&34&&x(e,"active",i[5])},d(i){i&&v(e),a&&a.d()}}}function Ts(n){let e,l,t,o,s,r,c,a,i,f=n[4]&&bl();return{c(){e=E("div"),l=E("div"),t=S(),o=ke("svg"),s=ke("circle"),r=ke("path"),a=S(),f&&f.c(),this.h()},l(u){e=I(u,"DIV",{class:!0});var d=C(e);l=I(d,"DIV",{class:!0}),C(l).forEach(v),t=N(d),o=ye(d,"svg",{class:!0});var m=C(o);s=ye(m,"circle",{class:!0,cx:!0,cy:!0,r:!0}),C(s).forEach(v),r=ye(m,"path",{class:!0,d:!0}),C(r).forEach(v),m.forEach(v),a=N(d),f&&f.l(d),d.forEach(v),this.h()},h(){h(l,"class","cursor svelte-1jqlo12"),h(s,"class","icon svelte-1jqlo12"),h(s,"cx","50%"),h(s,"cy","50%"),h(s,"r","3"),h(r,"class","line svelte-1jqlo12"),h(r,"d",c=`
     M 0 0
    C 0 ${n[6]*.25}, ${n[6]*.2} ${n[6]*.25}, ${n[6]*.2} ${n[6]*.5}
    C ${n[6]*.2} ${n[6]*.75}, 0 ${n[6]*.75}, 0 ${n[6]}
  `),h(o,"class","main svelte-1jqlo12"),h(e,"class",i=ae(ie("cell ln",n[1]))+" svelte-1jqlo12"),x(e,"active",n[5])},m(u,d){H(u,e,d),g(e,l),g(e,t),g(e,o),g(o,s),g(o,r),g(e,a),f&&f.m(e,null)},p(u,d){d&64&&c!==(c=`
     M 0 0
    C 0 ${u[6]*.25}, ${u[6]*.2} ${u[6]*.25}, ${u[6]*.2} ${u[6]*.5}
    C ${u[6]*.2} ${u[6]*.75}, 0 ${u[6]*.75}, 0 ${u[6]}
  `)&&h(r,"d",c),u[4]?f||(f=bl(),f.c(),f.m(e,null)):f&&(f.d(1),f=null),d&2&&i!==(i=ae(ie("cell ln",u[1]))+" svelte-1jqlo12")&&h(e,"class",i),d&34&&x(e,"active",u[5])},d(u){u&&v(e),f&&f.d()}}}function Gs(n){let e,l,t,o,s,r,c,a,i,f=n[4]&&$l();return{c(){e=E("div"),l=E("div"),t=S(),o=ke("svg"),s=ke("path"),c=ke("circle"),a=S(),f&&f.c(),this.h()},l(u){e=I(u,"DIV",{class:!0});var d=C(e);l=I(d,"DIV",{class:!0}),C(l).forEach(v),t=N(d),o=ye(d,"svg",{class:!0});var m=C(o);s=ye(m,"path",{class:!0,d:!0}),C(s).forEach(v),c=ye(m,"circle",{class:!0,cx:!0,cy:!0,r:!0}),C(c).forEach(v),m.forEach(v),a=N(d),f&&f.l(d),d.forEach(v),this.h()},h(){h(l,"class","cursor svelte-1jqlo12"),h(s,"class","line svelte-1jqlo12"),h(s,"d",r=`M0,0 L0,${n[6]}`),h(c,"class","icon svelte-1jqlo12"),h(c,"cx","50%"),h(c,"cy","50%"),h(c,"r","3"),h(o,"class","main svelte-1jqlo12"),h(e,"class",i=ae(ie("cell dropout",n[1]))+" svelte-1jqlo12"),x(e,"active",n[5])},m(u,d){H(u,e,d),g(e,l),g(e,t),g(e,o),g(o,s),g(o,c),g(e,a),f&&f.m(e,null)},p(u,d){d&64&&r!==(r=`M0,0 L0,${u[6]}`)&&h(s,"d",r),u[4]?f||(f=$l(),f.c(),f.m(e,null)):f&&(f.d(1),f=null),d&2&&i!==(i=ae(ie("cell dropout",u[1]))+" svelte-1jqlo12")&&h(e,"class",i),d&34&&x(e,"active",u[5])},d(u){u&&v(e),f&&f.d()}}}function Fs(n){let e,l,t,o,s,r,c;return{c(){e=E("div"),l=E("div"),t=S(),o=ke("svg"),s=ke("path"),r=ke("circle"),this.h()},l(a){e=I(a,"DIV",{class:!0});var i=C(e);l=I(i,"DIV",{class:!0}),C(l).forEach(v),t=N(i),o=ye(i,"svg",{class:!0});var f=C(o);s=ye(f,"path",{class:!0,d:!0}),C(s).forEach(v),r=ye(f,"circle",{class:!0,cx:!0,cy:!0,r:!0}),C(r).forEach(v),f.forEach(v),i.forEach(v),this.h()},h(){h(l,"class","cursor svelte-1jqlo12"),h(s,"class","line line1 svelte-1jqlo12"),h(s,"d","M0,0 L0,90%"),h(r,"class","icon svelte-1jqlo12"),h(r,"cx","50%"),h(r,"cy","50%"),h(r,"r","3"),h(o,"class","main svelte-1jqlo12"),h(e,"class",c=ae(ie("cell activation",n[1]))+" svelte-1jqlo12"),x(e,"active",n[5])},m(a,i){H(a,e,i),g(e,l),g(e,t),g(e,o),g(o,s),g(o,r)},p(a,i){i&2&&c!==(c=ae(ie("cell activation",a[1]))+" svelte-1jqlo12")&&h(e,"class",c),i&34&&x(e,"active",a[5])},d(a){a&&v(e)}}}function pl(n){let e;return{c(){e=ke("path"),this.h()},l(l){e=ye(l,"path",{id:!0,class:!0,d:!0}),C(e).forEach(v),this.h()},h(){h(e,"id",n[0]),h(e,"class","head svelte-1jqlo12"),h(e,"d","M0,0 Q0,-16 -30,-16")},m(l,t){H(l,e,t)},p(l,t){t&1&&h(e,"id",l[0])},d(l){l&&v(e)}}}function _l(n){let e,l,t;return{c(){e=ke("path"),l=ke("text"),t=oe("Residual"),this.h()},l(o){e=ye(o,"path",{id:!0,class:!0,d:!0}),C(e).forEach(v),l=ye(o,"text",{x:!0,y:!0,dy:!0,dx:!0,class:!0});var s=C(l);t=re(s,"Residual"),s.forEach(v),this.h()},h(){h(e,"id",n[0]),h(e,"class","head svelte-1jqlo12"),h(e,"d","M0,0 Q0,-16 30,-16"),h(l,"x","30"),h(l,"y","-26"),h(l,"dy","4"),h(l,"dx","4"),h(l,"class","svelte-1jqlo12")},m(o,s){H(o,e,s),H(o,l,s),g(l,t)},p(o,s){s&1&&h(e,"id",o[0])},d(o){o&&(v(e),v(l))}}}function bl(n){let e,l,t,o;return{c(){e=ke("svg"),l=ke("path"),t=ke("text"),o=oe("Layer Normalization"),this.h()},l(s){e=ye(s,"svg",{class:!0,width:!0});var r=C(e);l=ye(r,"path",{d:!0,class:!0}),C(l).forEach(v),t=ye(r,"text",{x:!0,y:!0,"text-anchor":!0,class:!0});var c=C(t);o=re(c,"Layer Normalization"),c.forEach(v),r.forEach(v),this.h()},h(){h(l,"d","M27.3536 4.35355C27.5488 4.15829 27.5488 3.84171 27.3536 3.64645L24.1716 0.46447C23.9763 0.269208 23.6597 0.269208 23.4645 0.464471C23.2692 0.659733 23.2692 0.976316 23.4645 1.17158L26.2929 4L23.4645 6.82843C23.2692 7.02369 23.2692 7.34028 23.4645 7.53554C23.6597 7.7308 23.9763 7.7308 24.1716 7.53554L27.3536 4.35355ZM27 3.5C20.3125 3.50001 15.2969 6.63952 11.5638 11.7944C7.84616 16.9278 5.39057 24.0677 3.75991 32.1346C0.498061 48.2711 0.5 68.3247 0.5 84H1.5C1.5 68.2984 1.50194 48.352 4.74009 32.3328C6.35943 24.3218 8.77884 17.3448 12.3737 12.3809C15.9531 7.4384 20.6875 4.50001 27 4.5V3.5Z"),h(l,"class","svelte-1jqlo12"),h(t,"x","4"),h(t,"y","95"),h(t,"text-anchor","middle"),h(t,"class","svelte-1jqlo12"),h(e,"class","guide svelte-1jqlo12"),h(e,"width","27px"),x(e,"active",!1)},m(s,r){H(s,e,r),g(e,l),g(e,t),g(t,o)},d(s){s&&v(e)}}}function $l(n){let e,l,t,o;return{c(){e=ke("svg"),l=ke("path"),t=ke("text"),o=oe("Dropout"),this.h()},l(s){e=ye(s,"svg",{class:!0,width:!0});var r=C(e);l=ye(r,"path",{d:!0,class:!0}),C(l).forEach(v),t=ye(r,"text",{x:!0,y:!0,"text-anchor":!0,class:!0});var c=C(t);o=re(c,"Dropout"),c.forEach(v),r.forEach(v),this.h()},h(){h(l,"d","M44.3186 4.46399C44.5314 4.28801 44.5613 3.97284 44.3853 3.76004L41.5175 0.292199C41.3416 0.0793953 41.0264 0.0495441 40.8136 0.225525C40.6008 0.401505 40.5709 0.716677 40.7469 0.929481L43.296 4.012L40.2135 6.56113C40.0007 6.73711 39.9709 7.05228 40.1468 7.26509C40.3228 7.47789 40.638 7.50774 40.8508 7.33176L44.3186 4.46399ZM44.0471 3.58091C38.7621 3.08034 27.8926 4.80481 18.3357 11.5838C8.74613 18.386 0.5 30.2626 0.5 50H1.5C1.5 30.5889 9.58721 19.0154 18.9143 12.3994C28.2741 5.76023 38.9045 4.0983 43.9529 4.57645L44.0471 3.58091Z"),h(l,"class","svelte-1jqlo12"),h(t,"x","4"),h(t,"y","60"),h(t,"text-anchor","middle"),h(t,"class","svelte-1jqlo12"),h(e,"class","guide svelte-1jqlo12"),h(e,"width","44px"),x(e,"active",!1)},m(s,r){H(s,e,r),g(e,l),g(e,t),g(t,o)},d(s){s&&v(e)}}}function Rs(n){let e;function l(s,r){if(s[2]==="activation")return Fs;if(s[2]==="dropout")return Gs;if(s[2]==="ln")return Ts;if(s[2]==="residual-start")return Ps;if(s[2]==="residual-end")return As}let t=l(n),o=t&&t(n);return{c(){o&&o.c(),e=lt()},l(s){o&&o.l(s),e=lt()},m(s,r){o&&o.m(s,r),H(s,e,r)},p(s,[r]){t===(t=l(s))&&o?o.p(s,r):(o&&o.d(1),o=t&&t(s),o&&(o.c(),o.m(e.parentNode,e)))},i:Se,o:Se,d(s){s&&v(e),o&&o.d(s)}}}function Ws(n,e,l){let t;$e(n,Bt,f=>l(6,t=f));let{id:o=void 0}=e,{className:s=void 0}=e,{type:r=void 0}=e,{head:c=!1}=e,{tail:a=!1}=e,{active:i=!1}=e;return n.$$set=f=>{"id"in f&&l(0,o=f.id),"className"in f&&l(1,s=f.className),"type"in f&&l(2,r=f.type),"head"in f&&l(3,c=f.head),"tail"in f&&l(4,a=f.tail),"active"in f&&l(5,i=f.active)},[o,s,r,c,a,i,t]}class Ct extends He{constructor(e){super(),ze(this,e,Ws,Rs,Ne,{id:0,className:1,type:2,head:3,tail:4,active:5})}}function wl(n,e,l){const t=n.slice();return t[6]=e[l],t[8]=l,t}function Zs(n){let e,l=n[1].dimension+"",t,o;return{c(){e=oe("size(1, "),t=oe(l),o=oe(")")},l(s){e=re(s,"size(1, "),t=re(s,l),o=re(s,")")},m(s,r){H(s,e,r),H(s,t,r),H(s,o,r)},p(s,r){r&2&&l!==(l=s[1].dimension+"")&&Ve(t,l)},d(s){s&&(v(e),v(t),v(o))}}}function kl(n){let e,l=n[6]+"",t;return{c(){e=E("span"),t=oe(l),this.h()},l(o){e=I(o,"SPAN",{class:!0});var s=C(e);t=re(s,l),s.forEach(v),this.h()},h(){h(e,"class","label float svelte-1to3zyp")},m(o,s){H(o,e,s),g(e,t)},p(o,s){s&8&&l!==(l=o[6]+"")&&Ve(t,l)},d(o){o&&v(e)}}}function yl(n){let e,l,t,o,s,r,c;t=new tt({props:{colorScale:"blue"}});let a=n[8]===n[3].length-1&&kl(n);return{c(){e=E("div"),l=E("div"),te(t.$$.fragment),s=S(),a&&a.c(),r=S(),this.h()},l(i){e=I(i,"DIV",{class:!0});var f=C(e);l=I(f,"DIV",{class:!0});var u=C(l);le(t.$$.fragment,u),u.forEach(v),s=N(f),a&&a.l(f),r=N(f),f.forEach(v),this.h()},h(){h(l,"class",o=ae(ie("vector shrink-0 bg-blue-200",{"last-token":n[8]===n[3].length-1}))+" svelte-1to3zyp"),h(e,"class","cell svelte-1to3zyp"),x(e,"last",n[8]===n[3].length-1)},m(i,f){H(i,e,f),g(e,l),ne(t,l,null),g(e,s),a&&a.m(e,null),g(e,r),c=!0},p(i,f){(!c||f&8&&o!==(o=ae(ie("vector shrink-0 bg-blue-200",{"last-token":i[8]===i[3].length-1}))+" svelte-1to3zyp"))&&h(l,"class",o),i[8]===i[3].length-1?a?a.p(i,f):(a=kl(i),a.c(),a.m(e,r)):a&&(a.d(1),a=null),(!c||f&8)&&x(e,"last",i[8]===i[3].length-1)},i(i){c||(B(t.$$.fragment,i),c=!0)},o(i){R(t.$$.fragment,i),c=!1},d(i){i&&v(e),se(t),a&&a.d()}}}function Xs(n){let e,l,t,o,s,r,c,a,i,f=n[1].layer_num-1+"",u,d,m,$,V="Transformer<br/>Blocks",j,L,z,p,D,M,_,y,F,Z,P;s=new Ke({props:{triggeredBy:".transformer-blocks .vector",placement:"right",class:"popover text-sm font-light",$$slots:{default:[Zs]},$$scope:{ctx:n}}});let X=ve(n[3]),W=[];for(let T=0;T<X.length;T+=1)W[T]=yl(wl(n,X,T));const ee=T=>R(W[T],1,1,()=>{W[T]=null});return{c(){e=E("div"),l=E("div"),t=S(),o=E("div"),te(s.$$.fragment),r=S(),c=E("div"),a=E("div"),i=E("div"),u=oe(f),d=oe(" more identical"),m=E("br"),$=E("span"),$.innerHTML=V,j=oe("."),L=S(),z=ke("svg"),p=ke("path"),D=S();for(let T=0;T<W.length;T+=1)W[T].c();M=S(),_=E("div"),this.h()},l(T){e=I(T,"DIV",{class:!0,role:!0});var k=C(e);l=I(k,"DIV",{class:!0}),C(l).forEach(v),t=N(k),o=I(k,"DIV",{class:!0});var K=C(o);le(s.$$.fragment,K),r=N(K),c=I(K,"DIV",{class:!0});var w=C(c);a=I(w,"DIV",{class:!0});var G=C(a);i=I(G,"DIV",{class:!0});var A=C(i);u=re(A,f),d=re(A," more identical"),m=I(A,"BR",{}),$=I(A,"SPAN",{class:!0,"data-svelte-h":!0}),Ie($)!=="svelte-m89yhc"&&($.innerHTML=V),j=re(A,"."),A.forEach(v),L=N(G),z=ye(G,"svg",{xmlns:!0,class:!0,viewBox:!0,fill:!0});var b=C(z);p=ye(b,"path",{d:!0,fill:!0}),C(p).forEach(v),b.forEach(v),G.forEach(v),D=N(w);for(let U=0;U<W.length;U+=1)W[U].l(w);w.forEach(v),M=N(K),_=I(K,"DIV",{class:!0}),C(_).forEach(v),K.forEach(v),k.forEach(v),this.h()},h(){h(l,"class","title"),h($,"class","highlight svelte-1to3zyp"),h(i,"class","text svelte-1to3zyp"),x(i,"active",n[2]),h(p,"d","M1.18221 4.58047C1.23103 4.62928 1.31017 4.62928 1.35899 4.58047L2.15448 3.78497C2.2033 3.73616 2.2033 3.65701 2.15448 3.6082C2.10567 3.55938 2.02652 3.55938 1.97771 3.6082L1.2706 4.3153L0.563493 3.6082C0.514677 3.55938 0.435531 3.55938 0.386716 3.6082C0.3379 3.65701 0.3379 3.73616 0.386716 3.78497L1.18221 4.58047ZM1.1456 0.285461V4.49208H1.3956V0.285461H1.1456Z"),h(p,"fill","currentColor"),h(z,"xmlns","http://www.w3.org/2000/svg"),h(z,"class","h-6 w-6 text-gray-300"),h(z,"viewBox","0 0 3 5"),h(z,"fill","none"),h(a,"class","guide flex flex-col items-start gap-1 svelte-1to3zyp"),h(c,"class","column final relative svelte-1to3zyp"),h(_,"class","second-column svelte-1to3zyp"),h(o,"class","content svelte-1to3zyp"),h(e,"class",y=ae(ie("transformer-blocks",n[0]))+" svelte-1to3zyp"),h(e,"role","group")},m(T,k){H(T,e,k),g(e,l),g(e,t),g(e,o),ne(s,o,null),g(o,r),g(o,c),g(c,a),g(a,i),g(i,u),g(i,d),g(i,m),g(i,$),g(i,j),g(a,L),g(a,z),g(z,p),g(c,D);for(let K=0;K<W.length;K+=1)W[K]&&W[K].m(c,null);g(o,M),g(o,_),F=!0,Z||(P=[_e(e,"mouseenter",n[4]),_e(e,"mouseleave",n[5])],Z=!0)},p(T,[k]){const K={};if(k&514&&(K.$$scope={dirty:k,ctx:T}),s.$set(K),(!F||k&2)&&f!==(f=T[1].layer_num-1+"")&&Ve(u,f),(!F||k&4)&&x(i,"active",T[2]),k&8){X=ve(T[3]);let w;for(w=0;w<X.length;w+=1){const G=wl(T,X,w);W[w]?(W[w].p(G,k),B(W[w],1)):(W[w]=yl(G),W[w].c(),B(W[w],1),W[w].m(c,null))}for(Le(),w=X.length;w<W.length;w+=1)ee(w);Me()}(!F||k&1&&y!==(y=ae(ie("transformer-blocks",T[0]))+" svelte-1to3zyp"))&&h(e,"class",y)},i(T){if(!F){B(s.$$.fragment,T);for(let k=0;k<X.length;k+=1)B(W[k]);F=!0}},o(T){R(s.$$.fragment,T),W=W.filter(Boolean);for(let k=0;k<W.length;k+=1)R(W[k]);F=!1},d(T){T&&v(e),se(s),De(W,T),Z=!1,je(P)}}}function Ks(n,e,l){let t,o,s;$e(n,$t,i=>l(1,t=i)),$e(n,yt,i=>l(2,o=i)),$e(n,ot,i=>l(3,s=i));let{className:r=void 0}=e;const c=()=>{yt.set(!0)},a=()=>{yt.set(!1)};return n.$$set=i=>{"className"in i&&l(0,r=i.className)},[r,t,o,s,c,a]}class Ys extends He{constructor(e){super(),ze(this,e,Ks,Xs,Ne,{className:0})}}function Os(n){let e,l,t,o;return{c(){e=E("div"),l=ke("svg"),t=ke("g"),o=ke("g"),this.h()},l(s){e=I(s,"DIV",{class:!0});var r=C(e);l=ye(r,"svg",{class:!0});var c=C(l);t=ye(c,"g",{class:!0}),C(t).forEach(v),o=ye(c,"g",{class:!0}),C(o).forEach(v),c.forEach(v),r.forEach(v),this.h()},h(){h(t,"class","bars"),h(o,"class","bar-labels"),h(l,"class","h-full w-full"),h(e,"class","content-box probability grow svelte-8s3yoj")},m(s,r){H(s,e,r),g(e,l),g(l,t),g(l,o),n[7](l)},p:Se,i:Se,o:Se,d(s){s&&v(e),n[7](null)}}}const El=4;let Qs=1;function Us(n,e,l){let t,o;$e(n,Ht,V=>l(5,t=V)),$e(n,wt,V=>l(6,o=V));const{theme:s}=dt(ht);let{rowHeight:r}=e,{rowGap:c}=e,{hoveredIndex:a=null}=e,i,f=s.colors.gray[300],u=s.colors.purple[400],{drawBars:d=()=>{const V=o==null?void 0:o.prediction;console.log("ddd");const j=Oe(i);let L=Ft().domain([0,ls(V,z=>z.adjustedProbability)]).range([0,(i==null?void 0:i.clientWidth)-bt*3]);j.select("g.bars").selectAll("rect").data(V).join("rect").attr("x",0).attr("y",(z,p)=>p*r+p*c+r/2-El/2).attr("height",El).attr("width",z=>L(z.adjustedProbability)).attr("rx",1).attr("ry",1).attr("fill",(z,p)=>(console.log(),p===a?u:(t==null?void 0:t.rank)===p?Mt:f)).on("mouseenter",function(z,p){l(1,a=p.rank),Oe(this).style("cursor","pointer")}).on("mouseleave",()=>l(1,a=null)).transition().ease(Tn).duration(500).attr("width",z=>L(z.adjustedProbability)),j.select("g.bar-labels").selectAll("text").data(V).join("text").attr("fill",(z,p)=>p===a?u:(t==null?void 0:t.rank)===p?Mt:f).on("mouseenter",function(z,p){l(1,a=p.rank),Oe(this).style("cursor","pointer")}).on("mouseleave",()=>{l(1,a=null)}).attr("x",z=>.4*bt+L(z.adjustedProbability)).attr("y",(z,p)=>p*r+p*c).attr("dy",r/2+3).attr("text-anchor","start").style("font-size","0.75rem").transition().duration(500).tween("text",function(z){const p=Oe(this),D=Gn(p.text().replace("%",""),z.adjustedProbability*100);return function(M){p.text(D(M).toFixed(Qs)+"%")}})}}=e;st(()=>{d()});const m=()=>{if(!i)return;const V=Oe(i);V.selectAll("g.bars rect").attr("fill",(j,L)=>L===a?u:(t==null?void 0:t.rank)===L?Mt:f),V.selectAll("g.bar-labels text").attr("fill",(j,L)=>L===a?u:(t==null?void 0:t.rank)===L?Mt:f)};function $(V){Xe[V?"unshift":"push"](()=>{i=V,l(0,i)})}return n.$$set=V=>{"rowHeight"in V&&l(2,r=V.rowHeight),"rowGap"in V&&l(3,c=V.rowGap),"hoveredIndex"in V&&l(1,a=V.hoveredIndex),"drawBars"in V&&l(4,d=V.drawBars)},n.$$.update=()=>{n.$$.dirty&81&&o&&i&&d(),n.$$.dirty&2&&a!==void 0&&m(),n.$$.dirty&32&&t&&m()},[i,a,r,c,d,t,o,$]}class Js extends He{constructor(e){super(),ze(this,e,Us,Os,Ne,{rowHeight:2,rowGap:3,hoveredIndex:1,drawBars:4})}}function Il(n,e,l){const t=n.slice();return t[36]=e[l],t[38]=l,t}function Cl(n,e,l){const t=n.slice();return t[39]=e[l],t[38]=l,t}function Vl(n,e,l){const t=n.slice();return t[41]=e[l],t[38]=l,t}function xs(n){let e,l=n[9][n[38]]+"",t,o;return{c(){e=oe("Token ID: "),t=oe(l),o=S()},l(s){e=re(s,"Token ID: "),t=re(s,l),o=N(s)},m(s,r){H(s,e,r),H(s,t,r),H(s,o,r)},p(s,r){r[0]&512&&l!==(l=s[9][s[38]]+"")&&Ve(t,l)},d(s){s&&(v(e),v(t),v(o))}}}function Dl(n){let e,l=(n[41].token.trim()===""?" ":n[41].token)+"",t,o,s,r,c,a;function i(){return n[21](n[38])}return s=new Ke({props:{class:"text-xs",placement:"left",type:"light",$$slots:{default:[xs]},$$scope:{ctx:n}}}),{c(){e=E("div"),t=oe(l),o=S(),te(s.$$.fragment),this.h()},l(f){e=I(f,"DIV",{role:!0,class:!0});var u=C(e);t=re(u,l),u.forEach(v),o=N(f),le(s.$$.fragment,f),this.h()},h(){var f;h(e,"role","group"),h(e,"class","text-box svelte-1uvdybw"),x(e,"highlight",n[38]===n[5]),x(e,"sample_highlight",n[10]===n[38]),x(e,"final_token_highlight",((f=n[11])==null?void 0:f.rank)===n[38])},m(f,u){H(f,e,u),g(e,t),H(f,o,u),ne(s,f,u),r=!0,c||(a=[_e(e,"mouseenter",i),_e(e,"mouseleave",n[22])],c=!0)},p(f,u){var m;n=f,(!r||u[0]&4)&&l!==(l=(n[41].token.trim()===""?" ":n[41].token)+"")&&Ve(t,l),(!r||u[0]&32)&&x(e,"highlight",n[38]===n[5]),(!r||u[0]&1024)&&x(e,"sample_highlight",n[10]===n[38]),(!r||u[0]&2048)&&x(e,"final_token_highlight",((m=n[11])==null?void 0:m.rank)===n[38]);const d={};u[0]&512|u[1]&4096&&(d.$$scope={dirty:u,ctx:n}),s.$set(d)},i(f){r||(B(s.$$.fragment,f),r=!0)},o(f){R(s.$$.fragment,f),r=!1},d(f){f&&(v(e),v(o)),se(s,f),c=!1,je(a)}}}function Ll(n){let e,l='<div class="title-box token-string !justify-end svelte-1uvdybw"><div class="title-text svelte-1uvdybw">Tokens</div></div> <div class="title-box logits svelte-1uvdybw"><div class="title-text svelte-1uvdybw">Logits</div></div> <div class="title-box exponents svelte-1uvdybw"><div class="title-text svelte-1uvdybw">Exponents</div></div> <div class="title-box probability svelte-1uvdybw"><div class="title-text svelte-1uvdybw">Probability</div></div>';return{c(){e=E("div"),e.innerHTML=l,this.h()},l(t){e=I(t,"DIV",{class:!0,"data-svelte-h":!0}),Ie(e)!=="svelte-16l107t"&&(e.innerHTML=l),this.h()},h(){h(e,"class","softmax-subtitle softmax-detail flex text-center text-xs opacity-0 svelte-1uvdybw")},m(t,o){H(t,e,o)},d(t){t&&v(e)}}}function Ml(n){let e,l,t,o,s=ve(n[8]),r=[];for(let u=0;u<s.length;u+=1)r[u]=Bl(Cl(n,s,u));const c=u=>R(r[u],1,1,()=>{r[u]=null});let a=ve(n[7]),i=[];for(let u=0;u<a.length;u+=1)i[u]=Sl(Il(n,a,u));const f=u=>R(i[u],1,1,()=>{i[u]=null});return{c(){e=E("div");for(let u=0;u<r.length;u+=1)r[u].c();l=S(),t=E("div");for(let u=0;u<i.length;u+=1)i[u].c();this.h()},l(u){e=I(u,"DIV",{class:!0});var d=C(e);for(let $=0;$<r.length;$+=1)r[$].l(d);d.forEach(v),l=N(u),t=I(u,"DIV",{class:!0});var m=C(t);for(let $=0;$<i.length;$+=1)i[$].l(m);m.forEach(v),this.h()},h(){h(e,"class","content-box vector-box logits ml-2 svelte-1uvdybw"),h(t,"class","content-box vector-box exponents svelte-1uvdybw")},m(u,d){H(u,e,d);for(let m=0;m<r.length;m+=1)r[m]&&r[m].m(e,null);H(u,l,d),H(u,t,d);for(let m=0;m<i.length;m+=1)i[m]&&i[m].m(t,null);o=!0},p(u,d){if(d[0]&7456){s=ve(u[8]);let m;for(m=0;m<s.length;m+=1){const $=Cl(u,s,m);r[m]?(r[m].p($,d),B(r[m],1)):(r[m]=Bl($),r[m].c(),B(r[m],1),r[m].m(e,null))}for(Le(),m=s.length;m<r.length;m+=1)c(m);Me()}if(d[0]&3488){a=ve(u[7]);let m;for(m=0;m<a.length;m+=1){const $=Il(u,a,m);i[m]?(i[m].p($,d),B(i[m],1)):(i[m]=Sl($),i[m].c(),B(i[m],1),i[m].m(t,null))}for(Le(),m=a.length;m<i.length;m+=1)f(m);Me()}},i(u){if(!o){for(let d=0;d<s.length;d+=1)B(r[d]);for(let d=0;d<a.length;d+=1)B(i[d]);o=!0}},o(u){r=r.filter(Boolean);for(let d=0;d<r.length;d+=1)R(r[d]);i=i.filter(Boolean);for(let d=0;d<i.length;d+=1)R(i[d]);o=!1},d(u){u&&(v(e),v(l),v(t)),De(r,u),De(i,u)}}}function ql(n){let e,l=n[39].toFixed(2)+"",t,o,s,r,c,a;function i(){return n[23](n[38])}return s=new Ke({props:{class:"text-xs",placement:"left",type:"light",$$slots:{default:[eo]},$$scope:{ctx:n}}}),{c(){e=E("div"),t=oe(l),o=S(),te(s.$$.fragment),this.h()},l(f){e=I(f,"DIV",{role:!0,class:!0});var u=C(e);t=re(u,l),u.forEach(v),o=N(f),le(s.$$.fragment,f),this.h()},h(){var f;h(e,"role","group"),h(e,"class","text-box text-center svelte-1uvdybw"),x(e,"highlight",n[38]===n[5]),x(e,"sample_highlight",n[10]===n[38]),x(e,"final_token_highlight",((f=n[11])==null?void 0:f.rank)===n[38])},m(f,u){H(f,e,u),g(e,t),H(f,o,u),ne(s,f,u),r=!0,c||(a=[_e(e,"mouseenter",i),_e(e,"mouseleave",n[24])],c=!0)},p(f,u){var m;n=f,(!r||u[0]&256)&&l!==(l=n[39].toFixed(2)+"")&&Ve(t,l),(!r||u[0]&32)&&x(e,"highlight",n[38]===n[5]),(!r||u[0]&1024)&&x(e,"sample_highlight",n[10]===n[38]),(!r||u[0]&2048)&&x(e,"final_token_highlight",((m=n[11])==null?void 0:m.rank)===n[38]);const d={};u[0]&4352|u[1]&4096&&(d.$$scope={dirty:u,ctx:n}),s.$set(d)},i(f){r||(B(s.$$.fragment,f),r=!0)},o(f){R(s.$$.fragment,f),r=!1},d(f){f&&(v(e),v(o)),se(s,f),c=!1,je(a)}}}function eo(n){let e=(n[39]*n[12]).toFixed(2)+"",l,t,o,s,r=n[39].toFixed(2)+"",c,a;return{c(){l=oe(e),t=oe(" ÷ "),o=oe(n[12]),s=oe(" = "),c=oe(r),a=S()},l(i){l=re(i,e),t=re(i," ÷ "),o=re(i,n[12]),s=re(i," = "),c=re(i,r),a=N(i)},m(i,f){H(i,l,f),H(i,t,f),H(i,o,f),H(i,s,f),H(i,c,f),H(i,a,f)},p(i,f){f[0]&4352&&e!==(e=(i[39]*i[12]).toFixed(2)+"")&&Ve(l,e),f[0]&4096&&Ve(o,i[12]),f[0]&256&&r!==(r=i[39].toFixed(2)+"")&&Ve(c,r)},d(i){i&&(v(l),v(t),v(o),v(s),v(c),v(a))}}}function Bl(n){let e,l,t=n[39]!==void 0&&ql(n);return{c(){t&&t.c(),e=lt()},l(o){t&&t.l(o),e=lt()},m(o,s){t&&t.m(o,s),H(o,e,s),l=!0},p(o,s){o[39]!==void 0?t?(t.p(o,s),s[0]&256&&B(t,1)):(t=ql(o),t.c(),B(t,1),t.m(e.parentNode,e)):t&&(Le(),R(t,1,1,()=>{t=null}),Me())},i(o){l||(B(t),l=!0)},o(o){R(t),l=!1},d(o){o&&v(e),t&&t.d(o)}}}function to(n){let e,l=n[8][n[38]].toFixed(2)+"",t,o,s=n[36].toFixed(2)+"",r,c;return{c(){e=oe("exp("),t=oe(l),o=oe(") = "),r=oe(s),c=S()},l(a){e=re(a,"exp("),t=re(a,l),o=re(a,") = "),r=re(a,s),c=N(a)},m(a,i){H(a,e,i),H(a,t,i),H(a,o,i),H(a,r,i),H(a,c,i)},p(a,i){i[0]&256&&l!==(l=a[8][a[38]].toFixed(2)+"")&&Ve(t,l),i[0]&128&&s!==(s=a[36].toFixed(2)+"")&&Ve(r,s)},d(a){a&&(v(e),v(t),v(o),v(r),v(c))}}}function Sl(n){let e,l=n[36].toExponential(2)+"",t,o,s,r,c,a;function i(){return n[25](n[38])}return s=new Ke({props:{class:"text-xs",placement:"left",type:"light",$$slots:{default:[to]},$$scope:{ctx:n}}}),{c(){e=E("div"),t=oe(l),o=S(),te(s.$$.fragment),this.h()},l(f){e=I(f,"DIV",{role:!0,class:!0});var u=C(e);t=re(u,l),u.forEach(v),o=N(f),le(s.$$.fragment,f),this.h()},h(){var f;h(e,"role","group"),h(e,"class","text-box text-center svelte-1uvdybw"),x(e,"highlight",n[38]===n[5]),x(e,"sample_highlight",n[10]===n[38]),x(e,"final_token_highlight",((f=n[11])==null?void 0:f.rank)===n[38])},m(f,u){H(f,e,u),g(e,t),H(f,o,u),ne(s,f,u),r=!0,c||(a=[_e(e,"mouseenter",i),_e(e,"mouseleave",n[26])],c=!0)},p(f,u){var m;n=f,(!r||u[0]&128)&&l!==(l=n[36].toExponential(2)+"")&&Ve(t,l),(!r||u[0]&32)&&x(e,"highlight",n[38]===n[5]),(!r||u[0]&1024)&&x(e,"sample_highlight",n[10]===n[38]),(!r||u[0]&2048)&&x(e,"final_token_highlight",((m=n[11])==null?void 0:m.rank)===n[38]);const d={};u[0]&384|u[1]&4096&&(d.$$scope={dirty:u,ctx:n}),s.$set(d)},i(f){r||(B(s.$$.fragment,f),r=!0)},o(f){R(s.$$.fragment,f),r=!1},d(f){f&&(v(e),v(o)),se(s,f),c=!1,je(a)}}}function lo(n){let e,l,t="<div>Probabilities</div>",o,s,r,c,a,i,f,u,d,m,$,V,j,L,z,p,D,M,_,y,F,Z=ve(n[2]),P=[];for(let w=0;w<Z.length;w+=1)P[w]=Dl(Vl(n,Z,w));const X=w=>R(P[w],1,1,()=>{P[w]=null});let W=n[1]&&Ll(),ee=n[1]&&Ml(n);function T(w){n[27](w)}function k(w){n[28](w)}let K={rowGap:n[16],rowHeight:n[15]};return n[5]!==void 0&&(K.hoveredIndex=n[5]),n[4]!==void 0&&(K.drawBars=n[4]),z=new Js({props:K}),Xe.push(()=>Ut(z,"hoveredIndex",T)),Xe.push(()=>Ut(z,"drawBars",k)),{c(){e=E("div"),l=E("div"),l.innerHTML=t,o=S(),s=E("div"),r=E("div"),c=S(),a=E("div"),i=E("div");for(let w=0;w<P.length;w+=1)P[w].c();f=S(),u=E("div"),d=S(),m=E("div"),W&&W.c(),$=S(),V=E("div"),j=E("div"),ee&&ee.c(),L=S(),te(z.$$.fragment),this.h()},l(w){e=I(w,"DIV",{class:!0,role:!0,tabindex:!0});var G=C(e);l=I(G,"DIV",{class:!0,tabindex:!0,role:!0,"data-svelte-h":!0}),Ie(l)!=="svelte-1o4yyjz"&&(l.innerHTML=t),o=N(G),s=I(G,"DIV",{class:!0,style:!0});var A=C(s);r=I(A,"DIV",{class:!0}),C(r).forEach(v),c=N(A),a=I(A,"DIV",{class:!0});var b=C(a);i=I(b,"DIV",{class:!0});var U=C(i);for(let O=0;O<P.length;O+=1)P[O].l(U);U.forEach(v),f=N(b),u=I(b,"DIV",{class:!0}),C(u).forEach(v),b.forEach(v),d=N(A),m=I(A,"DIV",{class:!0});var q=C(m);W&&W.l(q),$=N(q),V=I(q,"DIV",{class:!0});var ge=C(V);j=I(ge,"DIV",{class:!0});var de=C(j);ee&&ee.l(de),de.forEach(v),L=N(ge),le(z.$$.fragment,ge),ge.forEach(v),q.forEach(v),A.forEach(v),G.forEach(v),this.h()},h(){h(l,"class","title expandable svelte-1uvdybw"),h(l,"tabindex","0"),h(l,"role","button"),h(r,"class","bounding softmax-bounding svelte-1uvdybw"),x(r,"active",n[6]&&!n[1]),h(i,"class","content-box token-string svelte-1uvdybw"),h(u,"class","vector vocab opacity-1 w-0"),h(a,"class","first-column relative flex justify-end"),h(j,"class","softmax-detail expandable flex gap-2 opacity-0"),h(V,"class","content-row flex gap-2"),h(m,"class","second-column flex flex-col svelte-1uvdybw"),h(s,"class","content resize-watch relative svelte-1uvdybw"),h(s,"style",`--softmax-row-height: ${n[15]}px;--softmax-row-gap: ${n[16]}px`),h(e,"class",M=ae(ie("softmax",n[0],{expanded:n[1]}))+" svelte-1uvdybw"),h(e,"role","button"),h(e,"tabindex","0")},m(w,G){H(w,e,G),g(e,l),g(e,o),g(e,s),g(s,r),g(s,c),g(s,a),g(a,i);for(let A=0;A<P.length;A+=1)P[A]&&P[A].m(i,null);g(a,f),g(a,u),g(s,d),g(s,m),W&&W.m(m,null),g(m,$),g(m,V),g(V,j),ee&&ee.m(j,null),g(V,L),ne(z,V,null),n[29](e),_=!0,y||(F=[_e(l,"click",n[14]),_e(l,"keydown",n[14]),_e(l,"mouseenter",n[17]),_e(l,"mouseleave",n[18]),_e(e,"click",n[13]),_e(e,"keydown",n[13])],y=!0)},p(w,G){if((!_||G[0]&66)&&x(r,"active",w[6]&&!w[1]),G[0]&3620){Z=ve(w[2]);let b;for(b=0;b<Z.length;b+=1){const U=Vl(w,Z,b);P[b]?(P[b].p(U,G),B(P[b],1)):(P[b]=Dl(U),P[b].c(),B(P[b],1),P[b].m(i,null))}for(Le(),b=Z.length;b<P.length;b+=1)X(b);Me()}w[1]?W||(W=Ll(),W.c(),W.m(m,$)):W&&(W.d(1),W=null),w[1]?ee?(ee.p(w,G),G[0]&2&&B(ee,1)):(ee=Ml(w),ee.c(),B(ee,1),ee.m(j,null)):ee&&(Le(),R(ee,1,1,()=>{ee=null}),Me());const A={};!p&&G[0]&32&&(p=!0,A.hoveredIndex=w[5],Qt(()=>p=!1)),!D&&G[0]&16&&(D=!0,A.drawBars=w[4],Qt(()=>D=!1)),z.$set(A),(!_||G[0]&3&&M!==(M=ae(ie("softmax",w[0],{expanded:w[1]}))+" svelte-1uvdybw"))&&h(e,"class",M)},i(w){if(!_){for(let G=0;G<Z.length;G+=1)B(P[G]);B(ee),B(z.$$.fragment,w),_=!0}},o(w){P=P.filter(Boolean);for(let G=0;G<P.length;G+=1)R(P[G]);R(ee),R(z.$$.fragment,w),_=!1},d(w){w&&v(e),De(P,w),W&&W.d(),ee&&ee.d(),se(z),n[29](null),y=!1,je(F)}}}function no(n,e,l){let t,o,s,r,c,a,i,f,u;$e(n,wt,q=>l(19,c=q)),$e(n,Fe,q=>l(20,a=q)),$e(n,qn,q=>l(10,i=q)),$e(n,Ht,q=>l(11,f=q)),$e(n,Gt,q=>l(12,u=q));let{className:d=void 0}=e;dt(ht),Nt("block-id","softmax");const m=St("block-id");let $=!1;const V=()=>{$||(Fe.set({id:m}),M())},j=q=>{q.stopPropagation(),q.preventDefault(),$?(Fe.set({id:null}),_()):(Fe.set({id:m}),M())};let L;function z(q){$&&!L.contains(q.target)&&Fe.set({id:null})}st(()=>(document.body.addEventListener("click",z),()=>{document.body.removeEventListener("click",z)}));let p,D;const M=async()=>{p=ut.Flip.getState(".softmax .softmax-detail.expandable"),l(1,$=!0),await Et(),ft.set(".steps",{justifyContent:"end"}),ft.set(".softmax-detail",{opacity:0}),ut.Flip.from(p,{duration:.5,ease:"power2.inOut",onComplete:()=>{D==null||D()}}),ft.to(".softmax-detail",{opacity:1,duration:.2,delay:.5})},_=async()=>{p=ut.Flip.getState(".softmax .softmax-detail.expandable"),l(1,$=!1),await Et(),await ut.Flip.from(p,{duration:.5,ease:"power2.inOut",onComplete:()=>{D==null||D()}}),ft.to(".softmax-detail",{opacity:0,duration:.2}),ft.set(".steps",{justifyContent:"start"})};let y=bt*1.2,F=.4*bt,Z=null,P=!1;function X(){l(6,P=!0)}function W(){l(6,P=!1)}const ee=q=>l(5,Z=q),T=()=>l(5,Z=null),k=q=>l(5,Z=q),K=()=>l(5,Z=null),w=q=>l(5,Z=q),G=()=>l(5,Z=null);function A(q){Z=q,l(5,Z)}function b(q){D=q,l(4,D)}function U(q){Xe[q?"unshift":"push"](()=>{L=q,l(3,L)})}return n.$$set=q=>{"className"in q&&l(0,d=q.className)},n.$$.update=()=>{n.$$.dirty[0]&1048578&&a.id!==m&&$&&(l(1,$=!1),_()),n.$$.dirty[0]&524288&&l(2,t=(c==null?void 0:c.prediction)||[]),n.$$.dirty[0]&4&&l(9,o=t==null?void 0:t.map(q=>q.tokenId)),n.$$.dirty[0]&4&&l(8,s=(t==null?void 0:t.map(q=>q.adjustedLogit))||[]),n.$$.dirty[0]&4&&l(7,r=(t==null?void 0:t.map(q=>q.adjustedExp))||[])},[d,$,t,L,D,Z,P,r,s,o,i,f,u,V,j,y,F,X,W,c,a,ee,T,k,K,w,G,A,b,U]}class so extends He{constructor(e){super(),ze(this,e,no,lo,Ne,{className:0},null,[-1,-1])}}function oo(n){let e,l="Drop out is";return{c(){e=E("div"),e.textContent=l,this.h()},l(t){e=I(t,"DIV",{class:!0,"data-svelte-h":!0}),Ie(e)!=="svelte-ohkp45"&&(e.textContent=l),this.h()},h(){h(e,"class","dropout-content")},m(t,o){H(t,e,o)},p:Se,d(t){t&&v(e)}}}function ro(n){let e,l;return e=new jt({props:{class:ie("popover dropout-popover text-sm",n[1]),title:"Drop out",offset:n[0],triggeredBy:n[2],trigger:n[3],placement:n[4],arrow:!1,transition:nt,params:{duration:100},$$slots:{default:[oo]},$$scope:{ctx:n}}}),{c(){te(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,o){ne(e,t,o),l=!0},p(t,[o]){const s={};o&2&&(s.class=ie("popover dropout-popover text-sm",t[1])),o&1&&(s.offset=t[0]),o&4&&(s.triggeredBy=t[2]),o&8&&(s.trigger=t[3]),o&16&&(s.placement=t[4]),o&32&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){l||(B(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){se(e,t)}}}function io(n,e,l){let{offset:t=void 0}=e,{className:o=void 0}=e,{triggeredBy:s=void 0}=e,{trigger:r="hover"}=e,{placement:c="right"}=e;return n.$$set=a=>{"offset"in a&&l(0,t=a.offset),"className"in a&&l(1,o=a.className),"triggeredBy"in a&&l(2,s=a.triggeredBy),"trigger"in a&&l(3,r=a.trigger),"placement"in a&&l(4,c=a.placement)},[t,o,s,r,c]}class ao extends He{constructor(e){super(),ze(this,e,io,ro,Ne,{offset:0,className:1,triggeredBy:2,trigger:3,placement:4})}}function co(n){let e,l="Layer normalization is";return{c(){e=E("div"),e.textContent=l,this.h()},l(t){e=I(t,"DIV",{class:!0,"data-svelte-h":!0}),Ie(e)!=="svelte-qw3l61"&&(e.textContent=l),this.h()},h(){h(e,"class","ln-content")},m(t,o){H(t,e,o)},p:Se,d(t){t&&v(e)}}}function fo(n){let e,l;return e=new jt({props:{class:ie("popover ln-popover text-sm",n[1]),title:"Layer Normalization",offset:n[0],triggeredBy:n[2],trigger:n[3],placement:n[4],arrow:!1,transition:nt,params:{duration:100},$$slots:{default:[co]},$$scope:{ctx:n}}}),{c(){te(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,o){ne(e,t,o),l=!0},p(t,[o]){const s={};o&2&&(s.class=ie("popover ln-popover text-sm",t[1])),o&1&&(s.offset=t[0]),o&4&&(s.triggeredBy=t[2]),o&8&&(s.trigger=t[3]),o&16&&(s.placement=t[4]),o&32&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){l||(B(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){se(e,t)}}}function uo(n,e,l){let{offset:t=void 0}=e,{className:o=void 0}=e,{triggeredBy:s=void 0}=e,{trigger:r="hover"}=e,{placement:c="right"}=e;return n.$$set=a=>{"offset"in a&&l(0,t=a.offset),"className"in a&&l(1,o=a.className),"triggeredBy"in a&&l(2,s=a.triggeredBy),"trigger"in a&&l(3,r=a.trigger),"placement"in a&&l(4,c=a.placement)},[t,o,s,r,c]}class ho extends He{constructor(e){super(),ze(this,e,uo,fo,Ne,{offset:0,className:1,triggeredBy:2,trigger:3,placement:4})}}function vo(n){let e,l=`The GELU (Gaussian Error Linear Unit) activation function combines linear and non-linear
		behavior by scaling inputs using the Gaussian cumulative distribution function. It retains small
		negative values for smoother gradients and is effective in models like BERT.`;return{c(){e=E("div"),e.textContent=l,this.h()},l(t){e=I(t,"DIV",{class:!0,"data-svelte-h":!0}),Ie(e)!=="svelte-1ri460b"&&(e.textContent=l),this.h()},h(){h(e,"class","activation-content svelte-60plg2")},m(t,o){H(t,e,o)},p:Se,d(t){t&&v(e)}}}function go(n){let e,l;return e=new jt({props:{class:ie("popover activation-popover text-sm",n[1]),title:"GeLu Activation",offset:n[0],triggeredBy:n[2],trigger:n[3],placement:n[4],arrow:!1,transition:nt,params:{duration:100},$$slots:{default:[vo]},$$scope:{ctx:n}}}),{c(){te(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,o){ne(e,t,o),l=!0},p(t,[o]){const s={};o&2&&(s.class=ie("popover activation-popover text-sm",t[1])),o&1&&(s.offset=t[0]),o&4&&(s.triggeredBy=t[2]),o&8&&(s.trigger=t[3]),o&16&&(s.placement=t[4]),o&32&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){l||(B(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){se(e,t)}}}function mo(n,e,l){let{offset:t=void 0}=e,{className:o=void 0}=e,{triggeredBy:s=void 0}=e,{trigger:r="hover"}=e,{placement:c="right"}=e;return n.$$set=a=>{"offset"in a&&l(0,t=a.offset),"className"in a&&l(1,o=a.className),"triggeredBy"in a&&l(2,s=a.triggeredBy),"trigger"in a&&l(3,r=a.trigger),"placement"in a&&l(4,c=a.placement)},[t,o,s,r,c]}class po extends He{constructor(e){super(),ze(this,e,mo,go,Ne,{offset:0,className:1,triggeredBy:2,trigger:3,placement:4})}}function _o(n){let e,l="Residual out is";return{c(){e=E("div"),e.textContent=l,this.h()},l(t){e=I(t,"DIV",{class:!0,"data-svelte-h":!0}),Ie(e)!=="svelte-124ixs1"&&(e.textContent=l),this.h()},h(){h(e,"class","residual-content")},m(t,o){H(t,e,o)},p:Se,d(t){t&&v(e)}}}function bo(n){let e,l;return e=new jt({props:{class:ie("popover residual-popover text-sm",n[1]),title:"Residual",offset:n[0],triggeredBy:n[2],trigger:n[3],placement:n[4],arrow:!1,transition:nt,params:{duration:100},reference:n[5],$$slots:{default:[_o]},$$scope:{ctx:n}}}),{c(){te(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,o){ne(e,t,o),l=!0},p(t,[o]){const s={};o&2&&(s.class=ie("popover residual-popover text-sm",t[1])),o&1&&(s.offset=t[0]),o&4&&(s.triggeredBy=t[2]),o&8&&(s.trigger=t[3]),o&16&&(s.placement=t[4]),o&32&&(s.reference=t[5]),o&64&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){l||(B(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){se(e,t)}}}function $o(n,e,l){let{offset:t=void 0}=e,{className:o=void 0}=e,{triggeredBy:s=void 0}=e,{trigger:r="hover"}=e,{placement:c="right"}=e,{reference:a}=e;return n.$$set=i=>{"offset"in i&&l(0,t=i.offset),"className"in i&&l(1,o=i.className),"triggeredBy"in i&&l(2,s=i.triggeredBy),"trigger"in i&&l(3,r=i.trigger),"placement"in i&&l(4,c=i.placement),"reference"in i&&l(5,a=i.reference)},[t,o,s,r,c,a]}class wo extends He{constructor(e){super(),ze(this,e,$o,bo,Ne,{offset:0,className:1,triggeredBy:2,trigger:3,placement:4,reference:5})}}function Nl(n,e,l){const t=n.slice();return t[14]=e[l],t[16]=l,t}function Hl(n,e,l){const t=n.slice();return t[14]=e[l],t[16]=l,t}function zl(n,e,l){const t=n.slice();return t[14]=e[l],t[16]=l,t}function jl(n,e,l){const t=n.slice();return t[14]=e[l],t[16]=l,t}function Al(n,e,l){const t=n.slice();return t[14]=e[l],t[16]=l,t}function ko(n){let e,l,t,o,s,r,c=ve(n[4]),a=[];for(let f=0;f<c.length;f+=1)a[f]=Pl(Nl(n,c,f));const i=f=>R(a[f],1,1,()=>{a[f]=null});return{c(){e=E("div");for(let f=0;f<a.length;f+=1)a[f].c();this.h()},l(f){e=I(f,"DIV",{id:!0,class:!0,role:!0});var u=C(e);for(let d=0;d<a.length;d+=1)a[d].l(u);u.forEach(v),this.h()},h(){h(e,"id",l=`${n[0]}-end`),h(e,"class",t=ae(ie("operation-col column residual",n[1]))+" svelte-cfq6hx"),h(e,"role","group")},m(f,u){H(f,e,u);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(e,null);o=!0,s||(r=[_e(e,"mouseenter",n[5]),_e(e,"mouseleave",n[6])],s=!0)},p(f,u){if(u&27){c=ve(f[4]);let d;for(d=0;d<c.length;d+=1){const m=Nl(f,c,d);a[d]?(a[d].p(m,u),B(a[d],1)):(a[d]=Pl(m),a[d].c(),B(a[d],1),a[d].m(e,null))}for(Le(),d=c.length;d<a.length;d+=1)i(d);Me()}(!o||u&1&&l!==(l=`${f[0]}-end`))&&h(e,"id",l),(!o||u&2&&t!==(t=ae(ie("operation-col column residual",f[1]))+" svelte-cfq6hx"))&&h(e,"class",t)},i(f){if(!o){for(let u=0;u<c.length;u+=1)B(a[u]);o=!0}},o(f){a=a.filter(Boolean);for(let u=0;u<a.length;u+=1)R(a[u]);o=!1},d(f){f&&v(e),De(a,f),s=!1,je(r)}}}function yo(n){let e,l,t,o,s,r,c,a,i=ve(n[4]),f=[];for(let d=0;d<i.length;d+=1)f[d]=Tl(Hl(n,i,d));const u=d=>R(f[d],1,1,()=>{f[d]=null});return t=new wo({props:{reference:`#${n[0]}-start`,triggeredBy:`[id^='${n[0]}-']`,offset:1}}),{c(){e=E("div");for(let d=0;d<f.length;d+=1)f[d].c();l=S(),te(t.$$.fragment),this.h()},l(d){e=I(d,"DIV",{id:!0,class:!0,role:!0});var m=C(e);for(let $=0;$<f.length;$+=1)f[$].l(m);l=N(m),le(t.$$.fragment,m),m.forEach(v),this.h()},h(){h(e,"id",o=`${n[0]}-start`),h(e,"class",s=ae(ie("operation-col column residual",n[1]))+" svelte-cfq6hx"),h(e,"role","group")},m(d,m){H(d,e,m);for(let $=0;$<f.length;$+=1)f[$]&&f[$].m(e,null);g(e,l),ne(t,e,null),r=!0,c||(a=[_e(e,"mouseenter",n[5]),_e(e,"mouseleave",n[6])],c=!0)},p(d,m){if(m&27){i=ve(d[4]);let V;for(V=0;V<i.length;V+=1){const j=Hl(d,i,V);f[V]?(f[V].p(j,m),B(f[V],1)):(f[V]=Tl(j),f[V].c(),B(f[V],1),f[V].m(e,l))}for(Le(),V=i.length;V<f.length;V+=1)u(V);Me()}const $={};m&1&&($.reference=`#${d[0]}-start`),m&1&&($.triggeredBy=`[id^='${d[0]}-']`),t.$set($),(!r||m&1&&o!==(o=`${d[0]}-start`))&&h(e,"id",o),(!r||m&2&&s!==(s=ae(ie("operation-col column residual",d[1]))+" svelte-cfq6hx"))&&h(e,"class",s)},i(d){if(!r){for(let m=0;m<i.length;m+=1)B(f[m]);B(t.$$.fragment,d),r=!0}},o(d){f=f.filter(Boolean);for(let m=0;m<f.length;m+=1)R(f[m]);R(t.$$.fragment,d),r=!1},d(d){d&&v(e),De(f,d),se(t),c=!1,je(a)}}}function Eo(n){let e,l,t,o,s,r,c,a=ve(n[4]),i=[];for(let u=0;u<a.length;u+=1)i[u]=Gl(zl(n,a,u));const f=u=>R(i[u],1,1,()=>{i[u]=null});return t=new ho({props:{triggeredBy:`#${n[0]}`}}),{c(){e=E("div");for(let u=0;u<i.length;u+=1)i[u].c();l=S(),te(t.$$.fragment),this.h()},l(u){e=I(u,"DIV",{id:!0,class:!0,role:!0});var d=C(e);for(let m=0;m<i.length;m+=1)i[m].l(d);l=N(d),le(t.$$.fragment,d),d.forEach(v),this.h()},h(){h(e,"id",n[0]),h(e,"class",o=ae(ie("operation-col column ln",n[1]))+" svelte-cfq6hx"),h(e,"role","group")},m(u,d){H(u,e,d);for(let m=0;m<i.length;m+=1)i[m]&&i[m].m(e,null);g(e,l),ne(t,e,null),s=!0,r||(c=[_e(e,"mouseenter",n[11]),_e(e,"mouseleave",n[12])],r=!0)},p(u,d){if(d&26){a=ve(u[4]);let $;for($=0;$<a.length;$+=1){const V=zl(u,a,$);i[$]?(i[$].p(V,d),B(i[$],1)):(i[$]=Gl(V),i[$].c(),B(i[$],1),i[$].m(e,l))}for(Le(),$=a.length;$<i.length;$+=1)f($);Me()}const m={};d&1&&(m.triggeredBy=`#${u[0]}`),t.$set(m),(!s||d&1)&&h(e,"id",u[0]),(!s||d&2&&o!==(o=ae(ie("operation-col column ln",u[1]))+" svelte-cfq6hx"))&&h(e,"class",o)},i(u){if(!s){for(let d=0;d<a.length;d+=1)B(i[d]);B(t.$$.fragment,u),s=!0}},o(u){i=i.filter(Boolean);for(let d=0;d<i.length;d+=1)R(i[d]);R(t.$$.fragment,u),s=!1},d(u){u&&v(e),De(i,u),se(t),r=!1,je(c)}}}function Io(n){let e,l,t,o,s,r,c,a=ve(n[4]),i=[];for(let u=0;u<a.length;u+=1)i[u]=Fl(jl(n,a,u));const f=u=>R(i[u],1,1,()=>{i[u]=null});return t=new ao({props:{triggeredBy:`#${n[0]}`,offset:1}}),{c(){e=E("div");for(let u=0;u<i.length;u+=1)i[u].c();l=S(),te(t.$$.fragment),this.h()},l(u){e=I(u,"DIV",{id:!0,class:!0,role:!0});var d=C(e);for(let m=0;m<i.length;m+=1)i[m].l(d);l=N(d),le(t.$$.fragment,d),d.forEach(v),this.h()},h(){h(e,"id",n[0]),h(e,"class",o=ae(ie("operation-col column dropout",n[1]))+" svelte-cfq6hx"),h(e,"role","group")},m(u,d){H(u,e,d);for(let m=0;m<i.length;m+=1)i[m]&&i[m].m(e,null);g(e,l),ne(t,e,null),s=!0,r||(c=[_e(e,"mouseenter",n[9]),_e(e,"mouseleave",n[10])],r=!0)},p(u,d){if(d&26){a=ve(u[4]);let $;for($=0;$<a.length;$+=1){const V=jl(u,a,$);i[$]?(i[$].p(V,d),B(i[$],1)):(i[$]=Fl(V),i[$].c(),B(i[$],1),i[$].m(e,l))}for(Le(),$=a.length;$<i.length;$+=1)f($);Me()}const m={};d&1&&(m.triggeredBy=`#${u[0]}`),t.$set(m),(!s||d&1)&&h(e,"id",u[0]),(!s||d&2&&o!==(o=ae(ie("operation-col column dropout",u[1]))+" svelte-cfq6hx"))&&h(e,"class",o)},i(u){if(!s){for(let d=0;d<a.length;d+=1)B(i[d]);B(t.$$.fragment,u),s=!0}},o(u){i=i.filter(Boolean);for(let d=0;d<i.length;d+=1)R(i[d]);R(t.$$.fragment,u),s=!1},d(u){u&&v(e),De(i,u),se(t),r=!1,je(c)}}}function Co(n){let e,l,t,o,s,r,c,a=ve(n[4]),i=[];for(let u=0;u<a.length;u+=1)i[u]=Rl(Al(n,a,u));const f=u=>R(i[u],1,1,()=>{i[u]=null});return t=new po({props:{triggeredBy:`#${n[0]}`,offset:1}}),{c(){e=E("div");for(let u=0;u<i.length;u+=1)i[u].c();l=S(),te(t.$$.fragment),this.h()},l(u){e=I(u,"DIV",{id:!0,class:!0,role:!0});var d=C(e);for(let m=0;m<i.length;m+=1)i[m].l(d);l=N(d),le(t.$$.fragment,d),d.forEach(v),this.h()},h(){h(e,"id",n[0]),h(e,"class",o=ae(ie("operation-col column activation",n[1]))+" svelte-cfq6hx"),h(e,"role","group")},m(u,d){H(u,e,d);for(let m=0;m<i.length;m+=1)i[m]&&i[m].m(e,null);g(e,l),ne(t,e,null),s=!0,r||(c=[_e(e,"mouseenter",n[7]),_e(e,"mouseleave",n[8])],r=!0)},p(u,d){if(d&26){a=ve(u[4]);let $;for($=0;$<a.length;$+=1){const V=Al(u,a,$);i[$]?(i[$].p(V,d),B(i[$],1)):(i[$]=Rl(V),i[$].c(),B(i[$],1),i[$].m(e,l))}for(Le(),$=a.length;$<i.length;$+=1)f($);Me()}const m={};d&1&&(m.triggeredBy=`#${u[0]}`),t.$set(m),(!s||d&1)&&h(e,"id",u[0]),(!s||d&2&&o!==(o=ae(ie("operation-col column activation",u[1]))+" svelte-cfq6hx"))&&h(e,"class",o)},i(u){if(!s){for(let d=0;d<a.length;d+=1)B(i[d]);B(t.$$.fragment,u),s=!0}},o(u){i=i.filter(Boolean);for(let d=0;d<i.length;d+=1)R(i[d]);R(t.$$.fragment,u),s=!1},d(u){u&&v(e),De(i,u),se(t),r=!1,je(c)}}}function Pl(n){let e,l;return e=new Ct({props:{id:n[0],className:ie(n[1],{last:n[16]===n[4].length-1}),type:"residual-end",head:n[16]===0,active:n[3]}}),{c(){te(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,o){ne(e,t,o),l=!0},p(t,o){const s={};o&1&&(s.id=t[0]),o&18&&(s.className=ie(t[1],{last:t[16]===t[4].length-1})),o&8&&(s.active=t[3]),e.$set(s)},i(t){l||(B(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){se(e,t)}}}function Tl(n){let e,l;return e=new Ct({props:{id:n[0],className:ie(n[1],{last:n[16]===n[4].length-1}),type:"residual-start",head:n[16]===0,active:n[3]}}),{c(){te(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,o){ne(e,t,o),l=!0},p(t,o){const s={};o&1&&(s.id=t[0]),o&18&&(s.className=ie(t[1],{last:t[16]===t[4].length-1})),o&8&&(s.active=t[3]),e.$set(s)},i(t){l||(B(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){se(e,t)}}}function Gl(n){let e,l;return e=new Ct({props:{className:ie(n[1],{last:n[16]===n[4].length-1}),type:"ln",tail:n[16]===n[4].length-1,active:n[3]}}),{c(){te(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,o){ne(e,t,o),l=!0},p(t,o){const s={};o&18&&(s.className=ie(t[1],{last:t[16]===t[4].length-1})),o&16&&(s.tail=t[16]===t[4].length-1),o&8&&(s.active=t[3]),e.$set(s)},i(t){l||(B(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){se(e,t)}}}function Fl(n){let e,l;return e=new Ct({props:{className:ie(n[1],{last:n[16]===n[4].length-1}),type:"dropout",tail:n[16]===n[4].length-1,active:n[3]}}),{c(){te(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,o){ne(e,t,o),l=!0},p(t,o){const s={};o&18&&(s.className=ie(t[1],{last:t[16]===t[4].length-1})),o&16&&(s.tail=t[16]===t[4].length-1),o&8&&(s.active=t[3]),e.$set(s)},i(t){l||(B(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){se(e,t)}}}function Rl(n){let e,l;return e=new Ct({props:{className:ie(n[1],{last:n[16]===n[4].length-1}),type:"activation",tail:n[16]===n[4].length-1,active:n[3]}}),{c(){te(e.$$.fragment)},l(t){le(e.$$.fragment,t)},m(t,o){ne(e,t,o),l=!0},p(t,o){const s={};o&18&&(s.className=ie(t[1],{last:t[16]===t[4].length-1})),o&16&&(s.tail=t[16]===t[4].length-1),o&8&&(s.active=t[3]),e.$set(s)},i(t){l||(B(e.$$.fragment,t),l=!0)},o(t){R(e.$$.fragment,t),l=!1},d(t){se(e,t)}}}function Vo(n){let e,l,t,o;const s=[Co,Io,Eo,yo,ko],r=[];function c(a,i){return a[2]==="activation"?0:a[2]==="dropout"?1:a[2]==="ln"?2:a[2]==="residual-start"?3:a[2]==="residual-end"?4:-1}return~(e=c(n))&&(l=r[e]=s[e](n)),{c(){l&&l.c(),t=lt()},l(a){l&&l.l(a),t=lt()},m(a,i){~e&&r[e].m(a,i),H(a,t,i),o=!0},p(a,[i]){let f=e;e=c(a),e===f?~e&&r[e].p(a,i):(l&&(Le(),R(r[f],1,1,()=>{r[f]=null}),Me()),~e?(l=r[e],l?l.p(a,i):(l=r[e]=s[e](a),l.c()),B(l,1),l.m(t.parentNode,t)):l=null)},i(a){o||(B(l),o=!0)},o(a){R(l),o=!1},d(a){a&&v(t),~e&&r[e].d(a)}}}function Do(n,e,l){let t;$e(n,ot,L=>l(4,t=L));let{id:o}=e,{className:s=void 0}=e,{type:r=void 0}=e,c=!1;const a=()=>{l(3,c=!0);const L=document.querySelector(`#${o}-start`),z=document.querySelector(`#${o}-end`),p=Oe(`.residual-connector.${o}`);p.style("opacity",1),f(p),L==null||L.classList.add("active"),z==null||z.classList.add("active")},i=()=>{l(3,c=!1);const L=document.querySelector(`#${o}-start`),z=document.querySelector(`#${o}-end`);Oe(`.residual-connector.${o}`).style("opacity",0),L==null||L.classList.remove("active"),z==null||z.classList.remove("active")},f=L=>{const z=L.node().getTotalLength();L.attr("stroke-dasharray",z+" "+z).attr("stroke-dashoffset",z).transition().duration(300).attr("stroke-dashoffset",0)},u=()=>{l(3,c=!0)},d=()=>{l(3,c=!1)},m=()=>{l(3,c=!0)},$=()=>{l(3,c=!1)},V=()=>{l(3,c=!0)},j=()=>{l(3,c=!1)};return n.$$set=L=>{"id"in L&&l(0,o=L.id),"className"in L&&l(1,s=L.className),"type"in L&&l(2,r=L.type)},[o,s,r,c,t,a,i,u,d,m,$,V,j]}class et extends He{constructor(e){super(),ze(this,e,Do,Vo,Ne,{id:0,className:1,type:2})}}function Wl(n,e,l){const t=n.slice();return t[19]=e[l],t[21]=l,t}function Zl(n,e,l){const t=n.slice();return t[19]=e[l],t[21]=l,t}function Xl(n,e,l){const t=n.slice();return t[19]=e[l],t[21]=l,t}function Kl(n,e,l){const t=n.slice();return t[19]=e[l],t[21]=l,t}function Yl(n,e,l){const t=n.slice();return t[19]=e[l],t[21]=l,t}function Ol(n,e,l){const t=n.slice();return t[19]=e[l],t[21]=l,t}function Ql(n){let e,l="Token";return{c(){e=E("div"),e.textContent=l,this.h()},l(t){e=I(t,"DIV",{class:!0,"data-svelte-h":!0}),Ie(e)!=="svelte-6k2z6t"&&(e.textContent=l),this.h()},h(){h(e,"class","subtitle embedding-detail svelte-1t3691d")},m(t,o){H(t,e,o)},d(t){t&&v(e)}}}function Ul(n){let e,l,t=n[19]+"",o;return{c(){e=E("div"),l=E("span"),o=oe(t),this.h()},l(s){e=I(s,"DIV",{class:!0});var r=C(e);l=I(r,"SPAN",{class:!0});var c=C(l);o=re(c,t),c.forEach(v),r.forEach(v),this.h()},h(){h(l,"class","label svelte-1t3691d"),h(e,"class","cell svelte-1t3691d"),x(e,"last",n[21]===n[4].length-1)},m(s,r){H(s,e,r),g(e,l),g(l,o)},p(s,r){r&16&&t!==(t=s[19]+"")&&Ve(o,t),r&16&&x(e,"last",s[21]===s[4].length-1)},d(s){s&&v(e)}}}function Jl(n){let e,l,t,o,s,r="Token<br/>Embedding",c,a,i,f,u,d,m,$,V="Positional<br/>Embedding",j,L,z,p,D;e=new Ke({props:{triggeredBy:".embedding .vector",placement:"right",class:"popover text-sm font-light",$$slots:{default:[Lo]},$$scope:{ctx:n}}}),c=new xt({props:{id:"token-embedding",$$slots:{default:[Mo]},$$scope:{ctx:n}}});let M=ve(n[4]),_=[];for(let k=0;k<M.length;k+=1)_[k]=xl(Yl(n,M,k));const y=k=>R(_[k],1,1,()=>{_[k]=null});let F=ve(n[4]),Z=[];for(let k=0;k<F.length;k+=1)Z[k]=en(Kl(n,F,k));j=new xt({props:{id:"position-embedding",$$slots:{default:[Bo]},$$scope:{ctx:n}}});let P=ve(n[4]),X=[];for(let k=0;k<P.length;k+=1)X[k]=tn(Xl(n,P,k));const W=k=>R(X[k],1,1,()=>{X[k]=null});let ee=ve(n[4]),T=[];for(let k=0;k<ee.length;k+=1)T[k]=ln(Zl(n,ee,k));return{c(){te(e.$$.fragment),l=S(),t=E("div"),o=E("div"),s=E("span"),s.innerHTML=r,te(c.$$.fragment),a=S();for(let k=0;k<_.length;k+=1)_[k].c();i=S(),f=E("div");for(let k=0;k<Z.length;k+=1)Z[k].c();u=S(),d=E("div"),m=E("div"),$=E("span"),$.innerHTML=V,te(j.$$.fragment),L=S();for(let k=0;k<X.length;k+=1)X[k].c();z=S(),p=E("div");for(let k=0;k<T.length;k+=1)T[k].c();this.h()},l(k){le(e.$$.fragment,k),l=N(k),t=I(k,"DIV",{class:!0});var K=C(t);o=I(K,"DIV",{class:!0});var w=C(o);s=I(w,"SPAN",{"data-svelte-h":!0}),Ie(s)!=="svelte-1vtrff3"&&(s.innerHTML=r),le(c.$$.fragment,w),w.forEach(v),a=N(K);for(let q=0;q<_.length;q+=1)_[q].l(K);K.forEach(v),i=N(k),f=I(k,"DIV",{class:!0});var G=C(f);for(let q=0;q<Z.length;q+=1)Z[q].l(G);G.forEach(v),u=N(k),d=I(k,"DIV",{class:!0});var A=C(d);m=I(A,"DIV",{class:!0});var b=C(m);$=I(b,"SPAN",{"data-svelte-h":!0}),Ie($)!=="svelte-1fbbx6q"&&($.innerHTML=V),le(j.$$.fragment,b),b.forEach(v),L=N(A);for(let q=0;q<X.length;q+=1)X[q].l(A);A.forEach(v),z=N(k),p=I(k,"DIV",{class:!0});var U=C(p);for(let q=0;q<T.length;q+=1)T[q].l(U);U.forEach(v),this.h()},h(){h(o,"class","subtitle flex items-center gap-1 svelte-1t3691d"),h(t,"class","column token-embedding embedding-detail svelte-1t3691d"),h(f,"class","column symbol embedding-detail svelte-1t3691d"),h(m,"class","subtitle flex gap-1 svelte-1t3691d"),h(d,"class","column embedding-detail position-embedding svelte-1t3691d"),h(p,"class","column symbol embedding-d etail svelte-1t3691d")},m(k,K){ne(e,k,K),H(k,l,K),H(k,t,K),g(t,o),g(o,s),ne(c,o,null),g(t,a);for(let w=0;w<_.length;w+=1)_[w]&&_[w].m(t,null);H(k,i,K),H(k,f,K);for(let w=0;w<Z.length;w+=1)Z[w]&&Z[w].m(f,null);H(k,u,K),H(k,d,K),g(d,m),g(m,$),ne(j,m,null),g(d,L);for(let w=0;w<X.length;w+=1)X[w]&&X[w].m(d,null);H(k,z,K),H(k,p,K);for(let w=0;w<T.length;w+=1)T[w]&&T[w].m(p,null);D=!0},p(k,K){const w={};K&134217760&&(w.$$scope={dirty:K,ctx:k}),e.$set(w);const G={};if(K&134217728&&(G.$$scope={dirty:K,ctx:k}),c.$set(G),K&16){M=ve(k[4]);let b;for(b=0;b<M.length;b+=1){const U=Yl(k,M,b);_[b]?(_[b].p(U,K),B(_[b],1)):(_[b]=xl(U),_[b].c(),B(_[b],1),_[b].m(t,null))}for(Le(),b=M.length;b<_.length;b+=1)y(b);Me()}if(K&16){F=ve(k[4]);let b;for(b=0;b<F.length;b+=1){const U=Kl(k,F,b);Z[b]?Z[b].p(U,K):(Z[b]=en(),Z[b].c(),Z[b].m(f,null))}for(;b<Z.length;b+=1)Z[b].d(1);Z.length=F.length}const A={};if(K&134217728&&(A.$$scope={dirty:K,ctx:k}),j.$set(A),K&80){P=ve(k[4]);let b;for(b=0;b<P.length;b+=1){const U=Xl(k,P,b);X[b]?(X[b].p(U,K),B(X[b],1)):(X[b]=tn(U),X[b].c(),B(X[b],1),X[b].m(d,null))}for(Le(),b=P.length;b<X.length;b+=1)W(b);Me()}if(K&16){ee=ve(k[4]);let b;for(b=0;b<ee.length;b+=1){const U=Zl(k,ee,b);T[b]?T[b].p(U,K):(T[b]=ln(),T[b].c(),T[b].m(p,null))}for(;b<T.length;b+=1)T[b].d(1);T.length=ee.length}},i(k){if(!D){B(e.$$.fragment,k),B(c.$$.fragment,k);for(let K=0;K<M.length;K+=1)B(_[K]);B(j.$$.fragment,k);for(let K=0;K<P.length;K+=1)B(X[K]);D=!0}},o(k){R(e.$$.fragment,k),R(c.$$.fragment,k),_=_.filter(Boolean);for(let K=0;K<_.length;K+=1)R(_[K]);R(j.$$.fragment,k),X=X.filter(Boolean);for(let K=0;K<X.length;K+=1)R(X[K]);D=!1},d(k){k&&(v(l),v(t),v(i),v(f),v(u),v(d),v(z),v(p)),se(e,k),se(c),De(_,k),De(Z,k),se(j),De(X,k),De(T,k)}}}function Lo(n){let e,l=n[5].dimension+"",t,o;return{c(){e=oe("size(1, "),t=oe(l),o=oe(")")},l(s){e=re(s,"size(1, "),t=re(s,l),o=re(s,")")},m(s,r){H(s,e,r),H(s,t,r),H(s,o,r)},p(s,r){r&32&&l!==(l=s[5].dimension+"")&&Ve(t,l)},d(s){s&&(v(e),v(t),v(o))}}}function Mo(n){let e;return{c(){e=oe("Token Embedding is")},l(l){e=re(l,"Token Embedding is")},m(l,t){H(l,e,t)},d(l){l&&v(e)}}}function qo(n){let e,l="id",t;return{c(){e=E("span"),e.textContent=l,t=E("br"),this.h()},l(o){e=I(o,"SPAN",{class:!0,"data-svelte-h":!0}),Ie(e)!=="svelte-1e13gni"&&(e.textContent=l),t=I(o,"BR",{}),this.h()},h(){h(e,"class","label svelte-1t3691d")},m(o,s){H(o,e,s),H(o,t,s)},d(o){o&&(v(e),v(t))}}}function xl(n){let e,l,t='<div class="flex flex-col items-center"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 31 9" fill="none" class="w-10 text-gray-300"><path fill="currentColor" d="M30.3886 4.74352C30.5839 4.54826 30.5839 4.23168 30.3886 4.03642L27.2067 0.854435C27.0114 0.659173 26.6948 0.659173 26.4996 0.854435C26.3043 1.0497 26.3043 1.36628 26.4996 1.56154L29.328 4.38997L26.4996 7.2184C26.3043 7.41366 26.3043 7.73024 26.4996 7.9255C26.6948 8.12076 27.0114 8.12076 27.2067 7.9255L30.3886 4.74352ZM0.31958 4.88997H30.0351V3.88997H0.31958V4.88997Z"></path></svg></div>',o,s,r,c,a,i,f,u,d=(Math.random()*1e4).toFixed()+"",m,$,V;c=new tt({props:{active:!0}});let j=n[21]===0&&qo();return{c(){e=E("div"),l=E("div"),l.innerHTML=t,o=S(),s=E("div"),r=E("div"),te(c.$$.fragment),a=S(),i=E("span"),j&&j.c(),f=S(),u=E("span"),m=oe(d),$=S(),this.h()},l(L){e=I(L,"DIV",{class:!0});var z=C(e);l=I(z,"DIV",{class:!0,"data-svelte-h":!0}),Ie(l)!=="svelte-lh48yp"&&(l.innerHTML=t),o=N(z),s=I(z,"DIV",{class:!0});var p=C(s);r=I(p,"DIV",{class:!0});var D=C(r);le(c.$$.fragment,D),D.forEach(v),a=N(p),i=I(p,"SPAN",{class:!0});var M=C(i);j&&j.l(M),f=N(M),u=I(M,"SPAN",{class:!0});var _=C(u);m=re(_,d),_.forEach(v),M.forEach(v),p.forEach(v),$=N(z),z.forEach(v),this.h()},h(){h(l,"class","vocab-index ellipsis flex items-center text-right text-xs text-gray-400 svelte-1t3691d"),h(r,"class",ae(`vector ${Rt}`)+" svelte-1t3691d"),h(u,"class","val svelte-1t3691d"),h(i,"class","index-val text-xs svelte-1t3691d"),h(s,"class","cell flex items-center svelte-1t3691d"),h(e,"class","token-id flex items-center")},m(L,z){H(L,e,z),g(e,l),g(e,o),g(e,s),g(s,r),ne(c,r,null),g(s,a),g(s,i),j&&j.m(i,null),g(i,f),g(i,u),g(u,m),g(e,$),V=!0},p:Se,i(L){V||(B(c.$$.fragment,L),V=!0)},o(L){R(c.$$.fragment,L),V=!1},d(L){L&&v(e),se(c),j&&j.d()}}}function en(n){let e,l="+";return{c(){e=E("div"),e.textContent=l,this.h()},l(t){e=I(t,"DIV",{class:!0,"data-svelte-h":!0}),Ie(e)!=="svelte-124y0va"&&(e.textContent=l),this.h()},h(){h(e,"class","cell svelte-1t3691d")},m(t,o){H(t,e,o)},p:Se,d(t){t&&v(e)}}}function Bo(n){let e;return{c(){e=oe("Positional Embedding is")},l(l){e=re(l,"Positional Embedding is")},m(l,t){H(l,e,t)},d(l){l&&v(e)}}}function So(n){let e,l="position",t;return{c(){e=E("span"),e.textContent=l,t=E("br"),this.h()},l(o){e=I(o,"SPAN",{class:!0,"data-svelte-h":!0}),Ie(e)!=="svelte-4n0g90"&&(e.textContent=l),t=I(o,"BR",{}),this.h()},h(){h(e,"class","label svelte-1t3691d")},m(o,s){H(o,e,s),H(o,t,s)},d(o){o&&(v(e),v(t))}}}function tn(n){let e,l,t,o,s,r,c,a,i,f;t=new tt({props:{active:!0,colorScale:n[12]}});let u=n[21]===0&&So();return{c(){e=E("div"),l=E("div"),te(t.$$.fragment),o=S(),s=E("span"),u&&u.c(),r=S(),c=E("span"),a=oe(n[21]),i=S(),this.h()},l(d){e=I(d,"DIV",{class:!0});var m=C(e);l=I(m,"DIV",{class:!0});var $=C(l);le(t.$$.fragment,$),$.forEach(v),o=N(m),s=I(m,"SPAN",{class:!0});var V=C(s);u&&u.l(V),r=N(V),c=I(V,"SPAN",{class:!0});var j=C(c);a=re(j,n[21]),j.forEach(v),V.forEach(v),i=N(m),m.forEach(v),this.h()},h(){h(l,"class",ae(`vector ${Rt}`)+" svelte-1t3691d"),h(c,"class","val svelte-1t3691d"),h(s,"class","index-val text-xs svelte-1t3691d"),h(e,"class","cell flex items-center svelte-1t3691d")},m(d,m){H(d,e,m),g(e,l),ne(t,l,null),g(e,o),g(e,s),u&&u.m(s,null),g(s,r),g(s,c),g(c,a),g(e,i),f=!0},p:Se,i(d){f||(B(t.$$.fragment,d),f=!0)},o(d){R(t.$$.fragment,d),f=!1},d(d){d&&v(e),se(t),u&&u.d()}}}function ln(n){let e,l="=";return{c(){e=E("div"),e.textContent=l,this.h()},l(t){e=I(t,"DIV",{class:!0,"data-svelte-h":!0}),Ie(e)!=="svelte-1btrmmo"&&(e.textContent=l),this.h()},h(){h(e,"class","cell svelte-1t3691d")},m(t,o){H(t,e,o)},p:Se,d(t){t&&v(e)}}}function No(n){let e,l=n[5].dimension+"",t,o;return{c(){e=oe("size(1, "),t=oe(l),o=oe(")")},l(s){e=re(s,"size(1, "),t=re(s,l),o=re(s,")")},m(s,r){H(s,e,r),H(s,t,r),H(s,o,r)},p(s,r){r&32&&l!==(l=s[5].dimension+"")&&Ve(t,l)},d(s){s&&(v(e),v(t),v(o))}}}function nn(n){let e,l,t,o;return l=new tt({props:{active:n[3]||n[1]}}),{c(){e=E("div"),te(l.$$.fragment),t=S(),this.h()},l(s){e=I(s,"DIV",{class:!0});var r=C(e);le(l.$$.fragment,r),t=N(r),r.forEach(v),this.h()},h(){h(e,"class",ae(`vector ${Rt}`)+" svelte-1t3691d"),x(e,"last",n[21]===n[4].length-1)},m(s,r){H(s,e,r),ne(l,e,null),g(e,t),o=!0},p(s,r){const c={};r&10&&(c.active=s[3]||s[1]),l.$set(c),(!o||r&16)&&x(e,"last",s[21]===s[4].length-1)},i(s){o||(B(l.$$.fragment,s),o=!0)},o(s){R(l.$$.fragment,s),o=!1},d(s){s&&v(e),se(l)}}}function Ho(n){let e,l,t="<div>Embedding</div>",o,s,r,c,a,i,f,u,d,m,$,V,j,L,z,p,D,M,_,y,F,Z,P,X,W=n[1]&&Ql(),ee=ve(n[4]),T=[];for(let A=0;A<ee.length;A+=1)T[A]=Ul(Ol(n,ee,A));let k=n[1]&&Jl(n);$=new Ke({props:{triggeredBy:".embedding .vector",placement:"right",class:"popover text-sm font-light",$$slots:{default:[No]},$$scope:{ctx:n}}});let K=ve(n[4]),w=[];for(let A=0;A<K.length;A+=1)w[A]=nn(Wl(n,K,A));const G=A=>R(w[A],1,1,()=>{w[A]=null});return p=new et({props:{type:"dropout",id:"embedding-dropout"}}),M=new et({props:{type:"residual-start",id:"residual-first"}}),y=new et({props:{type:"ln",id:"embedding-ln"}}),{c(){e=E("div"),l=E("div"),l.innerHTML=t,o=S(),s=E("div"),r=E("div"),c=E("div"),W&&W.c(),a=S();for(let A=0;A<T.length;A+=1)T[A].c();i=S(),f=E("div"),u=S(),k&&k.c(),d=S(),m=E("div"),te($.$$.fragment),V=S(),j=E("div");for(let A=0;A<w.length;A+=1)w[A].c();L=S(),z=E("div"),te(p.$$.fragment),D=S(),te(M.$$.fragment),_=S(),te(y.$$.fragment),this.h()},l(A){e=I(A,"DIV",{class:!0,role:!0,tabindex:!0});var b=C(e);l=I(b,"DIV",{class:!0,tabindex:!0,role:!0,"data-svelte-h":!0}),Ie(l)!=="svelte-15hzaej"&&(l.innerHTML=t),o=N(b),s=I(b,"DIV",{class:!0});var U=C(s);r=I(U,"DIV",{class:!0});var q=C(r);c=I(q,"DIV",{class:!0});var ge=C(c);W&&W.l(ge),a=N(ge);for(let Y=0;Y<T.length;Y+=1)T[Y].l(ge);i=N(ge),f=I(ge,"DIV",{class:!0}),C(f).forEach(v),ge.forEach(v),u=N(q),k&&k.l(q),q.forEach(v),d=N(U),m=I(U,"DIV",{class:!0});var de=C(m);le($.$$.fragment,de),V=N(de),j=I(de,"DIV",{class:!0});var O=C(j);for(let Y=0;Y<w.length;Y+=1)w[Y].l(O);O.forEach(v),L=N(de),z=I(de,"DIV",{class:!0});var pe=C(z);le(p.$$.fragment,pe),D=N(pe),le(M.$$.fragment,pe),_=N(pe),le(y.$$.fragment,pe),pe.forEach(v),de.forEach(v),U.forEach(v),b.forEach(v),this.h()},h(){h(l,"class","title expandable svelte-1t3691d"),h(l,"tabindex","0"),h(l,"role","button"),h(f,"class","bounding embedding-bounding svelte-1t3691d"),x(f,"active",n[3]&&!n[1]),h(c,"class","column token-string relative svelte-1t3691d"),h(r,"class","token-column resizable resize-watch flex"),h(j,"class","column vectors svelte-1t3691d"),h(z,"class","operations flex svelte-1t3691d"),h(m,"class","vector-column relative flex"),h(s,"class","content relative svelte-1t3691d"),h(e,"class",F=ae(ie("embedding",n[0],{expanded:n[1]}))+" svelte-1t3691d"),h(e,"role","button"),h(e,"tabindex","0")},m(A,b){H(A,e,b),g(e,l),g(e,o),g(e,s),g(s,r),g(r,c),W&&W.m(c,null),g(c,a);for(let U=0;U<T.length;U+=1)T[U]&&T[U].m(c,null);g(c,i),g(c,f),g(r,u),k&&k.m(r,null),g(s,d),g(s,m),ne($,m,null),g(m,V),g(m,j);for(let U=0;U<w.length;U+=1)w[U]&&w[U].m(j,null);g(m,L),g(m,z),ne(p,z,null),g(z,D),ne(M,z,null),g(z,_),ne(y,z,null),n[13](e),Z=!0,P||(X=[_e(l,"click",n[8]),_e(l,"keydown",n[8]),_e(l,"mouseenter",n[9]),_e(l,"mouseleave",n[10]),_e(e,"click",n[7]),_e(e,"keydown",n[7])],P=!0)},p(A,[b]){if(A[1]?W||(W=Ql(),W.c(),W.m(c,a)):W&&(W.d(1),W=null),b&16){ee=ve(A[4]);let q;for(q=0;q<ee.length;q+=1){const ge=Ol(A,ee,q);T[q]?T[q].p(ge,b):(T[q]=Ul(ge),T[q].c(),T[q].m(c,i))}for(;q<T.length;q+=1)T[q].d(1);T.length=ee.length}(!Z||b&10)&&x(f,"active",A[3]&&!A[1]),A[1]?k?(k.p(A,b),b&2&&B(k,1)):(k=Jl(A),k.c(),B(k,1),k.m(r,null)):k&&(Le(),R(k,1,1,()=>{k=null}),Me());const U={};if(b&134217760&&(U.$$scope={dirty:b,ctx:A}),$.$set(U),b&26){K=ve(A[4]);let q;for(q=0;q<K.length;q+=1){const ge=Wl(A,K,q);w[q]?(w[q].p(ge,b),B(w[q],1)):(w[q]=nn(ge),w[q].c(),B(w[q],1),w[q].m(j,null))}for(Le(),q=K.length;q<w.length;q+=1)G(q);Me()}(!Z||b&3&&F!==(F=ae(ie("embedding",A[0],{expanded:A[1]}))+" svelte-1t3691d"))&&h(e,"class",F)},i(A){if(!Z){B(k),B($.$$.fragment,A);for(let b=0;b<K.length;b+=1)B(w[b]);B(p.$$.fragment,A),B(M.$$.fragment,A),B(y.$$.fragment,A),Z=!0}},o(A){R(k),R($.$$.fragment,A),w=w.filter(Boolean);for(let b=0;b<w.length;b+=1)R(w[b]);R(p.$$.fragment,A),R(M.$$.fragment,A),R(y.$$.fragment,A),Z=!1},d(A){A&&v(e),W&&W.d(),De(T,A),k&&k.d(),se($),De(w,A),se(p),se(M),se(y),n[13](null),P=!1,je(X)}}}const Rt="bg-gray-300";function zo(n,e,l){let t,o,s;$e(n,Fe,_=>l(11,t=_)),$e(n,ot,_=>l(4,o=_)),$e(n,$t,_=>l(5,s=_));const{theme:r}=dt(ht);let{className:c=void 0}=e;Nt("block-id","embedding");const a=St("block-id");let i=!1;const f=()=>{i||(Fe.set({id:a}),V())},u=_=>{_.stopPropagation(),_.preventDefault(),i?(Fe.set({id:null}),j()):(Fe.set({id:a}),V())};let d;function m(_){i&&!d.contains(_.target)&&Fe.set({id:null})}st(()=>(document.body.addEventListener("click",m),()=>{document.body.removeEventListener("click",m)}));let $;const V=async()=>{$=ut.Flip.getState(".embedding .token-column"),l(1,i=!0),await Et(),ut.Flip.from($,{duration:1,ease:"power2.inOut"}),ft.to(".embedding-detail",{opacity:1,duration:.5,delay:.5})},j=async()=>{$=ut.Flip.getState(".embedding .token-column"),l(1,i=!1),await Et(),ut.Flip.from($,{duration:.5,ease:"power2.inOut"})};let L=!1;function z(){l(3,L=!0)}function p(){l(3,L=!1)}const D=(_,y)=>En().domain([0,.5,1]).range([r.colors.red[400],"white",r.colors.blue[400]])(_);function M(_){Xe[_?"unshift":"push"](()=>{d=_,l(2,d)})}return n.$$set=_=>{"className"in _&&l(0,c=_.className)},n.$$.update=()=>{n.$$.dirty&2050&&t.id!==a&&i&&(l(1,i=!1),j())},[c,i,d,L,o,s,r,f,u,z,p,t,D,M]}class jo extends He{constructor(e){super(),ze(this,e,zo,Ho,Ne,{className:0})}}function sn(n,e,l){const t=n.slice();return t[10]=e[l],t[12]=l,t}function on(n,e,l){const t=n.slice();return t[10]=e[l],t[12]=l,t}function rn(n,e,l){const t=n.slice();return t[10]=e[l],t[12]=l,t}function Ao(n){let e,l=n[3].dimension+"",t,o;return{c(){e=oe("size(1, "),t=oe(l),o=oe(")")},l(s){e=re(s,"size(1, "),t=re(s,l),o=re(s,")")},m(s,r){H(s,e,r),H(s,t,r),H(s,o,r)},p(s,r){r&8&&l!==(l=s[3].dimension+"")&&Ve(t,l)},d(s){s&&(v(e),v(t),v(o))}}}function Po(n){let e,l=n[3].dimension+"",t,o;return{c(){e=oe("size(1, "),t=oe(l),o=oe(")")},l(s){e=re(s,"size(1, "),t=re(s,l),o=re(s,")")},m(s,r){H(s,e,r),H(s,t,r),H(s,o,r)},p(s,r){r&8&&l!==(l=s[3].dimension+"")&&Ve(t,l)},d(s){s&&(v(e),v(t),v(o))}}}function To(n){let e,l=n[3].dimension*4+"",t,o;return{c(){e=oe("size(1, "),t=oe(l),o=oe(")")},l(s){e=re(s,"size(1, "),t=re(s,l),o=re(s,")")},m(s,r){H(s,e,r),H(s,t,r),H(s,o,r)},p(s,r){r&8&&l!==(l=s[3].dimension*4+"")&&Ve(t,l)},d(s){s&&(v(e),v(t),v(o))}}}function an(n){let e,l,t=n[10]+"",o,s,r,c,a,i,f,u,d,m,$,V;c=new tt({props:{colorScale:"purple",active:n[2]===n[12]}});function j(){return n[8](n[12])}return{c(){e=E("div"),l=E("span"),o=oe(t),s=S(),r=E("div"),te(c.$$.fragment),a=S(),i=E("div"),f=S(),u=E("div"),d=S(),this.h()},l(L){e=I(L,"DIV",{class:!0,role:!0});var z=C(e);l=I(z,"SPAN",{class:!0});var p=C(l);o=re(p,t),p.forEach(v),s=N(z),r=I(z,"DIV",{class:!0});var D=C(r);le(c.$$.fragment,D),a=N(D),i=I(D,"DIV",{class:!0}),C(i).forEach(v),f=N(D),u=I(D,"DIV",{class:!0}),C(u).forEach(v),D.forEach(v),d=N(z),z.forEach(v),this.h()},h(){h(l,"class","label float"),h(i,"class","sub-vector x1-12 head1"),h(u,"class","sub-vector head-rest grow"),h(r,"class",ae(`vector flex flex-col  ${Fo}`)+" svelte-16fqg1x"),h(e,"class","cell"),h(e,"role","group"),x(e,"last",n[12]===n[5].length-1)},m(L,z){H(L,e,z),g(e,l),g(l,o),g(e,s),g(e,r),ne(c,r,null),g(r,a),g(r,i),g(r,f),g(r,u),g(e,d),m=!0,$||(V=[_e(e,"mouseenter",j),_e(e,"mouseleave",n[9])],$=!0)},p(L,z){n=L,(!m||z&32)&&t!==(t=n[10]+"")&&Ve(o,t);const p={};z&4&&(p.active=n[2]===n[12]),c.$set(p),(!m||z&32)&&x(e,"last",n[12]===n[5].length-1)},i(L){m||(B(c.$$.fragment,L),m=!0)},o(L){R(c.$$.fragment,L),m=!1},d(L){L&&v(e),se(c),$=!1,je(V)}}}function cn(n){let e,l,t,o,s,r;return t=new tt({props:{colorScale:"indigo"}}),{c(){e=E("div"),l=E("div"),te(t.$$.fragment),o=S(),this.h()},l(c){e=I(c,"DIV",{class:!0});var a=C(e);l=I(a,"DIV",{class:!0});var i=C(l);le(t.$$.fragment,i),i.forEach(v),o=N(a),a.forEach(v),this.h()},h(){h(l,"class",ae(ie(`vector x4 ${Ro} opacity-80`))+" svelte-16fqg1x"),h(e,"class",s=ae(ie("cell x4",{small:n[12]!==0&&n[12]!==n[5].length-1}))+" svelte-16fqg1x"),x(e,"last",n[12]===n[5].length-1)},m(c,a){H(c,e,a),g(e,l),ne(t,l,null),g(e,o),r=!0},p(c,a){(!r||a&32&&s!==(s=ae(ie("cell x4",{small:c[12]!==0&&c[12]!==c[5].length-1}))+" svelte-16fqg1x"))&&h(e,"class",s),(!r||a&32)&&x(e,"last",c[12]===c[5].length-1)},i(c){r||(B(t.$$.fragment,c),r=!0)},o(c){R(t.$$.fragment,c),r=!1},d(c){c&&v(e),se(t)}}}function fn(n){let e,l,t,o,s;return t=new tt({props:{colorScale:"blue"}}),{c(){e=E("div"),l=E("div"),te(t.$$.fragment),o=S(),this.h()},l(r){e=I(r,"DIV",{class:!0});var c=C(e);l=I(c,"DIV",{class:!0});var a=C(l);le(t.$$.fragment,a),a.forEach(v),o=N(c),c.forEach(v),this.h()},h(){h(l,"class",ae(`vector ${Wo}`)+" svelte-16fqg1x"),h(e,"class","cell"),x(e,"last",n[12]===n[5].length-1)},m(r,c){H(r,e,c),g(e,l),ne(t,l,null),g(e,o),s=!0},p(r,c){(!s||c&32)&&x(e,"last",r[12]===r[5].length-1)},i(r){s||(B(t.$$.fragment,r),s=!0)},o(r){R(t.$$.fragment,r),s=!1},d(r){r&&v(e),se(t)}}}function Go(n){let e,l,t="MLP",o,s,r,c,a,i,f,u,d,m,$,V,j,L,z,p,D,M,_,y,F,Z,P,X,W,ee,T,k,K,w,G,A,b,U,q,ge,de,O,pe;r=new Ke({props:{triggeredBy:".mlp .first-layer .vector",placement:"right",class:"popover text-sm font-light",$$slots:{default:[Ao]},$$scope:{ctx:n}}}),a=new Ke({props:{triggeredBy:".mlp .out .vector",placement:"right",class:"popover text-sm font-light",$$slots:{default:[Po]},$$scope:{ctx:n}}}),f=new Ke({props:{triggeredBy:".mlp .projections .vector",placement:"right",class:"popover text-sm font-light",$$slots:{default:[To]},$$scope:{ctx:n}}});let Y=ve(n[5]),me=[];for(let Q=0;Q<Y.length;Q+=1)me[Q]=an(rn(n,Y,Q));const Re=Q=>R(me[Q],1,1,()=>{me[Q]=null});p=new et({props:{type:"dropout",id:"mlp-first-dropout"}}),M=new et({props:{type:"residual-end",id:"residual-first"}}),y=new et({props:{type:"ln",id:"mlp-first-ln"}}),Z=new et({props:{type:"residual-start",id:"residual-second"}});let Pe=ve(n[5]),Ce=[];for(let Q=0;Q<Pe.length;Q+=1)Ce[Q]=cn(on(n,Pe,Q));const Qe=Q=>R(Ce[Q],1,1,()=>{Ce[Q]=null});k=new et({props:{type:"activation",id:"mlp-activation",className:"x4"}}),G=new et({props:{type:"residual-end",id:"residual-second"}}),b=new et({props:{type:"ln",id:"mlp-second-ln"}});let Te=ve(n[5]),we=[];for(let Q=0;Q<Te.length;Q+=1)we[Q]=fn(sn(n,Te,Q));const qe=Q=>R(we[Q],1,1,()=>{we[Q]=null});return{c(){e=E("div"),l=E("div"),l.textContent=t,o=S(),s=E("div"),te(r.$$.fragment),c=S(),te(a.$$.fragment),i=S(),te(f.$$.fragment),u=S(),d=E("div"),m=S(),$=E("div"),V=S(),j=E("div"),L=E("div");for(let Q=0;Q<me.length;Q+=1)me[Q].c();z=S(),te(p.$$.fragment),D=S(),te(M.$$.fragment),_=S(),te(y.$$.fragment),F=S(),te(Z.$$.fragment),P=S(),X=E("div"),W=E("div"),ee=E("div");for(let Q=0;Q<Ce.length;Q+=1)Ce[Q].c();T=S(),te(k.$$.fragment),K=S(),w=E("div"),te(G.$$.fragment),A=S(),te(b.$$.fragment),U=S(),q=E("div");for(let Q=0;Q<we.length;Q+=1)we[Q].c();this.h()},l(Q){e=I(Q,"DIV",{class:!0});var ue=C(e);l=I(ue,"DIV",{class:!0,role:!0,"data-svelte-h":!0}),Ie(l)!=="svelte-50ab67"&&(l.textContent=t),o=N(ue),s=I(ue,"DIV",{class:!0});var be=C(s);le(r.$$.fragment,be),c=N(be),le(a.$$.fragment,be),i=N(be),le(f.$$.fragment,be),u=N(be),d=I(be,"DIV",{class:!0}),C(d).forEach(v),m=N(be),$=I(be,"DIV",{class:!0}),C($).forEach(v),V=N(be),j=I(be,"DIV",{class:!0});var Be=C(j);L=I(Be,"DIV",{class:!0});var rt=C(L);for(let Ge=0;Ge<me.length;Ge+=1)me[Ge].l(rt);rt.forEach(v),z=N(Be),le(p.$$.fragment,Be),D=N(Be),le(M.$$.fragment,Be),_=N(Be),le(y.$$.fragment,Be),F=N(Be),le(Z.$$.fragment,Be),Be.forEach(v),P=N(be),X=I(be,"DIV",{class:!0});var ce=C(X);W=I(ce,"DIV",{class:!0});var Ae=C(W);ee=I(Ae,"DIV",{class:!0});var vt=C(ee);for(let Ge=0;Ge<Ce.length;Ge+=1)Ce[Ge].l(vt);vt.forEach(v),T=N(Ae),le(k.$$.fragment,Ae),Ae.forEach(v),K=N(ce),w=I(ce,"DIV",{class:!0});var Je=C(w);le(G.$$.fragment,Je),A=N(Je),le(b.$$.fragment,Je),U=N(Je),q=I(Je,"DIV",{class:!0});var We=C(q);for(let Ge=0;Ge<we.length;Ge+=1)we[Ge].l(We);We.forEach(v),Je.forEach(v),ce.forEach(v),be.forEach(v),ue.forEach(v),this.h()},h(){h(l,"class","title"),h(l,"role","group"),h(d,"class","bounding transformer-bounding svelte-16fqg1x"),x(d,"active",n[4]),h($,"class","bounding mlp-bounding svelte-16fqg1x"),x($,"active",n[1]),h(L,"class","column initial"),h(j,"class","layer first-layer flex svelte-16fqg1x"),h(ee,"class","column"),h(W,"class","projections flex"),h(q,"class","column out"),h(w,"class","ouputs flex"),h(X,"class","layer second-layer flex justify-between svelte-16fqg1x"),h(s,"class","content relative svelte-16fqg1x"),h(e,"class",ge=ae(ie("mlp",n[0]))+" svelte-16fqg1x")},m(Q,ue){H(Q,e,ue),g(e,l),g(e,o),g(e,s),ne(r,s,null),g(s,c),ne(a,s,null),g(s,i),ne(f,s,null),g(s,u),g(s,d),g(s,m),g(s,$),g(s,V),g(s,j),g(j,L);for(let be=0;be<me.length;be+=1)me[be]&&me[be].m(L,null);g(j,z),ne(p,j,null),g(j,D),ne(M,j,null),g(j,_),ne(y,j,null),g(j,F),ne(Z,j,null),g(s,P),g(s,X),g(X,W),g(W,ee);for(let be=0;be<Ce.length;be+=1)Ce[be]&&Ce[be].m(ee,null);g(W,T),ne(k,W,null),g(X,K),g(X,w),ne(G,w,null),g(w,A),ne(b,w,null),g(w,U),g(w,q);for(let be=0;be<we.length;be+=1)we[be]&&we[be].m(q,null);de=!0,O||(pe=[_e(l,"mouseenter",n[6]),_e(l,"mouseleave",n[7])],O=!0)},p(Q,[ue]){const be={};ue&32776&&(be.$$scope={dirty:ue,ctx:Q}),r.$set(be);const Be={};ue&32776&&(Be.$$scope={dirty:ue,ctx:Q}),a.$set(Be);const rt={};if(ue&32776&&(rt.$$scope={dirty:ue,ctx:Q}),f.$set(rt),(!de||ue&16)&&x(d,"active",Q[4]),(!de||ue&2)&&x($,"active",Q[1]),ue&36){Y=ve(Q[5]);let ce;for(ce=0;ce<Y.length;ce+=1){const Ae=rn(Q,Y,ce);me[ce]?(me[ce].p(Ae,ue),B(me[ce],1)):(me[ce]=an(Ae),me[ce].c(),B(me[ce],1),me[ce].m(L,null))}for(Le(),ce=Y.length;ce<me.length;ce+=1)Re(ce);Me()}if(ue&32){Pe=ve(Q[5]);let ce;for(ce=0;ce<Pe.length;ce+=1){const Ae=on(Q,Pe,ce);Ce[ce]?(Ce[ce].p(Ae,ue),B(Ce[ce],1)):(Ce[ce]=cn(Ae),Ce[ce].c(),B(Ce[ce],1),Ce[ce].m(ee,null))}for(Le(),ce=Pe.length;ce<Ce.length;ce+=1)Qe(ce);Me()}if(ue&32){Te=ve(Q[5]);let ce;for(ce=0;ce<Te.length;ce+=1){const Ae=sn(Q,Te,ce);we[ce]?(we[ce].p(Ae,ue),B(we[ce],1)):(we[ce]=fn(Ae),we[ce].c(),B(we[ce],1),we[ce].m(q,null))}for(Le(),ce=Te.length;ce<we.length;ce+=1)qe(ce);Me()}(!de||ue&1&&ge!==(ge=ae(ie("mlp",Q[0]))+" svelte-16fqg1x"))&&h(e,"class",ge)},i(Q){if(!de){B(r.$$.fragment,Q),B(a.$$.fragment,Q),B(f.$$.fragment,Q);for(let ue=0;ue<Y.length;ue+=1)B(me[ue]);B(p.$$.fragment,Q),B(M.$$.fragment,Q),B(y.$$.fragment,Q),B(Z.$$.fragment,Q);for(let ue=0;ue<Pe.length;ue+=1)B(Ce[ue]);B(k.$$.fragment,Q),B(G.$$.fragment,Q),B(b.$$.fragment,Q);for(let ue=0;ue<Te.length;ue+=1)B(we[ue]);de=!0}},o(Q){R(r.$$.fragment,Q),R(a.$$.fragment,Q),R(f.$$.fragment,Q),me=me.filter(Boolean);for(let ue=0;ue<me.length;ue+=1)R(me[ue]);R(p.$$.fragment,Q),R(M.$$.fragment,Q),R(y.$$.fragment,Q),R(Z.$$.fragment,Q),Ce=Ce.filter(Boolean);for(let ue=0;ue<Ce.length;ue+=1)R(Ce[ue]);R(k.$$.fragment,Q),R(G.$$.fragment,Q),R(b.$$.fragment,Q),we=we.filter(Boolean);for(let ue=0;ue<we.length;ue+=1)R(we[ue]);de=!1},d(Q){Q&&v(e),se(r),se(a),se(f),De(me,Q),se(p),se(M),se(y),se(Z),De(Ce,Q),se(k),se(G),se(b),De(we,Q),O=!1,je(pe)}}}const Fo="bg-purple-200",Ro="bg-indigo-200",Wo="bg-blue-200";function Zo(n,e,l){let t,o,s;$e(n,$t,m=>l(3,t=m)),$e(n,yt,m=>l(4,o=m)),$e(n,ot,m=>l(5,s=m));let{className:r=void 0}=e;Nt("block-id","mlp");let c=!1;function a(){l(1,c=!0)}function i(){l(1,c=!1)}let f=null;const u=m=>{l(2,f=m)},d=()=>{l(2,f=null)};return n.$$set=m=>{"className"in m&&l(0,r=m.className)},[r,c,f,t,o,s,a,i,u,d]}class Xo extends He{constructor(e){super(),ze(this,e,Zo,Go,Ne,{className:0})}}dt(ht);const Ko=async()=>{};Bn.wasm.wasmPaths="https://cdn.jsdelivr.net/npm/onnxruntime-web/dist/";const Yo=async(n,e)=>{Jt.set(!0);const{token_ids:l,input_tokens:t}=await Uo(n);ot.set(t);const{outputs:o,prediction:s}=await xo(l),r=kn(s,e),c=yn(r);wt.set({outputs:o,prediction:r,sampled:c}),Ht.set(c),Jt.set(!1)},Oo=async(n,e)=>{const l=kn(n,e),t=yn(l);wt.update(o=>({...o,prediction:l})),await Ko(),Ht.set(t)},Qo=n=>{const e=Math.max(...n),l=n.map(o=>Math.exp(o-e)),t=l.reduce((o,s)=>o+s,0);return l.map(o=>o/t)},Uo=async n=>{const e=await wn.from_pretrained("Xenova/gpt2"),l=e.encode(n),t=l.map(o=>e.decode([o])).flat();return{token_ids:l,input_tokens:t}},Jo=(n,e,l,t)=>{const o=Array.from(n).map((s,r)=>({tokenId:r,logit:s,probability:e[r]}));return o.sort((s,r)=>r.probability-s.probability),o.slice(0,t).map((s,r)=>({...s,rank:r,token:l.decode([s.tokenId])}))},xo=async n=>{try{const e=new Sn("int64",n,[1,n.length]),l=Ln(bn);if(!l)throw new Error("Model session is not initialized.");const t={input:e},o=await l.run(t),s=o.linear_output.data,r=Qo(s),c=await wn.from_pretrained("Xenova/gpt2"),i=Jo(s,r,c,100),f=er.reduce((u,d)=>{const m=o[d];console.log(m);const $={...m,data:gs([...m.cpuData],m.dims)};return u[d]=$,u},{});return console.log("out",f),{outputs:f,prediction:i}}catch(e){throw console.error("Error during inference:",e.message),e}},er=["block_0_attn_head_0_attn","block_0_attn_head_0_attn_scaled","block_0_attn_head_0_attn_masked","block_0_attn_head_0_attn_softmax","block_0_attn_head_0_attn_dropout","linear_output"];async function tr(n){const e=await fetch(n);if(!e.ok)throw new Error(`Failed to fetch ${n}`);return e.arrayBuffer()}async function lr(n){const e=await Promise.all(n.map(s=>tr(s))),l=e.reduce((s,r)=>s+r.byteLength,0),t=new Uint8Array(l);let o=0;for(const s of e)t.set(new Uint8Array(s),o),o+=s.byteLength;return t.buffer}function un(n){let e,l,t,o,s,r,c;return l=new Fn({}),{c(){e=E("div"),te(l.$$.fragment),this.h()},l(a){e=I(a,"DIV",{class:!0,style:!0,role:!0});var i=C(e);le(l.$$.fragment,i),i.forEach(v),this.h()},h(){h(e,"class","qkv-weight-popover svelte-6mb5yb"),h(e,"style",t=`left:${n[0].left}px;top:${n[0].top}px;`),h(e,"role","group")},m(a,i){H(a,e,i),ne(l,e,null),s=!0,r||(c=[_e(e,"mouseenter",n[3]),_e(e,"mouseleave",n[4])],r=!0)},p(a,i){(!s||i&1&&t!==(t=`left:${a[0].left}px;top:${a[0].top}px;`))&&h(e,"style",t)},i(a){s||(B(l.$$.fragment,a),a&&(o||It(()=>{o=Mn(e,nt,{duration:300}),o.start()})),s=!0)},o(a){R(l.$$.fragment,a),s=!1},d(a){a&&v(e),se(l),r=!1,je(c)}}}function nr(n){let e,l,t=(n[2]==="embedding"||n[1])&&un(n);return{c(){t&&t.c(),e=lt()},l(o){t&&t.l(o),e=lt()},m(o,s){t&&t.m(o,s),H(o,e,s),l=!0},p(o,[s]){o[2]==="embedding"||o[1]?t?(t.p(o,s),s&6&&B(t,1)):(t=un(o),t.c(),B(t,1),t.m(e.parentNode,e)):t&&(Le(),R(t,1,1,()=>{t=null}),Me())},i(o){l||(B(t),l=!0)},o(o){R(t),l=!1},d(o){o&&v(e),t&&t.d(o)}}}function sr(n,e,l){let t;$e(n,Tt,i=>l(2,t=i));let o,s={left:0,top:0},r=!1;return st(()=>{const i=()=>{var V;const u=window.scrollX,d=(V=document.querySelector(".top-bar"))==null?void 0:V.offsetHeight,$=document.querySelector(".step.embedding .content").getBoundingClientRect();l(0,s={left:$.right+u,top:$.top-d})};return i(),o=new ResizeObserver(u=>{i()}),(document==null?void 0:document.querySelectorAll(".resize-watch")).forEach(u=>o.observe(u)),()=>{o.disconnect()}}),[s,r,t,()=>{l(1,r=!0)},()=>{l(1,r=!1)}]}class or extends He{constructor(e){super(),ze(this,e,sr,nr,Ne,{})}}function dn(n){let e,l,t,o,s,r,c;return{c(){e=E("div"),t=S(),o=E("div"),this.h()},l(a){e=I(a,"DIV",{class:!0}),C(e).forEach(v),t=N(a),o=I(a,"DIV",{class:!0}),C(o).forEach(v),this.h()},h(){h(e,"class","dim svelte-13drtgo"),h(o,"class",s=ae(ie("dim-partial",`${n[1].id||""}`))+" svelte-13drtgo")},m(a,i){H(a,e,i),H(a,t,i),H(a,o,i),c=!0},p(a,i){(!c||i&2&&s!==(s=ae(ie("dim-partial",`${a[1].id||""}`))+" svelte-13drtgo"))&&h(o,"class",s)},i(a){c||(a&&It(()=>{c&&(l||(l=Lt(e,nt,{duration:100},!0)),l.run(1))}),a&&It(()=>{c&&(r||(r=Lt(o,nt,{duration:100},!0)),r.run(1))}),c=!0)},o(a){a&&(l||(l=Lt(e,nt,{duration:100},!1)),l.run(0)),a&&(r||(r=Lt(o,nt,{duration:100},!1)),r.run(0)),c=!1},d(a){a&&(v(e),v(t),v(o)),a&&l&&l.end(),a&&r&&r.end()}}}function rr(n){let e,l,t,o,s,r,c,a,i,f,u,d,m,$,V,j,L,z,p,D,M,_=!!n[1].id&&dn(n);return o=new cs({}),a=new jo({props:{className:"step"}}),f=new js({props:{className:"step"}}),d=new Xo({props:{className:"step"}}),$=new Ys({props:{className:"step"}}),j=new so({props:{className:"step"}}),p=new or({}),{c(){e=E("div"),_&&_.c(),l=S(),t=E("div"),te(o.$$.fragment),s=S(),r=E("div"),c=E("div"),te(a.$$.fragment),i=S(),te(f.$$.fragment),u=S(),te(d.$$.fragment),m=S(),te($.$$.fragment),V=S(),te(j.$$.fragment),z=S(),te(p.$$.fragment),this.h()},l(y){e=I(y,"DIV",{class:!0,style:!0});var F=C(e);_&&_.l(F),l=N(F),t=I(F,"DIV",{class:!0});var Z=C(t);le(o.$$.fragment,Z),Z.forEach(v),s=N(F),r=I(F,"DIV",{class:!0});var P=C(r);c=I(P,"DIV",{class:!0});var X=C(c);le(a.$$.fragment,X),i=N(X),le(f.$$.fragment,X),u=N(X),le(d.$$.fragment,X),m=N(X),le($.$$.fragment,X),V=N(X),le(j.$$.fragment,X),X.forEach(v),z=N(P),le(p.$$.fragment,P),P.forEach(v),F.forEach(v),this.h()},h(){h(t,"class","sankey opacity-1 svelte-13drtgo"),h(c,"class","steps svelte-13drtgo"),It(()=>n[6].call(c)),x(c,"expanded",n[2]),h(r,"class","nodes resize-watch svelte-13drtgo"),h(e,"class","main-section h-full w-full"),h(e,"style",D=`--vector-height: ${n[3]}px;--title-height: ${n[4]}px;--content-height:${n[0]-n[4]}px;`)},m(y,F){H(y,e,F),_&&_.m(e,null),g(e,l),g(e,t),ne(o,t,null),g(e,s),g(e,r),g(r,c),ne(a,c,null),g(c,i),ne(f,c,null),g(c,u),ne(d,c,null),g(c,m),ne($,c,null),g(c,V),ne(j,c,null),L=pn(c,n[6].bind(c)),g(r,z),ne(p,r,null),M=!0},p(y,[F]){y[1].id?_?(_.p(y,F),F&2&&B(_,1)):(_=dn(y),_.c(),B(_,1),_.m(e,l)):_&&(Le(),R(_,1,1,()=>{_=null}),Me()),(!M||F&4)&&x(c,"expanded",y[2]),(!M||F&9&&D!==(D=`--vector-height: ${y[3]}px;--title-height: ${y[4]}px;--content-height:${y[0]-y[4]}px;`))&&h(e,"style",D)},i(y){M||(B(_),B(o.$$.fragment,y),B(a.$$.fragment,y),B(f.$$.fragment,y),B(d.$$.fragment,y),B($.$$.fragment,y),B(j.$$.fragment,y),B(p.$$.fragment,y),M=!0)},o(y){R(_),R(o.$$.fragment,y),R(a.$$.fragment,y),R(f.$$.fragment,y),R(d.$$.fragment,y),R($.$$.fragment,y),R(j.$$.fragment,y),R(p.$$.fragment,y),M=!1},d(y){y&&v(e),_&&_.d(),se(o),se(a),se(f),se(d),se($),se(j),L(),se(p)}}}function ir(n,e,l){let t,o,s,r,c;$e(n,ot,m=>l(5,t=m)),$e(n,wt,m=>l(7,o=m)),$e(n,Gt,m=>l(8,s=m)),$e(n,Fe,m=>l(1,r=m)),$e(n,Bt,m=>l(3,c=m));let a=!1;st(async()=>{const $=Array(63).fill(0).map((_,y)=>`${Qn}/gpt2.onnx.part${y}`),V=await lr($),j=new Blob([V],{type:"application/octet-stream"}),L=URL.createObjectURL(j),z=await Nn.create(L,{});bn.set(z),Hn.set(!1);const p=zn.subscribe(_=>{Yo(_.trim(),s)});let D=!0;const M=Gt.subscribe(_=>{if(D){D=!1;return}Oo(o==null?void 0:o.prediction,_)});return()=>{p(),M()}});let i=0,f=bt*5;const u=()=>{const m=bt*.5*(t.length-1),$=Math.min(Math.max((i-f-m)/t.length/jn,An),Pn);Bt.set($),_n.set(t.length*$*3+m)};function d(){i=this.offsetHeight,l(0,i)}return n.$$.update=()=>{n.$$.dirty&2&&(r.id!==null?l(2,a=!0):l(2,a=!1)),n.$$.dirty&33&&(i||t.length)&&u()},[i,r,a,c,f,t,d]}class _r extends He{constructor(e){super(),ze(this,e,ir,rr,Ne,{})}}export{_r as component,pr as universal};
